var Co=Object.defineProperty;var Io=(t,r,a)=>r in t?Co(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a;var Ys=(t,r,a)=>Io(t,typeof r!="symbol"?r+"":r,a);import{r as h,a as Hn,u as it,R as Ce,g as ko,b as Ro,c as Ao,B as Do,d as To,e as Je,N as Eo}from"./vendor-p-mDyGue.js";import{C as na,a as is,L as os,B as ls,p as cs,b as ia,c as oa,R as Wn,P as la,d as ca,i as qn,e as Po,f as ds,g as Yn}from"./charts-Df8jcob2.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();var Gn={exports:{}},da={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mo=h,Vo=Symbol.for("react.element"),Oo=Symbol.for("react.fragment"),Fo=Object.prototype.hasOwnProperty,Lo=Mo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Bo={key:!0,ref:!0,__self:!0,__source:!0};function Jn(t,r,a){var s,n={},i=null,o=null;a!==void 0&&(i=""+a),r.key!==void 0&&(i=""+r.key),r.ref!==void 0&&(o=r.ref);for(s in r)Fo.call(r,s)&&!Bo.hasOwnProperty(s)&&(n[s]=r[s]);if(t&&t.defaultProps)for(s in r=t.defaultProps,r)n[s]===void 0&&(n[s]=r[s]);return{$$typeof:Vo,type:t,key:i,ref:o,props:n,_owner:Lo.current}}da.Fragment=Oo;da.jsx=Jn;da.jsxs=Jn;Gn.exports=da;var e=Gn.exports,_n,Gs=Hn;_n=Gs.createRoot,Gs.hydrateRoot;/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var zo={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),W=(t,r)=>{const a=h.forwardRef(({color:s="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:d,...u},m)=>h.createElement("svg",{ref:m,...zo,width:n,height:n,stroke:s,strokeWidth:o?Number(i)*24/Number(n):i,className:["lucide",`lucide-${$o(t)}`,l].join(" "),...u},[...r.map(([c,p])=>h.createElement(c,p)),...Array.isArray(d)?d:[d]]));return a.displayName=`${t}`,a};/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=W("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=W("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=W("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=W("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=W("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=W("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=W("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=W("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=W("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=W("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=W("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=W("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=W("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=W("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=W("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=W("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=W("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=W("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=W("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=W("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=W("Compass",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76",key:"m9r19z"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=W("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=W("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=W("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=W("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=W("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=W("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=W("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=W("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=W("GitCompare",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=W("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=W("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=W("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=W("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=W("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=W("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=W("MoveVertical",[["polyline",{points:"8 18 12 22 16 18",key:"1uutw3"}],["polyline",{points:"8 6 12 2 16 6",key:"d60sxy"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=W("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=W("Radar",[["path",{d:"M19.07 4.93A10 10 0 0 0 6.99 3.34",key:"z3du51"}],["path",{d:"M4 6h.01",key:"oypzma"}],["path",{d:"M2.29 9.62A10 10 0 1 0 21.31 8.35",key:"qzzz0"}],["path",{d:"M16.24 7.76A6 6 0 1 0 8.23 16.67",key:"1yjesh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M17.99 11.66A6 6 0 0 1 15.77 16.67",key:"1u2y91"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"m13.41 10.59 5.66-5.66",key:"mhq4k0"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=W("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=W("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=W("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=W("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=W("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=W("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=W("Skull",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["path",{d:"M8 20v2h8v-2",key:"ded4og"}],["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M16 20a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20",key:"xq9p5u"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=W("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=W("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=W("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=W("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z",key:"s6e0r"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=W("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=W("Trees",[["path",{d:"M10 10v.2A3 3 0 0 1 8.9 16v0H5v0h0a3 3 0 0 1-1-5.8V10a3 3 0 0 1 6 0Z",key:"yh07w9"}],["path",{d:"M7 16v6",key:"1a82de"}],["path",{d:"M13 19v3",key:"13sx9i"}],["path",{d:"M12 19h8.3a1 1 0 0 0 .7-1.7L18 14h.3a1 1 0 0 0 .7-1.7L16 9h.2a1 1 0 0 0 .8-1.7L13 3l-1.4 1.5",key:"1sj9kv"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=W("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=W("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=W("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=W("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=W("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=W("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),xt="/VRDS_CVR_APA";let Va=null;function el(){var t;return(t=globalThis.crypto)!=null&&t.randomUUID?globalThis.crypto.randomUUID():"sess_"+Date.now()+"_"+Math.random().toString(36).slice(2)}function tl(){if(Va)return Va;let t=localStorage.getItem("session_id");return t||(t=el(),localStorage.setItem("session_id",t)),Va=t,t}const be={getSessionId(){return tl()},async createUserSession(t){const r=await fetch(`${xt}/api/user-sessions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),a=await r.json().catch(()=>({}));if(!r.ok)throw new Error((a==null?void 0:a.error)||"Failed to create user session");return a},async insertValueEvolution(t){const r=await fetch(`${xt}/api/value-evolution`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),a=await r.json().catch(()=>({}));if(!r.ok)throw new Error((a==null?void 0:a.error)||"Failed to save value evolution");return a},async insertScenarioInteraction(t){const r=await fetch(`${xt}/api/scenario-interactions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),a=await r.json().catch(()=>({}));if(!r.ok)throw new Error((a==null?void 0:a.error)||"Failed to save scenario interaction");return a},async insertCVRResponse(t){const r=await fetch(`${xt}/api/cvr-responses`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),a=await r.json().catch(()=>({}));if(!r.ok)throw new Error((a==null?void 0:a.error)||"Failed to save CVR response");return a},async insertAPAReordering(t){const r=await fetch(`${xt}/api/apa-reorderings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),a=await r.json().catch(()=>({}));if(!r.ok)throw new Error((a==null?void 0:a.error)||"Failed to save APA reordering");return a},async insertFinalDecision(t){const r=await fetch(`${xt}/api/final-decisions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),a=await r.json().catch(()=>({}));if(!r.ok)throw new Error((a==null?void 0:a.error)||"Failed to save final decision");return a},async insertSessionMetrics(t){const r=await fetch(`${xt}/api/session-metrics`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),a=await r.json().catch(()=>({}));if(!r.ok)throw new Error((a==null?void 0:a.error)||"Failed to upsert session metrics");return a},async insertSessionFeedback(t){const r=await fetch(`${xt}/api/session-feedback`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),a=await r.json().catch(()=>({}));if(!r.ok)throw new Error((a==null?void 0:a.error)||"Failed to upsert session feedback");return a},async updateUserSession(t,r){const a=await fetch(`${xt}/api/user-sessions/${encodeURIComponent(t)}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),s=await a.json().catch(()=>({}));if(!a.ok)throw new Error((s==null?void 0:s.error)||"Failed to update user session");return s},async insertValueStability(t){const r=await fetch(`${xt}/api/value-stability`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),a=await r.json().catch(()=>({}));if(!r.ok)throw new Error((a==null?void 0:a.error)||"Failed to upsert value stability");return a}},rl=()=>{const t=it(),[r,a]=h.useState({age:"",gender:"",aiExperience:"",moralReasoningExperience:""}),[s,n]=h.useState(""),[i,o]=h.useState(!1),[l,d]=h.useState(!1),[u,m]=h.useState(!1),[c,p]=h.useState(!1),[g,f]=h.useState(!1);h.useEffect(()=>{localStorage.clear(),setTimeout(()=>o(!0),100)},[]);const b=()=>{if(!c)return;const x=new Date().toISOString();localStorage.setItem("userConsent",JSON.stringify({agreed:!0,timestamp:x})),m(!0),setTimeout(()=>{f(!0)},300)},y=async x=>{if(x.preventDefault(),!r.age||!r.gender||!r.aiExperience||!r.moralReasoningExperience){n("Please fill in all fields");return}const w=parseInt(r.age);if(isNaN(w)||w<18||w>120){n("Please enter a valid age between 18 and 120");return}localStorage.setItem("userDemographics",JSON.stringify(r));const C=be.getSessionId();localStorage.setItem("currentSessionId",C);const R=JSON.parse(localStorage.getItem("userConsent")||"{}");await be.createUserSession({session_id:C,experiment_condition:"1",demographics:r,consent_agreed:R.agreed||!1,consent_timestamp:R.timestamp}),t("/explicitvaluepage")};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-red-50 to-yellow-50 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-orange-200/30 to-red-200/30 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-br from-yellow-200/30 to-orange-200/30 rounded-full blur-3xl animate-pulse delay-1000"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-br from-red-100/20 to-orange-100/20 rounded-full blur-3xl animate-pulse delay-500"})]}),e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx(Ut,{className:"absolute top-20 left-20 text-orange-300/40 animate-bounce",size:32,style:{animationDelay:"0s",animationDuration:"3s"}}),e.jsx(rr,{className:"absolute top-32 right-32 text-red-300/40 animate-bounce",size:28,style:{animationDelay:"1s",animationDuration:"4s"}}),e.jsx(Ht,{className:"absolute bottom-32 left-32 text-yellow-300/40 animate-bounce",size:30,style:{animationDelay:"2s",animationDuration:"3.5s"}}),e.jsx(_r,{className:"absolute bottom-20 right-20 text-orange-300/40 animate-bounce",size:26,style:{animationDelay:"0.5s",animationDuration:"4.5s"}})]}),e.jsx("div",{className:"relative z-10 min-h-screen flex items-center justify-center px-4 sm:px-6 lg:px-8 py-8",children:e.jsx("div",{className:`w-full max-w-4xl transition-all duration-1000 transform ${i?"translate-y-0 opacity-100":"translate-y-10 opacity-0"}`,children:u?e.jsx("div",{className:`transition-all duration-500 ${g?"opacity-100 translate-x-0":"opacity-0 translate-x-[100%]"}`,children:e.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-8 lg:gap-12",children:[e.jsxs("div",{className:"flex-1 text-center lg:text-left",children:[e.jsx("div",{className:"flex justify-center lg:justify-start mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-400 to-red-500 rounded-full blur-lg opacity-30 animate-pulse"}),e.jsx("div",{className:"relative bg-gradient-to-r from-orange-500 to-red-600 p-3 rounded-full shadow-2xl",children:e.jsx(Wo,{className:"h-10 w-10 text-white"})})]})}),e.jsx("h1",{className:"text-3xl lg:text-4xl font-bold bg-gradient-to-r from-orange-600 via-red-600 to-yellow-600 bg-clip-text text-transparent mb-3",children:"Wildfire Crisis Simulation"}),e.jsx("div",{className:"w-20 h-1 bg-gradient-to-r from-orange-400 to-red-500 mx-auto lg:mx-0 rounded-full mb-4"}),e.jsx("p",{className:"text-base text-gray-700 leading-relaxed mb-6",children:"Experience ethical decision-making in crisis scenarios. Your choices will help us understand how values influence critical decisions."}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm p-3 rounded-lg shadow border border-white/50",children:[e.jsx(Ut,{className:"h-5 w-5 text-orange-500 mb-1 mx-auto lg:mx-0"}),e.jsx("h3",{className:"font-semibold text-gray-800 text-xs",children:"Crisis Management"})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm p-3 rounded-lg shadow border border-white/50",children:[e.jsx(rr,{className:"h-5 w-5 text-red-500 mb-1 mx-auto lg:mx-0"}),e.jsx("h3",{className:"font-semibold text-gray-800 text-xs",children:"Ethical Decisions"})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm p-3 rounded-lg shadow border border-white/50",children:[e.jsx(Ht,{className:"h-5 w-5 text-yellow-500 mb-1 mx-auto lg:mx-0"}),e.jsx("h3",{className:"font-semibold text-gray-800 text-xs",children:"Impact Analysis"})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm p-3 rounded-lg shadow border border-white/50",children:[e.jsx(_r,{className:"h-5 w-5 text-orange-500 mb-1 mx-auto lg:mx-0"}),e.jsx("h3",{className:"font-semibold text-gray-800 text-xs",children:"Expert Insights"})]})]})]}),e.jsx("div",{className:"w-full lg:w-96 flex-shrink-0",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-lg py-6 px-6 shadow-2xl rounded-2xl border border-white/50",children:[e.jsxs("form",{className:"space-y-4",onSubmit:y,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"age",className:"block text-sm font-semibold text-gray-700 mb-1.5",children:"Age"}),e.jsx("input",{id:"age",name:"age",type:"number",required:!0,min:"18",max:"120",value:r.age,onChange:x=>a(w=>({...w,age:x.target.value})),className:"appearance-none block w-full px-4 py-2.5 border border-gray-200 rounded-xl shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 bg-white/90 backdrop-blur-sm",placeholder:"Enter your age"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"gender",className:"block text-sm font-semibold text-gray-700 mb-1.5",children:"Gender"}),e.jsxs("select",{id:"gender",name:"gender",required:!0,value:r.gender,onChange:x=>a(w=>({...w,gender:x.target.value})),className:"appearance-none block w-full px-4 py-2.5 border border-gray-200 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 bg-white/90 backdrop-blur-sm text-gray-700",children:[e.jsx("option",{value:"",children:"Select your gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Dealing with AI Systems"}),e.jsx("div",{className:"flex gap-2",children:["Never","Rarely","Often","Very Often","Most of the Time"].map(x=>e.jsx("button",{type:"button",onClick:()=>a(w=>({...w,aiExperience:x})),className:`flex-1 py-2 px-1.5 text-xs font-medium rounded-lg transition-all duration-200 ${r.aiExperience===x?"bg-gradient-to-r from-orange-500 to-red-600 text-white shadow-lg scale-105":"bg-white/90 text-gray-700 border border-gray-200 hover:border-orange-300 hover:shadow-md"}`,children:x},x))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-1.5",children:["Experience with Moral Reasoning",e.jsxs("div",{className:"relative",children:[e.jsx("button",{type:"button",onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),onClick:()=>d(!l),className:"text-orange-500 hover:text-orange-600 transition-colors",children:e.jsx(zt,{size:16})}),l&&e.jsxs("div",{className:"absolute left-0 top-6 z-50 bg-gray-800 text-white text-xs rounded-lg py-2 px-3 shadow-xl whitespace-nowrap",children:["i.e., Philosophy Class, Moral Machine",e.jsx("div",{className:"absolute -top-1 left-4 w-2 h-2 bg-gray-800 transform rotate-45"})]})]})]}),e.jsx("div",{className:"flex gap-2",children:["Poor","Fair","Good","Very Good","Excellent"].map(x=>e.jsx("button",{type:"button",onClick:()=>a(w=>({...w,moralReasoningExperience:x})),className:`flex-1 py-2 px-2 text-xs font-medium rounded-lg transition-all duration-200 ${r.moralReasoningExperience===x?"bg-gradient-to-r from-orange-500 to-red-600 text-white shadow-lg scale-105":"bg-white/90 text-gray-700 border border-gray-200 hover:border-orange-300 hover:shadow-md"}`,children:x},x))})]}),s&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-2.5 animate-shake",children:e.jsx("p",{className:"text-red-600 text-sm font-medium",children:s})}),e.jsx("div",{children:e.jsxs("button",{type:"submit",className:"group relative w-full flex justify-center items-center py-2.5 px-4 border border-transparent rounded-xl text-sm font-semibold text-white bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 transition-all duration-200 transform hover:scale-105 hover:shadow-xl",children:[e.jsx("span",{className:"absolute inset-0 bg-gradient-to-r from-orange-400 to-red-500 rounded-xl blur opacity-30 group-hover:opacity-50 transition-opacity duration-200"}),e.jsxs("span",{className:"relative flex items-center",children:["Begin Assessment",e.jsx(ut,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform duration-200"})]})]})})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("p",{className:"text-xs text-gray-500",children:"Your responses will be used for research purposes only"})})]})})]})}):e.jsx("div",{className:`transition-all duration-500 ${u?"opacity-0 translate-x-[-100%]":"opacity-100 translate-x-0"}`,children:e.jsxs("div",{className:"bg-white/90 backdrop-blur-lg shadow-2xl rounded-2xl border border-white/50 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-red-600 px-8 py-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-white text-center",children:"Informed Consent"}),e.jsx("p",{className:"text-orange-50 text-center mt-2",children:"Please read this consent document carefully before you decide to participate in this study."})]}),e.jsx("div",{className:"px-8 py-6 max-h-[65vh] overflow-y-auto custom-scrollbar",children:e.jsxs("div",{className:"space-y-6 text-gray-700",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Study Title"}),e.jsx("p",{className:"leading-relaxed",children:"Negotiation and Cognitive Value Recontextualization for Consistency Assessment in Human-AI Collaboration: Advancing Joint Decision-Making through Adaptive Preference Alignment"})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Purpose of the Study"}),e.jsx("p",{className:"leading-relaxed mb-3",children:"This study builds on the Moral Machine Experiment, which examined how people make ethical trade-offs in complex situations. It explores how humans collaborate with multiple AI expert agents‚Äîeach representing values such as Safety, Efficiency, Fairness, Sustainability, and Non-maleficence‚Äîduring simulated wildfire emergencies."}),e.jsxs("p",{className:"leading-relaxed mb-3",children:["The experiment applies two frameworks: ",e.jsx("strong",{children:"Cognitive Value Recontextualization (CVR)"}),", which examines how people reinterpret their values in new contexts, and ",e.jsx("strong",{children:"Adaptive Preference Alignment (APA)"}),", which studies how human and AI preferences can be aligned for more ethical and transparent decisions."]}),e.jsx("p",{className:"leading-relaxed",children:"The goal is to better understand how AI can support human moral reasoning and decision-making in high-stakes scenarios."})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Procedures"}),e.jsx("p",{className:"leading-relaxed mb-3",children:"This experiment will be conducted entirely online through a web-based simulation platform. Participants will begin by completing a brief demographic questionnaire, followed by two value-assessment phases:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-2 ml-4 mb-3",children:[e.jsxs("li",{className:"leading-relaxed",children:[e.jsx("strong",{children:"Explicit Value Questionnaire"})," ‚Äì consisting of simple, everyday scenarios designed to identify stable personal values."]}),e.jsxs("li",{className:"leading-relaxed",children:[e.jsx("strong",{children:"Implicit Value Questionnaire"})," ‚Äì involving mid-level contextual scenarios to reveal how values shift across different situations."]})]}),e.jsx("p",{className:"leading-relaxed mb-3",children:"Based on these responses, the system generates each participant's evaluated stable and context-dependent value profile."}),e.jsx("p",{className:"leading-relaxed mb-3",children:"Next, participants will engage with three interactive wildfire scenarios. In each scenario, they will receive guidance from multiple AI expert agents, each representing a distinct ethical or operational perspective (e.g., Safety, Efficiency, Fairness, Sustainability, and Non-maleficence). Participants will then decide how to allocate firefighting resources based on the agents' recommendations and their own judgment."}),e.jsx("p",{className:"leading-relaxed mb-3",children:"After completing the scenarios, participants will be asked to respond to brief follow-up questions that evaluate their reasoning, satisfaction, and overall experience."}),e.jsxs("p",{className:"leading-relaxed",children:["The full session will take approximately ",e.jsx("strong",{children:"20‚Äì35 minutes"})," and can be completed in one sitting using a computer or tablet."]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Potential Risks of Participating"}),e.jsx("p",{className:"leading-relaxed",children:"There are no known risks beyond what you'd normally experience using a computer. Some people might feel brief mental fatigue or mild stress when facing moral trade-offs (like choosing between difficult rescue options), but you can pause or stop at any time."})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Potential Benefits of Participating"}),e.jsx("p",{className:"leading-relaxed",children:"By taking part, you'll help us learn how people and AI can work together to make better decisions during emergency situations like wildfires. Your participation will help researchers design future AI systems that are more ethical, transparent, and human-centered tools that could improve safety and decision support in real-world disaster response. You may also find it interesting to see how your own values and reasoning compare to the AI experts' perspectives."})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Compensation"}),e.jsx("p",{className:"leading-relaxed",children:"Those who are taking designated undergraduate-level courses may be eligible to receive extra credit upon the completion of the study."})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Confidentiality"}),e.jsx("p",{className:"leading-relaxed",children:"Your responses will remain completely anonymous. No names, emails, or identifiable information will be collected. Data will be stored on secure, password-protected servers accessible only to the research team. Results will be reported in aggregate form only, ensuring that no individual participant can be identified."})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Voluntary Participation"}),e.jsx("p",{className:"leading-relaxed",children:"Your participation in this study is completely voluntary. There is no penalty for not participating. You may also refuse to answer questions that are asked in the study."})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Right to Withdraw from the Study"}),e.jsx("p",{className:"leading-relaxed",children:"You have the right to withdraw from the study at any time without consequence."})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Whom to Contact if You Have Questions"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"About the study:"}),e.jsx("p",{children:"Waseem Samkari, Ph.D. Candidate"}),e.jsx("p",{children:"College of Engineering and Science"}),e.jsx("p",{children:"Florida Institute of Technology"}),e.jsxs("p",{children:["Email: ",e.jsx("a",{href:"mailto:wsamkari2022@my.fit.edu",className:"text-orange-600 hover:text-orange-700 underline",children:"wsamkari2022@my.fit.edu"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"About your rights as a research participant:"}),e.jsx("p",{children:"Dr. Jignya Patel, IRB Chairperson"}),e.jsx("p",{children:"150 West University Blvd."}),e.jsx("p",{children:"Melbourne, FL 32901"}),e.jsxs("p",{children:["Email: ",e.jsx("a",{href:"mailto:FIT_IRB@fit.edu",className:"text-orange-600 hover:text-orange-700 underline",children:"FIT_IRB@fit.edu"})]})]})]})]}),e.jsxs("div",{className:"border-t-2 border-orange-200 pt-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Agreement"}),e.jsxs("div",{className:"bg-orange-50 border-2 border-orange-300 rounded-lg p-6",children:[e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:c,onChange:x=>p(x.target.checked),className:"mt-1 w-5 h-5 text-orange-600 border-gray-300 rounded focus:ring-orange-500 focus:ring-2 cursor-pointer"}),e.jsx("span",{className:"text-gray-800 leading-relaxed group-hover:text-gray-900 transition-colors",children:"I have read the procedure described above. I voluntarily agree to participate in the procedure and I have received a copy of this description."})]}),e.jsx("button",{onClick:b,disabled:!c,className:`mt-6 w-full py-3 px-6 rounded-xl font-semibold text-white transition-all duration-200 ${c?"bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 hover:shadow-lg transform hover:scale-105 cursor-pointer":"bg-gray-300 cursor-not-allowed opacity-60"}`,children:"Confirm and Continue"})]})]})]})})]})})})}),e.jsx("style",{jsx:!0,children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: #f1f1f1;
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: linear-gradient(to bottom, #f97316, #dc2626);
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: linear-gradient(to bottom, #ea580c, #b91c1c);
        }
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          25% { transform: translateX(-5px); }
          75% { transform: translateX(5px); }
        }
        .animate-shake {
          animation: shake 0.5s ease-in-out;
        }
      `})]})},Bt=[{id:1,scenario:"Your neighbor's cat frequently visits your garden. You notice it's not well-fed. What do you do?",options:[{value:"Safety",label:"Report to animal welfare immediately",icon:"üõ°Ô∏è"},{value:"Fairness",label:"Discuss the situation with your neighbor first",icon:"‚öñÔ∏è"},{value:"Nonmaleficence",label:"Leave food without interfering",icon:"ü§≤"},{value:"Efficiency",label:"Set up deterrents to keep the cat away",icon:"‚ö°"}]},{id:2,scenario:"You have two routes to work: a shorter route through a busy area or a longer, scenic route. Which do you choose?",options:[{value:"Efficiency",label:"Take the shorter route to save time",icon:"‚ö°"},{value:"Sustainability",label:"Choose the scenic route with less traffic",icon:"üå±"},{value:"Safety",label:"Pick the route with better road conditions",icon:"üõ°Ô∏è"}]},{id:3,scenario:"Your apartment building has limited parking spaces. How should they be allocated?",options:[{value:"Fairness",label:"First-come, first-served basis",icon:"‚öñÔ∏è"},{value:"Efficiency",label:"Closest spaces for most frequent users",icon:"‚ö°"},{value:"Safety",label:"Priority for elderly and disabled residents",icon:"üõ°Ô∏è"},{value:"Sustainability",label:"Extra spaces for carpooling residents",icon:"üå±"}]},{id:4,scenario:"You find a wallet with cash and ID. What's your immediate action?",options:[{value:"Urgency",label:"Contact the owner immediately",icon:"‚è±Ô∏è"},{value:"Safety",label:"Turn it in to the police",icon:"üõ°Ô∏è"},{value:"Fairness",label:"Leave it where found but monitor",icon:"‚öñÔ∏è"},{value:"Efficiency",label:"Drop it in a mailbox",icon:"‚ö°"}]},{id:5,scenario:"Your community garden has limited water during a drought. How do you manage resources?",options:[{value:"Sustainability",label:"Implement water-saving techniques",icon:"üå±"},{value:"Fairness",label:"Create a strict watering schedule",icon:"‚öñÔ∏è"},{value:"Efficiency",label:"Focus on plants with highest yield",icon:"‚ö°"},{value:"Nonmaleficence",label:"Share water equally regardless of need",icon:"ü§≤"}]}],fs=({currentStep:t,steps:r})=>{const n=r.length,i=1/(n-1)*100,l=5/(n-1)*100-i;return e.jsx("div",{className:"w-full bg-gradient-to-r from-blue-50 to-green-50 py-6 mb-6",children:e.jsx("div",{className:"max-w-5xl mx-auto px-4",children:e.jsxs("div",{className:"relative flex items-center justify-between",children:[e.jsx("div",{className:"absolute rounded-3xl border-2 border-amber-300 bg-amber-50/30 backdrop-blur-sm shadow-lg",style:{left:`calc(${i}% - 2%)`,width:`calc(${l}% + 4%)`,top:"-20px",bottom:"-10px",zIndex:0},children:e.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-amber-100 border-2 border-amber-300 px-4 py-1 rounded-full shadow-md",children:e.jsx("span",{className:"text-xs font-bold text-amber-800 tracking-wide",children:"Implicit Values"})})}),r.map((d,u)=>{const m=u<t,c=u===t,p=u>t,g=d.isLarger,f=g?"w-14 h-14":"w-10 h-10",b=g?"text-sm font-bold":"text-xs";return e.jsxs("div",{className:"relative flex flex-col items-center",style:{flex:1},children:[u>0&&e.jsx("div",{className:`absolute top-5 right-1/2 h-0.5 transition-all duration-500 ${m||u===t&&u>0?"bg-green-500":"bg-gray-300"}`,style:{width:"100%",transform:"translateY(-50%)"}}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[e.jsxs("div",{className:`${f} rounded-full border-4 transition-all duration-500 flex items-center justify-center ${m?"bg-green-500 border-green-500 shadow-lg shadow-green-300/50":c?"bg-white border-blue-500 shadow-lg shadow-blue-300/50 animate-pulse":"bg-white border-gray-300 shadow-md"}`,children:[m&&e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})}),c&&e.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-500 animate-pulse"}),p&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-300"})]}),e.jsx("div",{className:`mt-3 ${b} text-center font-medium transition-all duration-500 ${m?"text-green-700":c?"text-blue-700":"text-gray-500"}`,style:{minWidth:"60px",maxWidth:g?"80px":"70px"},children:d.label})]})]},d.id)})]})})})},al=()=>{const t=it(),[r,a]=h.useState({}),[s,n]=h.useState(!1),[i,o]=h.useState(!1),[l,d]=h.useState(!0),[u,m]=h.useState(!1),c=(f,b)=>{a(y=>({...y,[f]:b}))};h.useEffect(()=>{const f=()=>{window.scrollY>100&&!u&&(m(!0),d(!1))};return window.addEventListener("scroll",f),()=>window.removeEventListener("scroll",f)},[u]);const p=async()=>{if(Object.keys(r).length!==Bt.length){alert("Please answer all questions before continuing.");return}n(!0);const f=Object.entries(r).map(([b,y])=>({question_id:parseInt(b),value_selected:y,timestamp:new Date().toISOString()}));try{localStorage.setItem("explicitValues",JSON.stringify(f)),o(!0),setTimeout(()=>{t("/preferences")},2e3)}catch(b){console.error("Failed to save explicit values:",b),n(!1)}};if(i)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[e.jsx(dt,{className:"mx-auto text-green-500 mb-4",size:48}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Thank You!"}),e.jsx("p",{className:"text-gray-600",children:"Your responses have been recorded. Proceeding to the next stage..."})]})});const g=[{id:"explicit",label:"Explicit Values"},{id:"hospital",label:"Hospital"},{id:"environment",label:"Environment"},{id:"safety",label:"Safety"},{id:"resources",label:"Resources"},{id:"medical",label:"Medical"},{id:"results",label:"Results"},{id:"simulation",label:"Simulation",isLarger:!0}];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Yo,{className:"h-8 w-8 text-blue-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Explicit Value Identification ‚Äì Benchmark Questionnaire"})]})})}),e.jsx(fs,{currentStep:0,steps:g}),e.jsxs("main",{className:"max-w-4xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 rounded-md mb-8",children:e.jsx("p",{className:"text-blue-700",children:"Please answer the following simple everyday dilemmas. Select the value that best reflects your personal beliefs. Your selections will serve as a baseline for later comparison."})}),l&&e.jsx("div",{className:"fixed top-1/2 right-8 transform -translate-y-1/2 z-50 animate-bounce",children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-4 rounded-2xl shadow-2xl max-w-xs",children:[e.jsxs("p",{className:"text-sm font-semibold mb-1 flex items-center",children:[e.jsx(At,{size:20,className:"mr-2 animate-pulse"}),"Scroll Down!"]}),e.jsx("p",{className:"text-xs opacity-90",children:"Answer all five questions below"})]}),e.jsx("div",{className:"absolute -left-3 top-1/2 transform -translate-y-1/2 w-0 h-0 border-t-8 border-b-8 border-r-8 border-transparent border-r-purple-600"})]})}),e.jsx("div",{className:"space-y-8",children:Bt.map(f=>e.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:f.scenario}),e.jsx("div",{className:"grid gap-3",children:f.options.map(b=>e.jsx("button",{onClick:()=>c(f.id,b.value),className:`w-full text-left p-4 rounded-lg border transition-all duration-200 ${r[f.id]===b.value?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300 hover:bg-blue-50"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xl mr-3",children:b.icon}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:b.value}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:b.label})]})]})},b.value))})]},f.id))}),e.jsx("div",{className:"sticky bottom-8 mt-8",children:e.jsx("div",{className:"bg-white bg-opacity-90 backdrop-blur supports-[backdrop-filter]:bg-opacity-50 border rounded-lg shadow-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[Object.keys(r).length," of ",Bt.length," questions answered"]}),e.jsxs("button",{onClick:p,disabled:Object.keys(r).length!==Bt.length||s,className:`flex items-center px-6 py-2 rounded-md text-white font-medium transition-colors duration-200 ${Object.keys(r).length===Bt.length&&!s?"bg-blue-600 hover:bg-blue-700":"bg-gray-400 cursor-not-allowed"}`,children:["Submit Answers & Continue",e.jsx(ut,{className:"ml-2 h-5 w-5"})]})]})})})]})]})},Za=[{id:"hospital-triage",title:"üè• Hospital Emergency Triage",scenario:"A hospital has limited resources during a crisis. Should they prioritize treating many patients with moderate injuries or focus on fewer patients with severe conditions?",options:[{text:"Treat many moderate injuries (maximizing efficiency)",value:"efficiency"},{text:"Focus on severe cases (prioritizing individual care)",value:"nonmaleficence"}],followUpQuestions:{efficiency:{question:"In a different scenario, if a company needs to cut costs, would you prefer laying off a few high-salary employees or implementing smaller pay cuts across the entire workforce?",valueIfYes:{name:"Efficiency",type:"Stable"},valueIfNo:[{name:"Efficiency",type:"Context-Dependent"},{name:"Nonmaleficence",type:"Context-Dependent"}]},nonmaleficence:{question:"If you were developing a new medication, would you also prioritize thoroughly testing for rare but severe side effects, even if it delays helping many patients with moderate conditions?",valueIfYes:{name:"Nonmaleficence",type:"Stable"},valueIfNo:[{name:"Nonmaleficence",type:"Context-Dependent"},{name:"Efficiency",type:"Context-Dependent"}]}}},{id:"environmental-project",title:"üåç Environmental Project Decision",scenario:"A city must choose between implementing immediate but temporary pollution controls or a longer-term sustainable solution that takes more time to show results.",options:[{text:"Quick temporary solution (immediate impact)",value:"efficiency"},{text:"Long-term sustainable approach (future impact)",value:"sustainability"}],followUpQuestions:{efficiency:{question:"In managing a wildlife conservation project, would you also choose quick-fix solutions over more comprehensive but time-consuming approaches?",valueIfYes:{name:"Efficiency",type:"Stable"},valueIfNo:[{name:"Efficiency",type:"Context-Dependent"},{name:"Sustainability",type:"Context-Dependent"}]},sustainability:{question:"Would you support higher taxes to fund long-term environmental projects, even if it means slower economic growth in the short term?",valueIfYes:{name:"Sustainability",type:"Stable"},valueIfNo:[{name:"Sustainability",type:"Context-Dependent"},{name:"Efficiency",type:"Context-Dependent"}]}}},{id:"safety-protocol",title:"üõ°Ô∏è Workplace Safety Protocol",scenario:"A manufacturing plant must decide between maintaining current production levels with standard safety measures or reducing output to implement enhanced safety protocols.",options:[{text:"Maintain production with current safety",value:"efficiency"},{text:"Reduce output for enhanced safety",value:"safety"}],followUpQuestions:{efficiency:{question:"In a different context, would you also prioritize meeting project deadlines over implementing additional safety measures in construction work?",valueIfYes:{name:"Efficiency",type:"Stable"},valueIfNo:[{name:"Efficiency",type:"Context-Dependent"},{name:"Safety",type:"Context-Dependent"}]},safety:{question:"Would you support mandatory safety training in all industries, even if it significantly increases operational costs and reduces productivity?",valueIfYes:{name:"Safety",type:"Stable"},valueIfNo:[{name:"Safety",type:"Context-Dependent"},{name:"Efficiency",type:"Context-Dependent"}]}}},{id:"resource-distribution",title:"‚öñÔ∏è Resource Distribution",scenario:"A community must decide how to distribute limited educational resources: either equally across all schools or based on individual school needs and performance.",options:[{text:"Equal distribution",value:"fairness"},{text:"Need-based distribution",value:"efficiency"}],followUpQuestions:{fairness:{question:"In healthcare resource allocation, would you also support equal distribution of resources regardless of population density or specific community needs?",valueIfYes:{name:"Fairness",type:"Stable"},valueIfNo:[{name:"Fairness",type:"Context-Dependent"},{name:"Efficiency",type:"Context-Dependent"}]},efficiency:{question:"Would you support allocating more resources to high-performing schools to maximize overall educational outcomes?",valueIfYes:{name:"Efficiency",type:"Stable"},valueIfNo:[{name:"Efficiency",type:"Context-Dependent"},{name:"Fairness",type:"Context-Dependent"}]}}},{id:"medical-research",title:"üî¨ Medical Research Ethics",scenario:"A research institution must decide between fast-tracking a promising treatment with unknown long-term effects or conducting extended trials to ensure complete safety.",options:[{text:"Fast-track the treatment",value:"efficiency"},{text:"Conduct extended trials",value:"nonmaleficence"}],followUpQuestions:{efficiency:{question:"In a hospital management context, would you also prioritize launching a new digital patient record system quickly to improve operations, even if some data-security measures are not yet fully tested?",valueIfYes:{name:"Efficiency",type:"Stable"},valueIfNo:[{name:"Efficiency",type:"Context-Dependent"},{name:"Nonmaleficence",type:"Context-Dependent"}]},nonmaleficence:{question:"Would you maintain the same cautious approach in testing new technologies that could immediately improve quality of life but might have unknown long-term impacts?",valueIfYes:{name:"Nonmaleficence",type:"Stable"},valueIfNo:[{name:"Nonmaleficence",type:"Context-Dependent"},{name:"Efficiency",type:"Context-Dependent"}]}}}],sl=()=>{var p,g,f;const t=it(),[r,a]=h.useState(0),[s,n]=h.useState([]),[i,o]=h.useState(!1);h.useEffect(()=>{localStorage.removeItem("userResponses"),n([]),a(0)},[]),h.useEffect(()=>{i&&t("/completion")},[i,t]);const l=Za[r],d=b=>{const y={scenarioId:l.id,selectedOption:b,followUpAnswer:null,deepValues:[]};n(x=>{const w=[...x];return w[r]=y,localStorage.setItem("userResponses",JSON.stringify(w)),w})},u=b=>{n(y=>{const x=[...y],w=x[r]={...x[r],followUpAnswer:b},C=l.followUpQuestions[w.selectedOption];if(b?w.deepValues=[C.valueIfYes]:w.deepValues=[{name:C.valueIfNo[0].name,type:"Context-Dependent"},{name:C.valueIfNo[1].name,type:"Context-Dependent"}],r===Za.length-1){const R=[...x].flatMap(N=>N.deepValues);localStorage.setItem("deepValues",JSON.stringify(R)),localStorage.setItem("userResponses",JSON.stringify(x)),o(!0)}else localStorage.setItem("userResponses",JSON.stringify(x)),a(R=>R+1);return x})},m=()=>s[r],c=[{id:"explicit",label:"Explicit Values"},{id:"hospital",label:"Hospital"},{id:"environment",label:"Environment"},{id:"safety",label:"Safety"},{id:"resources",label:"Resources"},{id:"medical",label:"Medical"},{id:"results",label:"Results"},{id:"simulation",label:"Simulation",isLarger:!0}];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Zo,{className:"h-8 w-8 text-blue-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Preference Selection & Implicit Value Revealing"})]})})}),e.jsx(fs,{currentStep:1+r,steps:c}),e.jsx("main",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"space-y-6",children:l&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:l.title}),e.jsx("p",{className:"text-gray-600 mb-6",children:l.scenario}),(!m()||((p=m())==null?void 0:p.followUpAnswer)===null)&&e.jsx("div",{className:"space-y-4",children:l.options.map(b=>{var y;return e.jsx("button",{onClick:()=>d(b.value),className:`w-full p-4 text-left rounded-lg border transition-all duration-200 ${((y=m())==null?void 0:y.selectedOption)===b.value?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300 hover:bg-blue-50"}`,children:b.text},b.value)})}),((g=m())==null?void 0:g.selectedOption)&&((f=m())==null?void 0:f.followUpAnswer)===null&&e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("h3",{className:"font-semibold mb-4",children:l.followUpQuestions[m().selectedOption].question}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>u(!0),className:"flex-1 py-2 px-4 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"Yes"}),e.jsx("button",{onClick:()=>u(!1),className:"flex-1 py-2 px-4 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:"No"})]})]})]})})})]})},nl=()=>{const t=it(),[r,a]=h.useState(!1);return h.useEffect(()=>{a(!0);const s=setTimeout(()=>{t("/values")},3e3);return()=>clearTimeout(s)},[t]),e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:`text-center transform transition-all duration-500 ${r?"translate-y-0 opacity-100":"translate-y-10 opacity-0"}`,children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md mx-auto",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"rounded-full bg-green-100 p-3",children:e.jsx(dt,{className:"h-12 w-12 text-green-600"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Preferences Selection Complete!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Thank you for completing the preferences selection. You'll be redirected to review your values in a moment."}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-600",children:[e.jsx("span",{children:"Proceeding to Values Review"}),e.jsx(ut,{className:"h-5 w-5 animate-bounce"})]})]})})})},il=()=>{const t=it(),[r,a]=h.useState([]),[s,n]=h.useState({stable:[],contextDependent:[]}),[i,o]=h.useState([]),[l,d]=h.useState([]),[u,m]=h.useState({stable:0,contextDependent:0}),[c,p]=h.useState(!1),[g,f]=h.useState([]),[b,y]=h.useState(!1),[x,w]=h.useState([]);h.useEffect(()=>{const S=localStorage.getItem("deepValues"),I=localStorage.getItem("explicitValues"),D=localStorage.getItem("userResponses");if(!S||!I||!D){p(!0);return}try{const L=JSON.parse(S),E=JSON.parse(D),$=JSON.parse(I);a(L),o($);const se={stable:[],contextDependent:[]};E.forEach((Y,we)=>{const de=Y.scenarioId,Pe=Za.find(T=>T.id===de),j=Pe?Pe.title:`Scenario ${we+1}`;Y.deepValues.length===1?se.stable.push({scenarioId:j,value:Y.deepValues[0]}):Y.deepValues.length===2&&se.contextDependent.push({scenarioId:j,values:Y.deepValues})}),n(se);const k={};$.forEach(Y=>{k[Y.value_selected]=(k[Y.value_selected]||0)+1});const M=$.length,A=Object.entries(k).map(([Y,we])=>({value:Y,count:we,percentage:we/M*100})).sort((Y,we)=>we.count-Y.count);d(A);const O={};L.forEach(Y=>{O[Y.name]=(O[Y.name]||0)+1});const V=L.length,B=Object.entries(O).map(([Y,we])=>({value:Y,count:we,percentage:we/V*100})).sort((Y,we)=>we.count-Y.count);w(B);const z=Array.from(new Set(L.filter(Y=>Y.type==="Stable").map(Y=>Y.name))),ce=L.filter(Y=>Y.type==="Context-Dependent").map(Y=>Y.name),me=z.map(Y=>{const we=A.find(de=>de.value===Y);return{name:Y,matchPercentage:we?we.percentage:0}}).filter(Y=>Y.matchPercentage>0).sort((Y,we)=>we.matchPercentage-Y.matchPercentage);f(me);let Ne=0,re=0;A.forEach(Y=>{z.includes(Y.value)&&Ne++,ce.includes(Y.value)&&re++}),m({stable:z.length?Ne/z.length*100:0,contextDependent:ce.length?re/ce.length*100:0})}catch(L){console.error("Error parsing saved values:",L),p(!0)}},[]);const C=async()=>{try{const S=be.getSessionId(),I={explicit:i.map(E=>E.value_selected),implicit:r.map(E=>E.name)};localStorage.setItem("userValues",JSON.stringify(I)),localStorage.setItem("ExplicitValueFrequencies",JSON.stringify(l)),localStorage.setItem("ImplicitValueFrequencies",JSON.stringify(x));const D=g.slice(0,2);localStorage.setItem("finalValues",JSON.stringify(D));const L=D.map((E,$)=>({session_id:S,value_name:E.name,match_percentage:E.matchPercentage,rank_order:$+1,value_type:"stable"}));await be.insertValueEvolution({session_id:S,value_list_snapshot:D}),t("/tutorial")}catch(S){console.error("Failed to save values:",S)}},R=S=>{const I=Bt.find(D=>D.id===S);return I?I.scenario:"Unknown Question"},N=(S,I)=>{const D=Bt.find(E=>E.id===S);if(!D)return I;const L=D.options.find(E=>E.value===I);return L?`${L.icon} ${L.value} - ${L.label}`:I};if(c)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-md",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Qa,{className:"h-5 w-5 text-red-400"}),e.jsx("p",{className:"ml-3 text-red-700",children:"Please complete both the explicit and implicit value assessments first."})]}),e.jsx("button",{onClick:()=>t("/explicitvaluepage"),className:"mt-2 text-red-600 hover:text-red-800 font-medium",children:"Start from the beginning"})]})});const v=[{id:"explicit",label:"Explicit Values"},{id:"hospital",label:"Hospital"},{id:"environment",label:"Environment"},{id:"safety",label:"Safety"},{id:"resources",label:"Resources"},{id:"medical",label:"Medical"},{id:"results",label:"Results"},{id:"simulation",label:"Simulation",isLarger:!0}];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(It,{className:"h-8 w-8 text-purple-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Value Assessment Results"})]})})}),e.jsx(fs,{currentStep:6,steps:v}),e.jsxs("main",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[b?e.jsxs("div",{children:[e.jsx("div",{className:"mb-6 flex justify-center",children:e.jsxs("button",{onClick:()=>y(!1),className:"bg-gray-100 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-200 transition-colors duration-300 font-medium flex items-center gap-2 border border-gray-300",children:[e.jsx($t,{className:"h-4 w-4"}),"Back to Summary"]})}),g.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Kt,{className:"h-6 w-6 text-blue-600"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Matched Stable Values"})]}),e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-lg",children:e.jsxs("p",{className:"text-gray-700 leading-relaxed",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"What are Matched Stable Values?"})," These values appeared consistently across your implicit scenarios and align with your explicit value choices. The match percentage indicates how frequently each stable value appeared in your explicit responses, demonstrating the strength of alignment between your conscious choices and underlying decision patterns. Higher percentages suggest these values are deeply integrated into your decision-making framework."]})}),e.jsx("div",{className:"space-y-3",children:g.map((S,I)=>e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-blue-900",children:S.name}),e.jsxs("span",{className:"text-blue-700",children:["Match: ",S.matchPercentage.toFixed(1),"%"]})]}),e.jsx("div",{className:"mt-2 bg-blue-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${S.matchPercentage}%`}})})]},I))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Go,{className:"h-6 w-6 text-blue-600"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Explicit Values"})]}),e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-4 rounded-r-lg",children:e.jsxs("p",{className:"text-sm text-gray-700 leading-relaxed",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Understanding Explicit Values:"})," These are the values you consciously selected when presented with straightforward ethical scenarios. Your direct choices provide insight into your stated value preferences and help us understand what you believe guides your decisions. Each scenario below shows the specific value you prioritized."]})}),e.jsx("div",{className:"space-y-4",children:i.map((S,I)=>e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Scenario: ",R(S.question_id)]}),e.jsxs("p",{className:"text-sm font-medium text-blue-800",children:["Your Choice: ",N(S.question_id,S.value_selected)]})]},I))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Kt,{className:"h-6 w-6 text-green-600"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Implicit Values"})]}),e.jsx("div",{className:"bg-green-50 border-l-4 border-green-400 p-4 mb-4 rounded-r-lg",children:e.jsxs("p",{className:"text-sm text-gray-700 leading-relaxed",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Understanding Implicit Values:"})," These values emerged from analyzing your preference patterns in complex scenarios where you ranked multiple options. Unlike explicit choices, these reflect the underlying values that guide your decision-making when faced with nuanced trade-offs. Stable values appeared consistently, while context-dependent values varied based on situational factors."]})}),s.stable.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Stable Values"}),e.jsx("div",{className:"space-y-3",children:s.stable.map((S,I)=>e.jsx("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:S.scenarioId}),e.jsx("span",{className:"font-medium text-green-700",children:S.value.name})]})},I))})]}),s.contextDependent.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Context-Dependent Values"}),e.jsx("div",{className:"space-y-3",children:s.contextDependent.map((S,I)=>e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[e.jsx("div",{className:"mb-2 text-sm text-gray-600",children:S.scenarioId}),e.jsx("div",{className:"flex items-center gap-3",children:S.values.map((D,L)=>e.jsx("span",{className:"px-3 py-1 bg-yellow-100 rounded-full text-yellow-800 text-sm",children:D.name},L))})]},I))})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(tr,{className:"h-6 w-6 text-teal-600"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Value Alignment Analysis"})]}),e.jsx("div",{className:"bg-teal-50 border-l-4 border-teal-400 p-4 mb-6 rounded-r-lg",children:e.jsxs("p",{className:"text-gray-700 leading-relaxed",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"How Value Alignment Works:"})," This section compares your explicit value choices with your implicit values to measure consistency. The frequency analysis shows which values you chose most often in explicit scenarios, while the alignment metrics reveal how well your stated preferences match your underlying decision patterns. Strong alignment suggests coherent value integration across different decision contexts."]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Most Common Explicit Values"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"These bars show how frequently each value appeared in your explicit choices. Higher percentages indicate values you consistently prioritized across different scenarios."}),l.map((S,I)=>e.jsxs("div",{className:"bg-teal-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-teal-900",children:S.value}),e.jsxs("span",{className:"text-teal-700",children:[S.percentage.toFixed(1),"% (",S.count," times)"]})]}),e.jsx("div",{className:"mt-2 bg-teal-200 rounded-full h-2",children:e.jsx("div",{className:"bg-teal-600 h-2 rounded-full",style:{width:`${S.percentage}%`}})})]},I))]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Most Common Implicit Values"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"These bars show how frequently each value appeared in your implicit preferences. Higher percentages indicate values that consistently emerged from your decision patterns."}),x.map((S,I)=>e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-green-900",children:S.value}),e.jsxs("span",{className:"text-green-700",children:[S.percentage.toFixed(1),"% (",S.count," times)"]})]}),e.jsx("div",{className:"mt-2 bg-green-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${S.percentage}%`}})})]},I))]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Value Alignment"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"These metrics measure how well your explicit choices align with your implicit values. Higher alignment percentages indicate greater consistency between what you consciously choose and what your decision patterns reveal."}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-green-900",children:"Match with Stable Values"}),e.jsxs("span",{className:"text-green-700",children:[u.stable.toFixed(1),"%"]})]}),e.jsx("div",{className:"bg-green-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${u.stable}%`}})})]}),e.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-yellow-900",children:"Match with Context-Dependent Values"}),e.jsxs("span",{className:"text-yellow-700",children:[u.contextDependent.toFixed(1),"%"]})]}),e.jsx("div",{className:"bg-yellow-200 rounded-full h-2",children:e.jsx("div",{className:"bg-yellow-600 h-2 rounded-full",style:{width:`${u.contextDependent}%`}})})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mt-4",children:e.jsx("p",{className:"text-sm text-gray-600",children:u.stable>u.contextDependent?"Your explicit choices align more strongly with your stable deep values, suggesting consistent ethical decision-making patterns.":"Your explicit choices show more alignment with context-dependent values, indicating flexibility in your decision-making approach."})})]})]})]})]}):e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-green-50 rounded-2xl shadow-lg p-8 mb-8 border border-blue-100",children:[e.jsx("div",{className:"flex items-center justify-center mb-6",children:e.jsx("div",{className:"bg-white rounded-full p-4 shadow-md",children:e.jsx(Kt,{className:"h-12 w-12 text-blue-600"})})}),e.jsx("h2",{className:"text-3xl font-bold text-center text-gray-900 mb-4",children:"Your Value Analysis is Complete"}),e.jsxs("p",{className:"text-center text-gray-700 text-lg mb-8 max-w-2xl mx-auto",children:["Thank you for completing both assessments. Based on your responses to explicit and implicit value questions, we've identified ",g.length===1?"your":"your top"," matched stable ",g.length===1?"value":"values",":"]}),e.jsx("div",{className:"space-y-4 mb-8",children:g.slice(0,2).map((S,I)=>e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-blue-500 transform transition-all duration-300 hover:shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:S.name}),e.jsxs("span",{className:"bg-blue-100 text-blue-800 text-sm font-semibold px-4 py-2 rounded-full",children:[S.matchPercentage.toFixed(1),"% Match"]})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:"This value consistently appeared across your responses, indicating it's a core part of your decision-making."})]},I))}),g.length===0&&e.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8",children:e.jsx("p",{className:"text-center text-gray-700",children:"We're still analyzing your responses. Your value patterns will be used in the upcoming simulation."})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8 text-center border border-gray-200",children:[e.jsxs("div",{className:"max-w-2xl mx-auto mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Want to understand how we identified these values?"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"We used a comprehensive analysis comparing your explicit choices with patterns from implicit scenarios. If you're curious about the methodology and detailed breakdown, you can explore the full analysis below."}),e.jsx("p",{className:"text-sm text-gray-500 mt-3 italic",children:"Exploring the detailed analysis is completely optional"})]}),e.jsxs("button",{onClick:()=>y(!0),className:"bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition-all duration-300 font-semibold shadow-md hover:shadow-lg transform hover:-translate-y-0.5 flex items-center gap-2 mx-auto",children:[e.jsx(tr,{className:"h-5 w-5"}),"Explore Why"]})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("button",{onClick:()=>t("/preferences"),className:"bg-gray-600 text-white px-6 py-2 rounded-md hover:bg-gray-700 transition-colors duration-300 flex items-center gap-2",children:[e.jsx($t,{className:"h-5 w-5"}),"Back to Preferences"]}),e.jsxs("button",{onClick:C,className:"bg-green-600 text-white px-6 py-2 rounded-md hover:bg-green-700 transition-colors duration-300 flex items-center gap-2",children:["Start Simulation",e.jsx(ut,{className:"h-5 w-5"})]})]})]})]})},ol=()=>{const t=it(),[r,a]=h.useState(!1),[s,n]=h.useState(!1),i=h.useRef(null),o=()=>{if(i.current){const u="VbISk2VL0G8";i.current.src=`https://www.youtube.com/embed/${u}?autoplay=1&enablejsapi=1&rel=0`,n(!0)}},l=()=>{t("/simulation")},d=()=>{a(!0)};return h.useEffect(()=>{const u=m=>{if(m.origin==="https://www.youtube.com")try{const c=typeof m.data=="string"?JSON.parse(m.data):m.data;c.event==="onStateChange"&&(c.info===1?n(!0):c.info===0&&a(!0))}catch(c){console.log("YouTube message parsing error:",c)}};return window.addEventListener("message",u),()=>{window.removeEventListener("message",u)}},[]),e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Xo,{className:"h-8 w-8 text-blue-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Simulation Tutorial"})]})})}),e.jsxs("main",{className:"max-w-5xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl shadow-lg p-8 mb-8 border border-blue-100",children:[e.jsx("div",{className:"flex items-center justify-center mb-6",children:e.jsx("div",{className:"bg-white rounded-full p-4 shadow-md",children:e.jsx(_o,{className:"h-12 w-12 text-blue-600"})})}),e.jsx("h2",{className:"text-3xl font-bold text-center text-gray-900 mb-4",children:"Before You Begin the Simulation"}),e.jsx("p",{className:"text-center text-gray-700 text-lg mb-6 max-w-2xl mx-auto",children:"Please watch this tutorial video to understand how the wildfire crisis simulation works. The video will explain the interface, decision-making process, and what to expect during the simulation."}),e.jsx("div",{className:"bg-white rounded-xl shadow-md p-4 mb-6",children:e.jsx("div",{className:"relative",style:{paddingBottom:"56.25%",height:0},children:e.jsx("iframe",{ref:i,className:"absolute top-0 left-0 w-full h-full rounded-lg",src:"https://www.youtube.com/embed/VbISk2VL0G8?enablejsapi=1&rel=0",title:"Simulation Tutorial Video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})}),e.jsx("div",{className:"flex flex-col gap-4 justify-center items-center",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center w-full",children:[e.jsxs("button",{onClick:o,className:"flex items-center gap-2 bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700 transition-colors duration-300 font-semibold shadow-md hover:shadow-lg",children:[e.jsx(ti,{className:"h-5 w-5"}),"Replay Video"]}),!r&&e.jsxs("button",{onClick:d,className:"flex items-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors duration-300 font-semibold shadow-md hover:shadow-lg",children:[e.jsx(St,{className:"h-5 w-5"}),"I've Watched the Video"]}),e.jsxs("button",{onClick:l,disabled:!r,className:`flex items-center gap-2 px-8 py-3 rounded-lg font-semibold shadow-md transition-all duration-300 ${r?"bg-green-600 text-white hover:bg-green-700 hover:shadow-lg transform hover:-translate-y-0.5":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:["Proceed to Simulation",e.jsx(ut,{className:"h-5 w-5"})]})]})}),!r&&e.jsx("div",{className:"mt-6 bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-r-lg",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Note:"}),` After watching the video, click "I've Watched the Video" to enable the proceed button. You can pause and resume the video at any time using the YouTube controls.`]})}),r&&e.jsx("div",{className:"mt-6 bg-green-50 border-l-4 border-green-400 p-4 rounded-r-lg",children:e.jsxs("p",{className:"text-sm text-green-800",children:[e.jsx("strong",{children:"Ready!"})," You can now proceed to the simulation. If you'd like to review anything, feel free to replay the video before continuing."]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"What You'll Learn in This Tutorial"}),e.jsxs("ul",{className:"space-y-2 text-gray-700",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:"‚Ä¢"}),e.jsx("span",{children:"How to evaluate different decision options in the simulation"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:"‚Ä¢"}),e.jsx("span",{children:"Understanding the metrics and their impact on your decisions"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:"‚Ä¢"}),e.jsx("span",{children:"How to explore alternative options and make informed choices"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:"‚Ä¢"}),e.jsx("span",{children:"What to expect as you progress through the wildfire crisis scenarios"})]})]})]})]})]})},ll=({metrics:t,animatingMetrics:r})=>{const a=(i,o=!1)=>i<30?"text-red-600 font-bold":i<50?"text-orange-500 font-bold":i<70?"text-yellow-500":"text-green-500",s=i=>r.includes(i)?i==="livesSaved"?"animate-pulse text-green-600":i==="humanCasualties"?"animate-pulse text-red-600":"animate-pulse text-red-500":"",n=(i,o)=>{switch(i){case"livesSaved":return`${o} people saved from immediate danger`;case"humanCasualties":return`${o} lives lost in the crisis`;case"firefightingResource":return`${o}% of firefighting resources remaining`;case"infrastructureCondition":return`${o}% of infrastructure intact`;case"biodiversityCondition":return`${o}% of local ecosystem preserved`;case"propertiesCondition":return`${o}% of properties protected`;case"nuclearPowerStation":return`${o}% of nuclear facility integrity maintained`;default:return""}};return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-3 mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-700 flex items-center",children:[e.jsx(Ut,{className:"mr-1 text-orange-500",size:18}),"Cumulative Simulation Metrics (Scores)"]}),(t.nuclearPowerStation<50||t.firefightingResource<30)&&e.jsxs("div",{className:"px-2 py-1 bg-red-50 border border-red-200 rounded-md flex items-center",children:[e.jsx(Ue,{className:"text-red-500 mr-1",size:16}),e.jsx("p",{className:"text-red-700 text-sm font-medium",children:t.nuclearPowerStation<50?"Nuclear risk!":"Critical resource shortage!"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-7 gap-2",children:[e.jsxs("div",{className:`bg-gray-50 p-2 rounded ${s("livesSaved")} group relative cursor-help transition-all duration-200 hover:bg-gray-100`,title:n("livesSaved",t.livesSaved),children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(Ht,{className:"mr-1 text-blue-500",size:14}),e.jsx("h3",{className:"text-xs font-medium text-gray-700",children:"Lives Saved"})]}),e.jsx("p",{className:"text-sm font-bold text-green-600",children:t.livesSaved}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-75 text-white p-2 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 text-xs pointer-events-none",children:n("livesSaved",t.livesSaved)})]}),e.jsxs("div",{className:`bg-gray-50 p-2 rounded ${s("humanCasualties")} group relative cursor-help transition-all duration-200 hover:bg-gray-100`,title:n("humanCasualties",t.humanCasualties),children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(Sr,{className:"mr-1 text-red-500",size:14}),e.jsx("h3",{className:"text-xs font-medium text-gray-700",children:"Casualties"}),t.humanCasualties>0&&e.jsx(Ue,{className:"ml-1 text-red-500",size:12})]}),e.jsx("p",{className:"text-sm font-bold text-red-600",children:t.humanCasualties}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-75 text-white p-2 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 text-xs pointer-events-none",children:n("humanCasualties",t.humanCasualties)})]}),e.jsxs("div",{className:`bg-gray-50 p-2 rounded ${s("firefightingResource")} group relative cursor-help transition-all duration-200 hover:bg-gray-100`,title:n("firefightingResource",t.firefightingResource),children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(Pt,{className:"mr-1 text-blue-500",size:14}),e.jsx("h3",{className:"text-xs font-medium text-gray-700",children:"Resources"}),t.firefightingResource<50&&e.jsx(Ue,{className:"ml-1 text-orange-500",size:12})]}),e.jsxs("p",{className:`text-sm font-bold ${a(t.firefightingResource)}`,children:[t.firefightingResource,"%"]}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-75 text-white p-2 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 text-xs pointer-events-none",children:n("firefightingResource",t.firefightingResource)})]}),e.jsxs("div",{className:`bg-gray-50 p-2 rounded ${s("infrastructureCondition")} group relative cursor-help transition-all duration-200 hover:bg-gray-100`,title:n("infrastructureCondition",t.infrastructureCondition),children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(bt,{className:"mr-1 text-gray-500",size:14}),e.jsx("h3",{className:"text-xs font-medium text-gray-700",children:"Infrastructure"}),t.infrastructureCondition<50&&e.jsx(Ue,{className:"ml-1 text-orange-500",size:12})]}),e.jsxs("p",{className:`text-sm font-bold ${a(t.infrastructureCondition)}`,children:[t.infrastructureCondition,"%"]}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-75 text-white p-2 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 text-xs pointer-events-none",children:n("infrastructureCondition",t.infrastructureCondition)})]}),e.jsxs("div",{className:`bg-gray-50 p-2 rounded ${s("biodiversityCondition")} group relative cursor-help transition-all duration-200 hover:bg-gray-100`,title:n("biodiversityCondition",t.biodiversityCondition),children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(or,{className:"mr-1 text-green-500",size:14}),e.jsx("h3",{className:"text-xs font-medium text-gray-700",children:"Biodiversity"}),t.biodiversityCondition<50&&e.jsx(Ue,{className:"ml-1 text-orange-500",size:12})]}),e.jsxs("p",{className:`text-sm font-bold ${a(t.biodiversityCondition)}`,children:[t.biodiversityCondition,"%"]}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-75 text-white p-2 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 text-xs pointer-events-none",children:n("biodiversityCondition",t.biodiversityCondition)})]}),e.jsxs("div",{className:`bg-gray-50 p-2 rounded ${s("propertiesCondition")} group relative cursor-help transition-all duration-200 hover:bg-gray-100`,title:n("propertiesCondition",t.propertiesCondition),children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(bt,{className:"mr-1 text-blue-500",size:14}),e.jsx("h3",{className:"text-xs font-medium text-gray-700",children:"Properties"}),t.propertiesCondition<50&&e.jsx(Ue,{className:"ml-1 text-orange-500",size:12})]}),e.jsxs("p",{className:`text-sm font-bold ${a(t.propertiesCondition)}`,children:[t.propertiesCondition,"%"]}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-75 text-white p-2 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 text-xs pointer-events-none",children:n("propertiesCondition",t.propertiesCondition)})]}),e.jsxs("div",{className:`bg-gray-50 p-2 rounded ${s("nuclearPowerStation")} group relative cursor-help transition-all duration-200 hover:bg-gray-100`,title:n("nuclearPowerStation",t.nuclearPowerStation),children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(Nr,{className:"mr-1 text-purple-500",size:14}),e.jsx("h3",{className:"text-xs font-medium text-gray-700",children:"Nuclear"}),t.nuclearPowerStation<50&&e.jsx(Ue,{className:"ml-1 text-red-500",size:12})]}),e.jsxs("p",{className:`text-sm font-bold ${a(t.nuclearPowerStation,!0)}`,children:[t.nuclearPowerStation,"%"]}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-75 text-white p-2 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 text-xs pointer-events-none",children:n("nuclearPowerStation",t.nuclearPowerStation)})]})]})]})},cl=({option:t,onSelect:r,onReview:a,currentMetrics:s,scenarioIndex:n,hasExploredAlternatives:i=!0,onInfeasibleCheck:o,isInfeasibleChecked:l=!1})=>{const[d,u]=Ce.useState(!1),[m,c]=Ce.useState(!1),[p,g]=Ce.useState(l),f=()=>{a(t)},b=v=>{const S=v.target.checked;g(S),o&&o(t,S)};Ce.useEffect(()=>{g(l)},[l]);const y=(v,S=!1,I=!1)=>S?`+${v}`:I?`+${v}`:`${v}%`,x=()=>Object.values(t.expertOpinions).map(I=>I.recommendation).filter(I=>I==="Accept").length,w=()=>{if(n!==2||!s)return{isFeasible:!0,insufficientResources:[]};const v=[];return s.firefightingResource+t.impact.firefightingResource<0&&v.push({metric:"Resources",needed:Math.abs(t.impact.firefightingResource),available:s.firefightingResource}),s.infrastructureCondition+t.impact.infrastructureCondition<0&&v.push({metric:"Infrastructure",needed:Math.abs(t.impact.infrastructureCondition),available:s.infrastructureCondition}),s.biodiversityCondition+t.impact.biodiversityCondition<0&&v.push({metric:"Biodiversity",needed:Math.abs(t.impact.biodiversityCondition),available:s.biodiversityCondition}),s.propertiesCondition+t.impact.propertiesCondition<0&&v.push({metric:"Properties",needed:Math.abs(t.impact.propertiesCondition),available:s.propertiesCondition}),{isFeasible:v.length===0,insufficientResources:v}},{isFeasible:C,insufficientResources:R}=w();return{safety:{name:"Safety",icon:e.jsx(rr,{size:12,className:"mr-1"})},efficiency:{name:"Efficiency",icon:e.jsx(Pt,{size:12,className:"mr-1"})},sustainability:{name:"Sustainability",icon:e.jsx(ms,{size:12,className:"mr-1"})},fairness:{name:"Fairness",icon:e.jsx(It,{size:12,className:"mr-1"})},nonmaleficence:{name:"Nonmaleficence",icon:e.jsx(us,{size:12,className:"mr-1"})}}[t.label],e.jsxs("div",{className:"relative",onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),children:[e.jsxs("div",{className:`bg-white border ${C?"border-gray-300":"border-red-300 bg-red-50/50 opacity-75"} text-left p-3 rounded-lg transition-all duration-200 flex flex-col w-full`,children:[!C&&e.jsx("div",{className:"absolute top-2 left-2 z-10 flex items-center gap-1",children:e.jsx(Ue,{size:16,className:"text-red-600"})}),!C&&n===2&&o&&e.jsx("div",{className:"absolute top-2 right-2 z-10",children:e.jsxs("label",{className:"flex items-center gap-2 bg-gradient-to-r from-blue-500 to-cyan-500 text-white px-3 py-2 rounded-lg shadow-lg cursor-pointer hover:from-blue-600 hover:to-cyan-600 transition-all duration-200 border-2 border-white",children:[e.jsx("input",{type:"checkbox",checked:p,onChange:b,className:"w-5 h-5 rounded border-2 border-white cursor-pointer accent-yellow-400"}),e.jsx("span",{className:"text-sm font-semibold whitespace-nowrap",children:"Would choose if feasible"})]})}),e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:`text-lg font-bold ${C?"bg-gradient-to-r from-teal-600 to-cyan-600 bg-clip-text text-transparent":"text-red-800"} mb-1 ${C?"":"ml-6"} tracking-tight`,children:t.title}),e.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:t.description})]}),e.jsx("div",{className:"flex flex-col items-end gap-1 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 px-2 py-0.5 rounded-full",children:[e.jsx(er,{size:12,className:"text-green-600"}),e.jsxs("span",{className:"text-xs text-gray-700 whitespace-nowrap font-medium",children:[x(),"/5 recommend"]})]})})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-md p-2 mb-2",children:[e.jsx("h5",{className:"text-xs font-semibold text-gray-700 uppercase tracking-wide mb-1.5",children:"Key Considerations"}),t.riskInfo.map((v,S)=>e.jsxs("div",{className:"flex items-start mb-1 last:mb-0",children:[e.jsx("span",{className:"text-red-500 mr-2 mt-0.5 font-bold",children:"‚Ä¢"}),e.jsx("p",{className:"text-xs text-gray-700 leading-relaxed",children:v})]},S))]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-2 mb-2",children:[e.jsx("h5",{className:"text-xs font-semibold text-gray-700 uppercase tracking-wide mb-1.5",children:"Metrics Impact"}),e.jsxs("div",{className:"grid grid-cols-2 gap-1.5 text-xs",children:[e.jsxs("div",{className:"flex items-center text-green-600 font-medium",children:[e.jsx(Ht,{size:14,className:"mr-1.5"}),e.jsxs("span",{className:"text-xs",children:["Lives Saved: ",y(t.impact.livesSaved,!0)]})]}),e.jsxs("div",{className:"flex items-center text-red-600 font-medium",children:[e.jsx(Sr,{size:14,className:"mr-1.5"}),e.jsxs("span",{className:"text-xs",children:["Casualties: ",y(t.impact.humanCasualties,!1,!0)]})]}),e.jsxs("div",{className:"flex items-center text-blue-600 font-medium",children:[e.jsx(Pt,{size:14,className:"mr-1.5"}),e.jsxs("span",{className:"text-xs",children:["Resources: ",y(t.impact.firefightingResource)]})]}),e.jsxs("div",{className:"flex items-center text-gray-600 font-medium",children:[e.jsx(bt,{size:14,className:"mr-1.5"}),e.jsxs("span",{className:"text-xs",children:["Infrastructure: ",y(t.impact.infrastructureCondition)]})]}),e.jsxs("div",{className:"flex items-center text-green-600 font-medium",children:[e.jsx(or,{size:14,className:"mr-1.5"}),e.jsxs("span",{className:"text-xs",children:["Biodiversity: ",y(t.impact.biodiversityCondition)]})]}),e.jsxs("div",{className:"flex items-center text-blue-600 font-medium",children:[e.jsx(bt,{size:14,className:"mr-1.5"}),e.jsxs("span",{className:"text-xs",children:["Properties: ",y(t.impact.propertiesCondition)]})]}),e.jsxs("div",{className:"flex items-center text-purple-600 font-medium",children:[e.jsx(Nr,{size:14,className:"mr-1.5"}),e.jsxs("span",{className:"text-xs",children:["Nuclear: ",y(t.impact.nuclearPowerStation)]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:f,className:"flex-1 py-2 px-4 rounded-md font-semibold text-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 shadow-md hover:shadow-lg flex items-center justify-center gap-1",children:[e.jsx(at,{size:16}),"Review"]}),e.jsxs("div",{className:"relative flex-1",onMouseEnter:()=>!i&&c(!0),onMouseLeave:()=>c(!1),children:[e.jsx("button",{onClick:()=>!C||!i?null:r(t),disabled:!C||!i,className:`w-full py-2 px-4 rounded-md font-semibold text-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 ${C?i?"bg-teal-600 text-white hover:bg-teal-700 focus:ring-teal-500 shadow-md hover:shadow-lg":"bg-gray-300 text-gray-600 cursor-not-allowed border border-gray-400":"bg-red-100 text-red-700 cursor-not-allowed border border-red-300"}`,children:C?"Select":"Not Feasible"}),!i&&m&&e.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 z-30 w-72 pointer-events-none",children:e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 border-2 border-amber-400 text-gray-800 px-4 py-3 rounded-lg shadow-2xl",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ue,{size:18,className:"text-amber-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-sm text-amber-900 mb-1",children:"Explore Alternatives First"}),e.jsxs("p",{className:"text-xs leading-relaxed text-gray-700",children:["Please explore alternative options before making your selection. Find the ",e.jsx("span",{className:"font-semibold text-amber-800",children:'"Explore Alternatives"'})," button at the bottom of this page."]})]})]}),e.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 rotate-45 w-3 h-3 bg-gradient-to-br from-amber-50 to-orange-50 border-r-2 border-b-2 border-amber-400"})]})})]})]})]}),!C&&d&&R.length>0&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 z-20 bg-red-600 text-white text-xs px-3 py-2 rounded-md shadow-lg transition-opacity duration-200",children:[e.jsx("div",{className:"font-semibold mb-1",children:"Not Feasible:"}),R.map((v,S)=>e.jsxs("div",{children:["Not enough ",v.metric," (needs ",v.needed,"%, you have ",v.available,"%)"]},S))]})]})},dl=({isOpen:t,onClose:r,option:a,onKeepChoice:s,onReviewAlternatives:n,isAligned:i,hasExploredAlternatives:o})=>(Ce.useEffect(()=>{t&&o&&setTimeout(()=>{s()},100)},[t,o,s]),t?e.jsx("div",{className:"fixed inset-0",style:{position:"absolute",top:"-9999px",left:"-9999px",width:"1px",height:"1px",overflow:"hidden",opacity:0,pointerEvents:"none",zIndex:-1},children:e.jsxs("div",{className:"bg-white text-[6px] rounded-sm shadow-sm max-w-[60px] w-full p-[1px]",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 p-[1px]",children:[e.jsx("h3",{className:"font-semibold text-gray-800 truncate",children:a.title}),e.jsx("button",{onClick:r,className:"text-gray-400 p-[1px]",children:e.jsx(mt,{size:8})})]}),e.jsx("div",{className:"p-[1px]",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:s,disabled:!o,className:`px-[2px] py-[1px] rounded-sm text-[5px] transition-all duration-200 font-medium ${o?"bg-gradient-to-r from-blue-400 to-indigo-400 text-white":"bg-gray-200 text-gray-400 cursor-not-allowed opacity-60"}`,children:"Keep"})})})]})}):null),ul=({isOpen:t,onClose:r,option:a,onConfirmDecision:s,canConfirm:n,onReviewAlternatives:i})=>{const[o,l]=h.useState(!1),[d,u]=h.useState(!0),[m,c]=h.useState(!1),p=h.useRef(null);if(h.useEffect(()=>{if(t&&p.current){const v=p.current,S=v.scrollHeight>v.clientHeight;c(S);const I=()=>{v.scrollHeight-v.scrollTop-v.clientHeight<50&&c(!1)};return v.addEventListener("scroll",I),()=>v.removeEventListener("scroll",I)}},[t]),!t)return null;const g=v=>{const S=localStorage.getItem("hasReorderedValues")==="true",I=localStorage.getItem("cvrYesClicked")==="true",D=localStorage.getItem("cvrNoClicked")==="true";S||(I||D)?(l(!0),window.pendingAction="close",window.cvrYesClicked=I):r()},f=()=>{localStorage.removeItem("MoralValuesReorderList"),localStorage.removeItem("moralValuesRanking"),localStorage.setItem("hasReorderedValues","false"),localStorage.setItem("cvrYesClicked","false"),localStorage.setItem("cvrNoClicked","false"),l(!1),window.pendingAction==="close"?r():(r(),i()),delete window.pendingAction,delete window.cvrYesClicked},b=()=>{l(!1),delete window.pendingAction,delete window.cvrYesClicked},y=(v,S=!1,I=!1)=>S?`+${v}`:I?`+${v}`:`${v}%`,x=()=>{const v=Object.values(a.expertOpinions),S=v.filter(D=>D.recommendation==="Accept").length,I=v.filter(D=>D.recommendation==="Reject").length;return{accepts:S,rejects:I,total:v.length}},{accepts:w,rejects:C,total:R}=x(),N=window.cvrYesClicked===!0;return e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Decision Summary"}),e.jsx("button",{onClick:()=>g(),className:"text-gray-500 hover:text-gray-700",children:e.jsx(mt,{size:24})})]}),e.jsxs("div",{ref:p,className:"p-6 flex-1 overflow-auto relative",children:[e.jsx("div",{className:"mb-6 bg-gradient-to-r from-yellow-50 to-amber-50 border-2 border-yellow-400 rounded-xl shadow-md p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:e.jsx(zt,{className:"text-yellow-600",size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-bold text-yellow-900 text-base mb-2",children:"Why You're Seeing This Page"}),e.jsxs("p",{className:"text-yellow-800 text-sm leading-relaxed mb-3",children:["This is your ",e.jsx("strong",{children:"final review"})," before committing to this decision. You're seeing a summary of what you've chosen and how it will affect your mission."]}),e.jsxs("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 p-3 rounded-r-lg",children:[e.jsx("p",{className:"text-yellow-900 text-sm font-semibold mb-1",children:'Important: What Happens When You Click "Confirm Decision"'}),e.jsxs("ul",{className:"text-yellow-800 text-sm space-y-1 ml-4 list-disc",children:[e.jsxs("li",{children:["This option's impacts will be ",e.jsx("strong",{children:"permanently applied"})," to your cumulative simulation scores"]}),e.jsxs("li",{children:["All metrics (lives saved, resources, infrastructure, etc.) will be ",e.jsx("strong",{children:"updated immediately"})]}),e.jsxs("li",{children:["These changes will ",e.jsx("strong",{children:"carry forward"})," to the next scenario, affecting your future options"]}),e.jsxs("li",{children:["You ",e.jsx("strong",{children:"cannot undo"})," this decision once confirmed"]})]})]}),e.jsx("p",{className:"text-yellow-800 text-xs mt-2 italic",children:"Take your time to review the expert consensus and impact summary below before confirming."})]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-800 mb-2",children:a.title}),e.jsx("p",{className:"text-gray-600 text-sm",children:a.description})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h5",{className:"font-medium text-gray-700 mb-3",children:"Expert Consensus"}),e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(er,{className:"text-green-500",size:20}),e.jsxs("span",{className:"font-medium text-green-700",children:[w," Recommend"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gs,{className:"text-red-500",size:20}),e.jsxs("span",{className:"font-medium text-red-700",children:[C," Do Not Recommend"]})]}),e.jsxs("div",{className:"ml-auto text-sm text-gray-600",children:[w,"/",R," experts support this decision"]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>u(!d),className:"w-full flex items-center justify-between p-3 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors mb-3 group",children:[e.jsx("h5",{className:"font-medium text-gray-700",children:"Impact Summary"}),e.jsx("div",{className:"text-gray-600",children:d?e.jsx(Zn,{size:20}):e.jsx(At,{size:20})})]}),d&&e.jsxs("div",{className:"space-y-2 animate-in fade-in duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded border-l-4 border-green-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ht,{size:16,className:"text-green-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Lives Saved"})]}),e.jsx("span",{className:"font-bold text-green-600",children:y(a.impact.livesSaved,!0)})]}),a.impact.humanCasualties>0&&e.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded border-l-4 border-red-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Sr,{size:16,className:"text-red-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Casualties"})]}),e.jsx("span",{className:"font-bold text-red-600",children:y(a.impact.humanCasualties,!1,!0)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Pt,{size:14,className:"text-blue-600"}),e.jsx("span",{className:"text-xs font-medium",children:"Resources"})]}),e.jsx("span",{className:"text-sm font-bold text-blue-600",children:y(a.impact.firefightingResource)})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(bt,{size:14,className:"text-gray-600"}),e.jsx("span",{className:"text-xs font-medium",children:"Infrastructure"})]}),e.jsx("span",{className:"text-sm font-bold text-gray-600",children:y(a.impact.infrastructureCondition)})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-green-50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(or,{size:14,className:"text-green-600"}),e.jsx("span",{className:"text-xs font-medium",children:"Biodiversity"})]}),e.jsx("span",{className:"text-sm font-bold text-green-600",children:y(a.impact.biodiversityCondition)})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-purple-50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Nr,{size:14,className:"text-purple-600"}),e.jsx("span",{className:"text-xs font-medium",children:"Nuclear"})]}),e.jsx("span",{className:"text-sm font-bold text-purple-600",children:y(a.impact.nuclearPowerStation)})]})]})]})]}),!n&&e.jsx("div",{className:"mb-4 p-4 bg-gradient-to-r from-orange-50 to-red-50 border-2 border-orange-200 rounded-lg relative",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-orange-400 to-red-400 rounded-full flex items-center justify-center animate-pulse",children:e.jsx("span",{className:"text-white text-sm font-bold",children:"!"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-orange-800 mb-1",children:"Action Required"}),e.jsx("p",{className:"text-xs text-orange-700",children:"Please review alternatives before confirming your decision."})]})]})}),m&&e.jsx("div",{className:"sticky bottom-0 left-0 right-0 flex justify-center pb-4",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 text-white text-xs px-4 py-2 rounded-full shadow-lg animate-bounce",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(At,{size:16}),e.jsx("span",{children:"Scroll down to see more"}),e.jsx(At,{size:16})]})})})]}),e.jsx("div",{className:"border-t p-6 bg-gray-50",children:e.jsxs("div",{className:"flex flex-col gap-3 max-w-md mx-auto",children:[e.jsxs("button",{onClick:()=>g(),className:"w-full flex items-center justify-center gap-3 px-8 py-4 rounded-xl transition-all duration-300 bg-gradient-to-r from-gray-600 to-gray-700 text-white hover:from-gray-700 hover:to-gray-800 shadow-lg hover:shadow-xl transform hover:scale-105 font-semibold text-base group",children:[e.jsx(ps,{size:20,className:"group-hover:rotate-180 transition-transform duration-500"}),"Change My Mind"]}),e.jsxs("button",{onClick:s,disabled:!n,className:`w-full flex items-center justify-center gap-3 px-8 py-4 rounded-xl transition-all duration-300 font-semibold text-base shadow-lg ${n?"bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:from-green-600 hover:to-emerald-700 hover:shadow-xl transform hover:scale-105":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,title:n?"":"Review alternatives to enable confirmation",children:[e.jsx(Kn,{size:20}),"Confirm Decision"]}),!n&&e.jsx("p",{className:"text-xs text-center text-orange-600 italic",children:"You must view all alternatives before confirming"})]})})]}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-2xl max-w-md w-full",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(Ue,{className:"text-orange-500",size:32})})}),N?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 text-center mb-3",children:"Your Value Reflection Will Be Cleared"}),e.jsx("p",{className:"text-gray-600 text-center mb-6",children:"You confirmed your decision in the value reflection scenario. If you go back now, your response to that reflection question will be cleared, and the value prioritization you established will be reset."}),e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 rounded-r-lg mb-6",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Tip:"})," Consider confirming your current decision to preserve your value reflection response, or continue if you'd like to reconsider your choice from the beginning."]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 text-center mb-3",children:"Your Preference Changes Will Be Lost"}),e.jsx("p",{className:"text-gray-600 text-center mb-6",children:"You recently reordered your values to help guide this decision. If you go back now, these personalized rankings will be cleared and you'll need to set them up again if you want to use them."}),e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 rounded-r-lg mb-6",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Tip:"})," Consider confirming your current decision to preserve your preference settings, or continue if you'd like to explore other options from scratch."]})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:b,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:"Stay Here"}),e.jsx("button",{onClick:f,className:"flex-1 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors font-medium",children:"Continue Anyway"})]})]})})})]})};na.register(is,os,ls,cs,ia,oa,Wn,la,ca,qn);const Oa={"Fire Containment":"fireContainment","Population Safety":"populationSafety","Ethical Fairness":"ethicalFairness","Firefighter Risk":"firefighterRisk","Resource Use":"resourceUse","Infrastructure Damage":"infrastructureDamage","Biodiversity Impact":"biodiversityImpact"},ml=({showRadarChart:t,onClose:r,currentScenario:a,toggledOptions:s,toggleOption:n,prepareRadarChartData:i,radarOptions:o})=>{var L,E,$,se;const[l,d]=h.useState("Fire Containment"),[u,m]=h.useState("radar"),[c,p]=h.useState(()=>localStorage.getItem("hasClickedBar")==="true"),[g,f]=h.useState(()=>localStorage.getItem("hasClickedDifferences")==="true");if(!t)return null;const b=[...a.options];Object.values(s).filter(Boolean).length;const y={fireContainment:100,populationSafety:100,ethicalFairness:100,firefighterRisk:0,resourceUse:0,infrastructureDamage:0,biodiversityImpact:0},x=["Fire Containment","Population Safety","Ethical Fairness","Firefighter Risk","Resource Use","Infrastructure Damage","Biodiversity Impact"],w=k=>["Fire Containment","Population Safety","Ethical Fairness"].includes(k),C={standard:["rgba(239, 68, 68, 0.7)","rgba(59, 130, 246, 0.7)","rgba(16, 185, 129, 0.7)","rgba(245, 158, 11, 0.7)","rgba(139, 92, 246, 0.7)"],border:["rgb(239, 68, 68)","rgb(59, 130, 246)","rgb(16, 185, 129)","rgb(245, 158, 11)","rgb(139, 92, 246)"]},R=()=>{const k=b.filter(M=>s[M.id]).map((M,A)=>({label:M.title,data:x.map(O=>{var V;return((V=M.radarData)==null?void 0:V[Oa[O]])||0}),backgroundColor:C.standard[A%C.standard.length],borderColor:C.border[A%C.border.length],borderWidth:2}));return{labels:x,datasets:k}},N=()=>{const k=b.filter(A=>s[A.id]),M=Oa[l];return{labels:k.map(A=>A.title),datasets:[{label:l,data:k.map(A=>{var O;return((O=A.radarData)==null?void 0:O[M])||0}),backgroundColor:k.map((A,O)=>C.standard[O%C.standard.length]),borderColor:k.map((A,O)=>C.border[O%C.border.length]),borderWidth:2},{label:"Ideal",data:Array(k.length).fill(y[M]),type:"line",borderColor:"rgba(138, 43, 226, 1)",borderWidth:2,borderDash:[5,5],fill:!1}]}},v=()=>{var O,V;const k=b.filter(B=>s[B.id]),M=Oa[l],A=[];for(let B=0;B<k.length;B++)for(let z=B+1;z<k.length;z++){const ce=((O=k[B].radarData)==null?void 0:O[M])||0,me=((V=k[z].radarData)==null?void 0:V[M])||0,Ne=Math.abs(ce-me),re=w(l)?ce>me?k[B].title:k[z].title:ce<me?k[B].title:k[z].title;A.push({option1:k[B].title,option2:k[z].title,difference:Ne,better:re})}return A.sort((B,z)=>z.difference-B.difference)},S=k=>{m(k),k==="bar"&&!c&&(p(!0),localStorage.setItem("hasClickedBar","true")),k==="differences"&&!g&&(f(!0),localStorage.setItem("hasClickedDifferences","true"))},I=k=>{d(k)},D=k=>{n(k)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[e.jsx(tr,{className:"mr-2 text-blue-600",size:20}),"Decision Trade-Off Comparison"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>S("radar"),className:`px-3 py-1.5 rounded-md text-sm transition-all duration-200 ${u==="radar"?"bg-blue-500 text-white shadow-lg scale-105":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(Qo,{size:16,className:"inline mr-1"}),"Radar"]}),e.jsxs("button",{onClick:()=>S("bar"),className:`px-3 py-1.5 rounded-md text-sm transition-all duration-200 relative ${u==="bar"?"bg-green-500 text-white shadow-lg scale-105":c?"bg-gray-100 text-gray-600 hover:bg-gray-200":"bg-gray-100 text-gray-600 hover:bg-gray-200 animate-pulse"}`,children:[e.jsx(Uo,{size:16,className:"inline mr-1"}),"Bar",!c&&u!=="bar"&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-orange-400 rounded-full animate-ping"}),e.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-orange-400 rounded-full"})]})]}),e.jsxs("button",{onClick:()=>S("differences"),className:`px-3 py-1.5 rounded-md text-sm transition-all duration-200 relative ${u==="differences"?"bg-purple-500 text-white shadow-lg scale-105":g?"bg-gray-100 text-gray-600 hover:bg-gray-200":"bg-gray-100 text-gray-600 hover:bg-gray-200 animate-pulse"}`,children:[e.jsx(Xn,{size:16,className:"inline mr-1"}),"Differences",!g&&u!=="differences"&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-orange-400 rounded-full animate-ping"}),e.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-orange-400 rounded-full"})]})]}),e.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700",children:e.jsx(mt,{size:20})})]})]}),e.jsxs("div",{className:"p-4 flex-1 overflow-auto",children:[u!=="radar"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Metrics"}),e.jsx("div",{className:"border-2 border-gray-200 rounded-lg p-3",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 border border-emerald-200 rounded-lg p-3 shadow-sm",children:[e.jsxs("h5",{className:"text-xs font-bold text-emerald-800 mb-2 flex items-center",children:[e.jsx("span",{className:"bg-emerald-200 rounded-full w-2 h-2 mr-2"}),"Positive Impact (Higher is Better)"]}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:["Fire Containment","Population Safety","Ethical Fairness"].map(k=>e.jsx("button",{onClick:()=>I(k),className:`px-2.5 py-1.5 rounded-lg text-xs font-medium transition-all duration-200 ${l===k?"bg-emerald-600 text-white shadow-lg scale-105":"bg-white text-emerald-700 hover:bg-emerald-100 border border-emerald-300"}`,children:k},k))})]}),e.jsxs("div",{className:"bg-gradient-to-br from-rose-50 to-red-50 border border-rose-200 rounded-lg p-3 shadow-sm",children:[e.jsxs("h5",{className:"text-xs font-bold text-rose-800 mb-2 flex items-center",children:[e.jsx("span",{className:"bg-rose-200 rounded-full w-2 h-2 mr-2"}),"Negative Impact (Lower is Better)"]}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:["Firefighter Risk","Resource Use","Infrastructure Damage","Biodiversity Impact"].map(k=>e.jsx("button",{onClick:()=>I(k),className:`px-2.5 py-1.5 rounded-lg text-xs font-medium transition-all duration-200 ${l===k?"bg-rose-600 text-white shadow-lg scale-105":"bg-white text-rose-700 hover:bg-rose-100 border border-rose-300"}`,children:k},k))})]})]})})]}),u==="radar"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Scenario Selected Options"}),e.jsx("div",{className:"border-2 border-gray-200 rounded-lg p-3",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:b.map(k=>e.jsxs("button",{onClick:()=>D(k.id),className:`w-full p-2 rounded-lg flex items-center justify-between transition-all duration-200 ${s[k.id]?"bg-gray-100 text-gray-800 hover:bg-gray-200":"bg-gray-50 text-gray-400 hover:bg-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:`w-3 h-3 rounded-full mr-2 ${s[k.id]?"bg-gray-500":"bg-gray-300"}`}),e.jsx("span",{className:"text-sm font-medium",children:k.title})]}),s[k.id]?e.jsx(at,{size:16,className:"text-current"}):e.jsx(Ma,{size:16,className:"text-current"})]},k.id))})})]}),e.jsx("div",{className:"h-[450px]",children:e.jsx(Po,{data:R(),options:{...o,scales:{r:{...(L=o==null?void 0:o.scales)==null?void 0:L.r,pointLabels:{...($=(E=o==null?void 0:o.scales)==null?void 0:E.r)==null?void 0:$.pointLabels,color:function(k){const M=k.label;return w(M)?"#059669":"#dc2626"},font:{size:12,weight:"bold"}}}},plugins:{...o==null?void 0:o.plugins,legend:{...(se=o==null?void 0:o.plugins)==null?void 0:se.legend}}},plugins:[{id:"radarBackground",beforeDraw:k=>{const M=k.ctx,A=k.chartArea,O=k.scales.r;if(!O||!A)return;M.save();const V=O.xCenter,B=O.yCenter,z=O.drawingArea;x.forEach((ce,me)=>{const Ne=Math.PI*2*me/x.length-Math.PI/2,re=Math.PI*2*(me+1)/x.length-Math.PI/2;M.beginPath(),M.moveTo(V,B),M.arc(V,B,z,Ne,re),M.closePath(),w(ce)?M.fillStyle="rgba(16, 185, 129, 0.08)":M.fillStyle="rgba(239, 68, 68, 0.08)",M.fill()}),M.restore()}}]})}),e.jsxs("div",{className:"mt-4 bg-gray-50 p-3 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Metrics Legend"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[e.jsx("h5",{className:"text-sm font-medium text-green-800 mb-2",children:"Positive Impact Metrics (Higher is Better)"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ut,{size:16,className:"text-red-500 mr-2"}),e.jsx("span",{className:"text-sm",children:"Fire Containment"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(rr,{size:16,className:"text-blue-500 mr-2"}),e.jsx("span",{className:"text-sm",children:"Population Safety"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(It,{size:16,className:"text-purple-500 mr-2"}),e.jsx("span",{className:"text-sm",children:"Ethical Fairness"})]})]})]}),e.jsxs("div",{className:"bg-red-50 p-3 rounded-lg",children:[e.jsx("h5",{className:"text-sm font-medium text-red-800 mb-2",children:"Negative Impact Metrics (Lower is Better)"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ue,{size:16,className:"text-orange-500 mr-2"}),e.jsx("span",{className:"text-sm",children:"Firefighter Risk"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Pt,{size:16,className:"text-blue-500 mr-2"}),e.jsx("span",{className:"text-sm",children:"Resource Use"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(bt,{size:16,className:"text-gray-500 mr-2"}),e.jsx("span",{className:"text-sm",children:"Infrastructure Damage"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(or,{size:16,className:"text-green-500 mr-2"}),e.jsx("span",{className:"text-sm",children:"Biodiversity Impact"})]})]})]})]})]})]}),u==="bar"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Scenario Selected Options"}),e.jsx("div",{className:"border-2 border-gray-200 rounded-lg p-3",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:b.map(k=>e.jsxs("button",{onClick:()=>D(k.id),className:`w-full p-2 rounded-lg flex items-center justify-between transition-all duration-200 ${s[k.id]?"bg-gray-100 text-gray-800 hover:bg-gray-200":"bg-gray-50 text-gray-400 hover:bg-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:`w-3 h-3 rounded-full mr-2 ${s[k.id]?"bg-gray-500":"bg-gray-300"}`}),e.jsx("span",{className:"text-sm font-medium",children:k.title})]}),s[k.id]?e.jsx(at,{size:16,className:"text-current"}):e.jsx(Ma,{size:16,className:"text-current"})]},k.id))})})]}),e.jsx("div",{className:"h-[450px]",children:e.jsx(ds,{data:N(),options:{responsive:!0,scales:{y:{beginAtZero:!0,max:100,title:{display:!0,text:l}}},plugins:{legend:{position:"bottom",labels:{filter:function(k){return k.text==="Ideal"}}},tooltip:{callbacks:{label:k=>{const M=k.raw;return`${k.dataset.label}: ${M} (${w(l)?"Higher is better":"Lower is better"})`}}}}}})})]}),u==="differences"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Scenario Selected Options"}),e.jsx("div",{className:"border-2 border-gray-200 rounded-lg p-3",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:b.map(k=>e.jsxs("button",{onClick:()=>D(k.id),className:`w-full p-2 rounded-lg flex items-center justify-between transition-all duration-200 ${s[k.id]?"bg-gray-100 text-gray-800 hover:bg-gray-200":"bg-gray-50 text-gray-400 hover:bg-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:`w-3 h-3 rounded-full mr-2 ${s[k.id]?"bg-gray-500":"bg-gray-300"}`}),e.jsx("span",{className:"text-sm font-medium",children:k.title})]}),s[k.id]?e.jsx(at,{size:16,className:"text-current"}):e.jsx(Ma,{size:16,className:"text-current"})]},k.id))})})]}),e.jsx("div",{className:"space-y-3",children:v().map((k,M)=>e.jsxs("div",{className:"bg-white border-2 border-gray-200 hover:border-blue-300 p-4 rounded-xl shadow-sm hover:shadow-md transition-all duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-gray-800",children:k.option1}),e.jsx("span",{className:"text-gray-400 font-medium",children:"vs"}),e.jsx("span",{className:"font-semibold text-gray-800",children:k.option2})]}),e.jsxs("span",{className:"font-bold text-purple-600 bg-purple-50 px-3 py-1 rounded-lg",children:["Œî ",k.difference.toFixed(1)]})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[e.jsx("span",{className:"font-semibold text-blue-700 bg-blue-50 px-2 py-1 rounded",children:k.better})," ",e.jsx("span",{className:"text-gray-500",children:"performs better in this metric"})]})]},M))})]})]})]})})},pl=({isOpen:t,onClose:r,alternativeOptions:a,onAddAlternative:s})=>{const[n,i]=h.useState(null);if(!t)return null;const o=c=>{switch(c){case"safety":return e.jsx(rr,{className:"text-red-500",size:16});case"efficiency":return e.jsx(_r,{className:"text-yellow-500",size:16});case"sustainability":return e.jsx(ms,{className:"text-green-500",size:16});case"fairness":return e.jsx(It,{className:"text-blue-500",size:16});case"nonmaleficence":return e.jsx(us,{className:"text-purple-500",size:16});default:return null}},l=c=>c==="Accept"?e.jsx(er,{className:"text-green-600",size:18}):c==="Reject"?e.jsx(gs,{className:"text-red-600",size:18}):e.jsx(_r,{className:"text-gray-600",size:18}),d=c=>c.charAt(0).toUpperCase()+c.slice(1)+" Expert",u=c=>Object.values(c.expertOpinions).filter(p=>p.recommendation==="Accept").length,m=()=>{i(null),r()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-2xl shadow-2xl max-w-7xl w-full h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-pink-50",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 flex items-center",children:[e.jsx(Ct,{className:"mr-2.5 text-purple-600",size:24}),"Explore Alternative Decisions"]}),e.jsx("button",{onClick:m,className:"text-gray-400 hover:text-gray-600 transition-colors p-1 hover:bg-white rounded-lg",children:e.jsx(mt,{size:24})})]}),e.jsx("div",{className:"flex-1 overflow-hidden",children:n?e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"px-6 pt-4 pb-3 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-cyan-50",children:[e.jsxs("button",{onClick:()=>i(null),className:"text-sm text-purple-600 hover:text-purple-800 flex items-center font-medium mb-3 hover:underline",children:[e.jsx(mt,{size:16,className:"mr-1"}),"Back to alternatives"]}),e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-lg font-bold text-blue-900 mb-1.5",children:"Decision Overview"}),e.jsx("p",{className:"text-sm text-blue-800 leading-relaxed",children:n.description})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white px-4 py-2 rounded-lg border-2 border-blue-200 shadow-sm",children:[e.jsx(er,{className:"text-green-600",size:18}),e.jsxs("span",{className:"text-sm font-bold text-gray-800",children:[u(n),"/5"]}),e.jsx("span",{className:"text-xs text-gray-600",children:"recommend"})]})]}),e.jsx("div",{className:"mt-3 grid grid-cols-2 gap-2",children:n.riskInfo.map((c,p)=>e.jsxs("div",{className:"flex items-start bg-white rounded-lg px-2 py-1.5",children:[e.jsx("span",{className:"text-blue-500 mr-1.5 mt-0.5 font-bold",children:"‚Ä¢"}),e.jsx("p",{className:"text-xs text-blue-800",children:c})]},p))})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:[e.jsx("h4",{className:"text-base font-bold text-gray-800 mb-3 flex items-center",children:e.jsx("span",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-3 py-1 rounded-full text-sm mr-2",children:"Expert Evaluations"})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:Object.entries(n.expertOpinions).map(([c,p])=>e.jsxs("div",{className:`rounded-xl p-4 border-2 transition-all duration-200 ${p.recommendation==="Accept"?"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200 hover:shadow-lg":p.recommendation==="Reject"?"bg-gradient-to-br from-red-50 to-pink-50 border-red-200 hover:shadow-lg":"bg-gradient-to-br from-gray-50 to-slate-50 border-gray-200 hover:shadow-lg"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[o(c),e.jsx("h5",{className:"text-sm font-bold text-gray-800",children:d(c)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[l(p.recommendation),e.jsx("span",{className:`text-sm font-bold px-3 py-1 rounded-full ${p.recommendation==="Accept"?"bg-green-600 text-white":p.recommendation==="Reject"?"bg-red-600 text-white":"bg-gray-600 text-white"}`,children:p.recommendation})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"bg-white bg-opacity-70 p-2.5 rounded-lg",children:e.jsxs("p",{className:"text-xs text-gray-800 leading-relaxed",children:[e.jsx("span",{className:"font-bold text-gray-900",children:"Analysis:"})," ",p.summary]})}),e.jsx("div",{className:"bg-blue-100 bg-opacity-50 p-2.5 rounded-lg",children:e.jsxs("p",{className:"text-xs text-blue-900 leading-relaxed",children:[e.jsx("span",{className:"font-bold",children:"Comparison:"})," ",p.comparison]})})]})]},c))})]}),e.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gradient-to-r from-purple-50 to-pink-50",children:e.jsxs("button",{onClick:()=>{s(n),m()},className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-bold py-4 px-6 rounded-xl flex items-center justify-center gap-2 transition-all duration-200 shadow-lg hover:shadow-xl text-base",children:[e.jsx(Ct,{size:20}),"Add Alternative to Decision List"]})})]}):e.jsx(e.Fragment,{children:a.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full px-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-full p-8 mb-6 shadow-lg",children:e.jsx(St,{className:"text-green-600",size:56})}),e.jsx("h4",{className:"text-2xl font-bold text-gray-800 mb-3 text-center",children:"All Alternatives Explored!"}),e.jsx("p",{className:"text-base text-gray-600 text-center max-w-md mb-8 leading-relaxed",children:"You've successfully reviewed and added all available alternative decisions for this scenario. All options are now visible on the simulation page, ready for your evaluation."}),e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-5 mb-8 max-w-md",children:e.jsxs("p",{className:"text-sm text-blue-800 text-center",children:[e.jsx("span",{className:"font-semibold",children:"Next Steps:"})," Return to the simulation page to compare all options, review their metrics, and make your final decision."]})}),e.jsxs("button",{onClick:m,className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-semibold py-3.5 px-8 rounded-xl flex items-center gap-2 transition-all duration-200 shadow-lg hover:shadow-xl",children:[e.jsx($t,{size:20}),"Return to Simulation"]})]}):e.jsxs("div",{className:"p-8 h-full flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200 p-5 rounded-2xl mb-6 shadow-sm",children:[e.jsxs("h4",{className:"text-base font-bold text-purple-900 mb-2 flex items-center",children:[e.jsx(Ct,{className:"mr-2 text-purple-600",size:20}),"About Alternative Decisions"]}),e.jsx("p",{className:"text-sm text-purple-700 leading-relaxed",children:"Our experts have analyzed alternative strategies that might offer different trade-offs. These options provide unique approaches to handling the crisis, potentially balancing various factors in innovative ways."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-5 flex-1 overflow-y-auto pr-2",children:a.map(c=>e.jsxs("div",{className:"flex flex-col bg-white rounded-2xl border-2 border-gray-200 hover:border-purple-400 hover:shadow-2xl transition-all duration-300 h-fit",children:[e.jsxs("div",{className:"p-5 flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h5",{className:"font-bold text-gray-900 text-base leading-tight flex-1 mr-2",children:c.title}),e.jsxs("div",{className:"flex items-center gap-1.5 bg-gradient-to-r from-purple-100 to-pink-100 text-purple-800 px-3 py-1.5 rounded-full font-bold whitespace-nowrap shadow-sm",children:[e.jsx(er,{size:14}),e.jsxs("span",{className:"text-xs",children:[u(c),"/5"]})]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4 leading-relaxed line-clamp-2",children:c.description}),e.jsxs("div",{className:"space-y-2 mb-4",children:[c.riskInfo.slice(0,2).map((p,g)=>e.jsxs("div",{className:"flex items-start bg-gray-50 rounded-lg p-2",children:[e.jsx("span",{className:"text-purple-500 mr-2 mt-0.5 font-bold text-sm",children:"‚Ä¢"}),e.jsx("p",{className:"text-xs text-gray-700 leading-relaxed line-clamp-2",children:p})]},g)),c.riskInfo.length>2&&e.jsxs("p",{className:"text-xs text-purple-600 font-semibold pl-2",children:["+",c.riskInfo.length-2," more details..."]})]})]}),e.jsx("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-purple-50 border-t-2 border-gray-100 rounded-b-2xl",children:e.jsxs("button",{onClick:()=>i(c),className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-bold py-3 px-4 rounded-xl transition-all duration-200 shadow-md hover:shadow-lg flex items-center justify-center gap-2",children:[e.jsx(ut,{size:18}),"Select & View Details"]})})]},c.id))})]})})})]})})},gl=({isOpen:t,onClose:r,question:a,onAnswer:s})=>t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"text-yellow-500\\",size:24}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Value Reflection Required"})]}),e.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700",children:e.jsx(mt,{size:20})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:a.descriptionTile}),e.jsx("p",{className:"text-gray-600 mb-4",children:a.description}),e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:e.jsx("p",{className:"text-yellow-800 font-medium",children:a.question})})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>s(!0),className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors duration-200",children:"Yes, I would"}),e.jsx("button",{onClick:()=>s(!1),className:"flex-1 bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 transition-colors duration-200",children:"No, I would not"})]})]})]})}):null;function Xa(t,r){return Xa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Xa(t,r)}function ri(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,Xa(t,r)}function Z(){return Z=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},Z.apply(null,arguments)}function xr(t){"@babel/helpers - typeof";return xr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},xr(t)}function fl(t,r){if(xr(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(xr(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function hl(t){var r=fl(t,"string");return xr(r)=="symbol"?r:r+""}function xl(t,r,a){return(r=hl(r))in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Zs(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function Xs(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Zs(Object(a),!0).forEach(function(s){xl(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Zs(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function _e(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var en=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),tn=function(){return Math.random().toString(36).substring(7).split("").join(".")},rn={INIT:"@@redux/INIT"+tn(),REPLACE:"@@redux/REPLACE"+tn()};function bl(t){if(typeof t!="object"||t===null)return!1;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r}function ai(t,r,a){var s;if(typeof r=="function"&&typeof a=="function"||typeof a=="function"&&typeof arguments[3]=="function")throw new Error(_e(0));if(typeof r=="function"&&typeof a>"u"&&(a=r,r=void 0),typeof a<"u"){if(typeof a!="function")throw new Error(_e(1));return a(ai)(t,r)}if(typeof t!="function")throw new Error(_e(2));var n=t,i=r,o=[],l=o,d=!1;function u(){l===o&&(l=o.slice())}function m(){if(d)throw new Error(_e(3));return i}function c(b){if(typeof b!="function")throw new Error(_e(4));if(d)throw new Error(_e(5));var y=!0;return u(),l.push(b),function(){if(y){if(d)throw new Error(_e(6));y=!1,u();var w=l.indexOf(b);l.splice(w,1),o=null}}}function p(b){if(!bl(b))throw new Error(_e(7));if(typeof b.type>"u")throw new Error(_e(8));if(d)throw new Error(_e(9));try{d=!0,i=n(i,b)}finally{d=!1}for(var y=o=l,x=0;x<y.length;x++){var w=y[x];w()}return b}function g(b){if(typeof b!="function")throw new Error(_e(10));n=b,p({type:rn.REPLACE})}function f(){var b,y=c;return b={subscribe:function(w){if(typeof w!="object"||w===null)throw new Error(_e(11));function C(){w.next&&w.next(m())}C();var R=y(C);return{unsubscribe:R}}},b[en]=function(){return this},b}return p({type:rn.INIT}),s={dispatch:p,subscribe:c,getState:m,replaceReducer:g},s[en]=f,s}function an(t,r){return function(){return r(t.apply(this,arguments))}}function sn(t,r){if(typeof t=="function")return an(t,r);if(typeof t!="object"||t===null)throw new Error(_e(16));var a={};for(var s in t){var n=t[s];typeof n=="function"&&(a[s]=an(n,r))}return a}function si(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return r.length===0?function(s){return s}:r.length===1?r[0]:r.reduce(function(s,n){return function(){return s(n.apply(void 0,arguments))}})}function vl(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return function(s){return function(){var n=s.apply(void 0,arguments),i=function(){throw new Error(_e(15))},o={getState:n.getState,dispatch:function(){return i.apply(void 0,arguments)}},l=r.map(function(d){return d(o)});return i=si.apply(void 0,l)(n.dispatch),Xs(Xs({},n),{},{dispatch:i})}}}var ni=Ce.createContext(null);function yl(t){t()}var ii=yl,wl=function(r){return ii=r},jl=function(){return ii};function Nl(){var t=jl(),r=null,a=null;return{clear:function(){r=null,a=null},notify:function(){t(function(){for(var n=r;n;)n.callback(),n=n.next})},get:function(){for(var n=[],i=r;i;)n.push(i),i=i.next;return n},subscribe:function(n){var i=!0,o=a={callback:n,next:null,prev:a};return o.prev?o.prev.next=o:r=o,function(){!i||r===null||(i=!1,o.next?o.next.prev=o.prev:a=o.prev,o.prev?o.prev.next=o.next:r=o.next)}}}}var nn={notify:function(){},get:function(){return[]}};function oi(t,r){var a,s=nn;function n(c){return d(),s.subscribe(c)}function i(){s.notify()}function o(){m.onStateChange&&m.onStateChange()}function l(){return!!a}function d(){a||(a=r?r.addNestedSub(o):t.subscribe(o),s=Nl())}function u(){a&&(a(),a=void 0,s.clear(),s=nn)}var m={addNestedSub:n,notifyNestedSubs:i,handleChangeWrapper:o,isSubscribed:l,trySubscribe:d,tryUnsubscribe:u,getListeners:function(){return s}};return m}var li=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?h.useLayoutEffect:h.useEffect;function Sl(t){var r=t.store,a=t.context,s=t.children,n=h.useMemo(function(){var l=oi(r);return{store:r,subscription:l}},[r]),i=h.useMemo(function(){return r.getState()},[r]);li(function(){var l=n.subscription;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),i!==r.getState()&&l.notifyNestedSubs(),function(){l.tryUnsubscribe(),l.onStateChange=null}},[n,i]);var o=a||ni;return Ce.createElement(o.Provider,{value:n},s)}function Qr(t,r){if(t==null)return{};var a={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(r.indexOf(s)!==-1)continue;a[s]=t[s]}return a}var ci={exports:{}},Ie={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ze=typeof Symbol=="function"&&Symbol.for,hs=ze?Symbol.for("react.element"):60103,xs=ze?Symbol.for("react.portal"):60106,ma=ze?Symbol.for("react.fragment"):60107,pa=ze?Symbol.for("react.strict_mode"):60108,ga=ze?Symbol.for("react.profiler"):60114,fa=ze?Symbol.for("react.provider"):60109,ha=ze?Symbol.for("react.context"):60110,bs=ze?Symbol.for("react.async_mode"):60111,xa=ze?Symbol.for("react.concurrent_mode"):60111,ba=ze?Symbol.for("react.forward_ref"):60112,va=ze?Symbol.for("react.suspense"):60113,Cl=ze?Symbol.for("react.suspense_list"):60120,ya=ze?Symbol.for("react.memo"):60115,wa=ze?Symbol.for("react.lazy"):60116,Il=ze?Symbol.for("react.block"):60121,kl=ze?Symbol.for("react.fundamental"):60117,Rl=ze?Symbol.for("react.responder"):60118,Al=ze?Symbol.for("react.scope"):60119;function et(t){if(typeof t=="object"&&t!==null){var r=t.$$typeof;switch(r){case hs:switch(t=t.type,t){case bs:case xa:case ma:case ga:case pa:case va:return t;default:switch(t=t&&t.$$typeof,t){case ha:case ba:case wa:case ya:case fa:return t;default:return r}}case xs:return r}}}function di(t){return et(t)===xa}Ie.AsyncMode=bs;Ie.ConcurrentMode=xa;Ie.ContextConsumer=ha;Ie.ContextProvider=fa;Ie.Element=hs;Ie.ForwardRef=ba;Ie.Fragment=ma;Ie.Lazy=wa;Ie.Memo=ya;Ie.Portal=xs;Ie.Profiler=ga;Ie.StrictMode=pa;Ie.Suspense=va;Ie.isAsyncMode=function(t){return di(t)||et(t)===bs};Ie.isConcurrentMode=di;Ie.isContextConsumer=function(t){return et(t)===ha};Ie.isContextProvider=function(t){return et(t)===fa};Ie.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===hs};Ie.isForwardRef=function(t){return et(t)===ba};Ie.isFragment=function(t){return et(t)===ma};Ie.isLazy=function(t){return et(t)===wa};Ie.isMemo=function(t){return et(t)===ya};Ie.isPortal=function(t){return et(t)===xs};Ie.isProfiler=function(t){return et(t)===ga};Ie.isStrictMode=function(t){return et(t)===pa};Ie.isSuspense=function(t){return et(t)===va};Ie.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===ma||t===xa||t===ga||t===pa||t===va||t===Cl||typeof t=="object"&&t!==null&&(t.$$typeof===wa||t.$$typeof===ya||t.$$typeof===fa||t.$$typeof===ha||t.$$typeof===ba||t.$$typeof===kl||t.$$typeof===Rl||t.$$typeof===Al||t.$$typeof===Il)};Ie.typeOf=et;ci.exports=Ie;var Dl=ci.exports,vs=Dl,Tl={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},El={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Pl={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ui={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ys={};ys[vs.ForwardRef]=Pl;ys[vs.Memo]=ui;function on(t){return vs.isMemo(t)?ui:ys[t.$$typeof]||Tl}var Ml=Object.defineProperty,Vl=Object.getOwnPropertyNames,ln=Object.getOwnPropertySymbols,Ol=Object.getOwnPropertyDescriptor,Fl=Object.getPrototypeOf,cn=Object.prototype;function mi(t,r,a){if(typeof r!="string"){if(cn){var s=Fl(r);s&&s!==cn&&mi(t,s,a)}var n=Vl(r);ln&&(n=n.concat(ln(r)));for(var i=on(t),o=on(r),l=0;l<n.length;++l){var d=n[l];if(!El[d]&&!(a&&a[d])&&!(o&&o[d])&&!(i&&i[d])){var u=Ol(r,d);try{Ml(t,d,u)}catch{}}}}return t}var Ll=mi;const dn=ko(Ll);var pi={exports:{}},Te={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ja=60103,Na=60106,Cr=60107,Ir=60108,kr=60114,Rr=60109,Ar=60110,Dr=60112,Tr=60113,ws=60120,Er=60115,Pr=60116,gi=60121,fi=60122,hi=60117,xi=60129,bi=60131;if(typeof Symbol=="function"&&Symbol.for){var $e=Symbol.for;ja=$e("react.element"),Na=$e("react.portal"),Cr=$e("react.fragment"),Ir=$e("react.strict_mode"),kr=$e("react.profiler"),Rr=$e("react.provider"),Ar=$e("react.context"),Dr=$e("react.forward_ref"),Tr=$e("react.suspense"),ws=$e("react.suspense_list"),Er=$e("react.memo"),Pr=$e("react.lazy"),gi=$e("react.block"),fi=$e("react.server.block"),hi=$e("react.fundamental"),xi=$e("react.debug_trace_mode"),bi=$e("react.legacy_hidden")}function pt(t){if(typeof t=="object"&&t!==null){var r=t.$$typeof;switch(r){case ja:switch(t=t.type,t){case Cr:case kr:case Ir:case Tr:case ws:return t;default:switch(t=t&&t.$$typeof,t){case Ar:case Dr:case Pr:case Er:case Rr:return t;default:return r}}case Na:return r}}}var Bl=Rr,zl=ja,$l=Dr,Ul=Cr,Hl=Pr,Wl=Er,ql=Na,Yl=kr,Gl=Ir,Jl=Tr;Te.ContextConsumer=Ar;Te.ContextProvider=Bl;Te.Element=zl;Te.ForwardRef=$l;Te.Fragment=Ul;Te.Lazy=Hl;Te.Memo=Wl;Te.Portal=ql;Te.Profiler=Yl;Te.StrictMode=Gl;Te.Suspense=Jl;Te.isAsyncMode=function(){return!1};Te.isConcurrentMode=function(){return!1};Te.isContextConsumer=function(t){return pt(t)===Ar};Te.isContextProvider=function(t){return pt(t)===Rr};Te.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===ja};Te.isForwardRef=function(t){return pt(t)===Dr};Te.isFragment=function(t){return pt(t)===Cr};Te.isLazy=function(t){return pt(t)===Pr};Te.isMemo=function(t){return pt(t)===Er};Te.isPortal=function(t){return pt(t)===Na};Te.isProfiler=function(t){return pt(t)===kr};Te.isStrictMode=function(t){return pt(t)===Ir};Te.isSuspense=function(t){return pt(t)===Tr};Te.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Cr||t===kr||t===xi||t===Ir||t===Tr||t===ws||t===bi||typeof t=="object"&&t!==null&&(t.$$typeof===Pr||t.$$typeof===Er||t.$$typeof===Rr||t.$$typeof===Ar||t.$$typeof===Dr||t.$$typeof===hi||t.$$typeof===gi||t[0]===fi)};Te.typeOf=pt;pi.exports=Te;var _l=pi.exports,Ql=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],Kl=["reactReduxForwardedRef"],Zl=[],Xl=[null,null];function ec(t,r){var a=t[1];return[r.payload,a+1]}function un(t,r,a){li(function(){return t.apply(void 0,r)},a)}function tc(t,r,a,s,n,i,o){t.current=s,r.current=n,a.current=!1,i.current&&(i.current=null,o())}function rc(t,r,a,s,n,i,o,l,d,u){if(t){var m=!1,c=null,p=function(){if(!m){var b=r.getState(),y,x;try{y=s(b,n.current)}catch(w){x=w,c=w}x||(c=null),y===i.current?o.current||d():(i.current=y,l.current=y,o.current=!0,u({type:"STORE_UPDATED",payload:{error:x}}))}};a.onStateChange=p,a.trySubscribe(),p();var g=function(){if(m=!0,a.tryUnsubscribe(),a.onStateChange=null,c)throw c};return g}}var ac=function(){return[null,0]};function sc(t,r){r===void 0&&(r={});var a=r,s=a.getDisplayName,n=s===void 0?function(C){return"ConnectAdvanced("+C+")"}:s,i=a.methodName,o=i===void 0?"connectAdvanced":i,l=a.renderCountProp,d=l===void 0?void 0:l,u=a.shouldHandleStateChanges,m=u===void 0?!0:u,c=a.storeKey,p=c===void 0?"store":c;a.withRef;var g=a.forwardRef,f=g===void 0?!1:g,b=a.context,y=b===void 0?ni:b,x=Qr(a,Ql),w=y;return function(R){var N=R.displayName||R.name||"Component",v=n(N),S=Z({},x,{getDisplayName:n,methodName:o,renderCountProp:d,shouldHandleStateChanges:m,storeKey:p,displayName:v,wrappedComponentName:N,WrappedComponent:R}),I=x.pure;function D(k){return t(k.dispatch,S)}var L=I?h.useMemo:function(k){return k()};function E(k){var M=h.useMemo(function(){var ee=k.reactReduxForwardedRef,fe=Qr(k,Kl);return[k.context,ee,fe]},[k]),A=M[0],O=M[1],V=M[2],B=h.useMemo(function(){return A&&A.Consumer&&_l.isContextConsumer(Ce.createElement(A.Consumer,null))?A:w},[A,w]),z=h.useContext(B),ce=!!k.store&&!!k.store.getState&&!!k.store.dispatch;z&&z.store;var me=ce?k.store:z.store,Ne=h.useMemo(function(){return D(me)},[me]),re=h.useMemo(function(){if(!m)return Xl;var ee=oi(me,ce?null:z.subscription),fe=ee.notifyNestedSubs.bind(ee);return[ee,fe]},[me,ce,z]),Y=re[0],we=re[1],de=h.useMemo(function(){return ce?z:Z({},z,{subscription:Y})},[ce,z,Y]),Pe=h.useReducer(ec,Zl,ac),j=Pe[0],T=j[0],X=Pe[1];if(T&&T.error)throw T.error;var ne=h.useRef(),P=h.useRef(V),q=h.useRef(),H=h.useRef(!1),ie=L(function(){return q.current&&V===P.current?q.current:Ne(me.getState(),V)},[me,T,V]);un(tc,[P,ne,H,V,ie,q,we]),un(rc,[m,me,Y,Ne,P,ne,H,q,we,X],[me,Y,Ne]);var K=h.useMemo(function(){return Ce.createElement(R,Z({},ie,{ref:O}))},[O,R,ie]),ve=h.useMemo(function(){return m?Ce.createElement(B.Provider,{value:de},K):K},[B,K,de]);return ve}var $=I?Ce.memo(E):E;if($.WrappedComponent=R,$.displayName=E.displayName=v,f){var se=Ce.forwardRef(function(M,A){return Ce.createElement($,Z({},M,{reactReduxForwardedRef:A}))});return se.displayName=v,se.WrappedComponent=R,dn(se,R)}return dn($,R)}}function mn(t,r){return t===r?t!==0||r!==0||1/t===1/r:t!==t&&r!==r}function Fa(t,r){if(mn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),s=Object.keys(r);if(a.length!==s.length)return!1;for(var n=0;n<a.length;n++)if(!Object.prototype.hasOwnProperty.call(r,a[n])||!mn(t[a[n]],r[a[n]]))return!1;return!0}function nc(t,r){var a={},s=function(o){var l=t[o];typeof l=="function"&&(a[o]=function(){return r(l.apply(void 0,arguments))})};for(var n in t)s(n);return a}function js(t){return function(a,s){var n=t(a,s);function i(){return n}return i.dependsOnOwnProps=!1,i}}function pn(t){return t.dependsOnOwnProps!==null&&t.dependsOnOwnProps!==void 0?!!t.dependsOnOwnProps:t.length!==1}function vi(t,r){return function(s,n){n.displayName;var i=function(l,d){return i.dependsOnOwnProps?i.mapToProps(l,d):i.mapToProps(l)};return i.dependsOnOwnProps=!0,i.mapToProps=function(l,d){i.mapToProps=t,i.dependsOnOwnProps=pn(t);var u=i(l,d);return typeof u=="function"&&(i.mapToProps=u,i.dependsOnOwnProps=pn(u),u=i(l,d)),u},i}}function ic(t){return typeof t=="function"?vi(t):void 0}function oc(t){return t?void 0:js(function(r){return{dispatch:r}})}function lc(t){return t&&typeof t=="object"?js(function(r){return nc(t,r)}):void 0}const cc=[ic,oc,lc];function dc(t){return typeof t=="function"?vi(t):void 0}function uc(t){return t?void 0:js(function(){return{}})}const mc=[dc,uc];function pc(t,r,a){return Z({},a,t,r)}function gc(t){return function(a,s){s.displayName;var n=s.pure,i=s.areMergedPropsEqual,o=!1,l;return function(u,m,c){var p=t(u,m,c);return o?(!n||!i(p,l))&&(l=p):(o=!0,l=p),l}}}function fc(t){return typeof t=="function"?gc(t):void 0}function hc(t){return t?void 0:function(){return pc}}const xc=[fc,hc];var bc=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function vc(t,r,a,s){return function(i,o){return a(t(i,o),r(s,o),o)}}function yc(t,r,a,s,n){var i=n.areStatesEqual,o=n.areOwnPropsEqual,l=n.areStatePropsEqual,d=!1,u,m,c,p,g;function f(C,R){return u=C,m=R,c=t(u,m),p=r(s,m),g=a(c,p,m),d=!0,g}function b(){return c=t(u,m),r.dependsOnOwnProps&&(p=r(s,m)),g=a(c,p,m),g}function y(){return t.dependsOnOwnProps&&(c=t(u,m)),r.dependsOnOwnProps&&(p=r(s,m)),g=a(c,p,m),g}function x(){var C=t(u,m),R=!l(C,c);return c=C,R&&(g=a(c,p,m)),g}function w(C,R){var N=!o(R,m),v=!i(C,u,R,m);return u=C,m=R,N&&v?b():N?y():v?x():g}return function(R,N){return d?w(R,N):f(R,N)}}function wc(t,r){var a=r.initMapStateToProps,s=r.initMapDispatchToProps,n=r.initMergeProps,i=Qr(r,bc),o=a(t,i),l=s(t,i),d=n(t,i),u=i.pure?yc:vc;return u(o,l,d,t,i)}var jc=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function La(t,r,a){for(var s=r.length-1;s>=0;s--){var n=r[s](t);if(n)return n}return function(i,o){throw new Error("Invalid value of type "+typeof t+" for "+a+" argument when connecting component "+o.wrappedComponentName+".")}}function Nc(t,r){return t===r}function Sc(t){var r=t===void 0?{}:t,a=r.connectHOC,s=a===void 0?sc:a,n=r.mapStateToPropsFactories,i=n===void 0?mc:n,o=r.mapDispatchToPropsFactories,l=o===void 0?cc:o,d=r.mergePropsFactories,u=d===void 0?xc:d,m=r.selectorFactory,c=m===void 0?wc:m;return function(g,f,b,y){y===void 0&&(y={});var x=y,w=x.pure,C=w===void 0?!0:w,R=x.areStatesEqual,N=R===void 0?Nc:R,v=x.areOwnPropsEqual,S=v===void 0?Fa:v,I=x.areStatePropsEqual,D=I===void 0?Fa:I,L=x.areMergedPropsEqual,E=L===void 0?Fa:L,$=Qr(x,jc),se=La(g,i,"mapStateToProps"),k=La(f,l,"mapDispatchToProps"),M=La(b,u,"mergeProps");return s(c,Z({methodName:"connect",getDisplayName:function(O){return"Connect("+O+")"},shouldHandleStateChanges:!!g,initMapStateToProps:se,initMapDispatchToProps:k,initMergeProps:M,pure:C,areStatesEqual:N,areOwnPropsEqual:S,areStatePropsEqual:D,areMergedPropsEqual:E},$))}}const yi=Sc();wl(Hn.unstable_batchedUpdates);function Cc(t,r){if(t.length!==r.length)return!1;for(var a=0;a<t.length;a++)if(t[a]!==r[a])return!1;return!0}function wi(t,r){var a=h.useState(function(){return{inputs:r,result:t()}})[0],s=h.useRef(!0),n=h.useRef(a),i=s.current||!!(r&&n.current.inputs&&Cc(r,n.current.inputs)),o=i?n.current:{inputs:r,result:t()};return h.useEffect(function(){s.current=!1,n.current=o},[o]),o.result}function Ic(t,r){return wi(function(){return t},r)}var je=wi,G=Ic,kc="Invariant failed";function Rc(t,r){throw new Error(kc)}var ct=function(r){var a=r.top,s=r.right,n=r.bottom,i=r.left,o=s-i,l=n-a,d={top:a,right:s,bottom:n,left:i,width:o,height:l,x:i,y:a,center:{x:(s+i)/2,y:(n+a)/2}};return d},Ns=function(r,a){return{top:r.top-a.top,left:r.left-a.left,bottom:r.bottom+a.bottom,right:r.right+a.right}},gn=function(r,a){return{top:r.top+a.top,left:r.left+a.left,bottom:r.bottom-a.bottom,right:r.right-a.right}},Ac=function(r,a){return{top:r.top+a.y,left:r.left+a.x,bottom:r.bottom+a.y,right:r.right+a.x}},Ba={top:0,right:0,bottom:0,left:0},Ss=function(r){var a=r.borderBox,s=r.margin,n=s===void 0?Ba:s,i=r.border,o=i===void 0?Ba:i,l=r.padding,d=l===void 0?Ba:l,u=ct(Ns(a,n)),m=ct(gn(a,o)),c=ct(gn(m,d));return{marginBox:u,borderBox:ct(a),paddingBox:m,contentBox:c,margin:n,border:o,padding:d}},rt=function(r){var a=r.slice(0,-2),s=r.slice(-2);if(s!=="px")return 0;var n=Number(a);return isNaN(n)&&Rc(),n},Dc=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Kr=function(r,a){var s=r.borderBox,n=r.border,i=r.margin,o=r.padding,l=Ac(s,a);return Ss({borderBox:l,border:n,margin:i,padding:o})},Zr=function(r,a){return a===void 0&&(a=Dc()),Kr(r,a)},ji=function(r,a){var s={top:rt(a.marginTop),right:rt(a.marginRight),bottom:rt(a.marginBottom),left:rt(a.marginLeft)},n={top:rt(a.paddingTop),right:rt(a.paddingRight),bottom:rt(a.paddingBottom),left:rt(a.paddingLeft)},i={top:rt(a.borderTopWidth),right:rt(a.borderRightWidth),bottom:rt(a.borderBottomWidth),left:rt(a.borderLeftWidth)};return Ss({borderBox:r,margin:s,padding:n,border:i})},Ni=function(r){var a=r.getBoundingClientRect(),s=window.getComputedStyle(r);return ji(a,s)},fn=Number.isNaN||function(r){return typeof r=="number"&&r!==r};function Tc(t,r){return!!(t===r||fn(t)&&fn(r))}function Ec(t,r){if(t.length!==r.length)return!1;for(var a=0;a<t.length;a++)if(!Tc(t[a],r[a]))return!1;return!0}function Le(t,r){r===void 0&&(r=Ec);var a,s=[],n,i=!1;function o(){for(var l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];return i&&a===this&&r(l,s)||(n=t.apply(this,l),i=!0,a=this,s=l),n}return o}var br=function(r){var a=[],s=null,n=function(){for(var o=arguments.length,l=new Array(o),d=0;d<o;d++)l[d]=arguments[d];a=l,!s&&(s=requestAnimationFrame(function(){s=null,r.apply(void 0,a)}))};return n.cancel=function(){s&&(cancelAnimationFrame(s),s=null)},n};function Si(t,r){}Si.bind(null,"warn");Si.bind(null,"error");function Dt(){}function Pc(t,r){return Z({},t,{},r)}function st(t,r,a){var s=r.map(function(n){var i=Pc(a,n.options);return t.addEventListener(n.eventName,n.fn,i),function(){t.removeEventListener(n.eventName,n.fn,i)}});return function(){s.forEach(function(i){i()})}}var Mc="Invariant failed";function Xr(t){this.message=t}Xr.prototype.toString=function(){return this.message};function F(t,r){throw new Xr(Mc)}var Vc=function(t){ri(r,t);function r(){for(var s,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return s=t.call.apply(t,[this].concat(i))||this,s.callbacks=null,s.unbind=Dt,s.onWindowError=function(l){var d=s.getCallbacks();d.isDragging()&&d.tryAbort();var u=l.error;u instanceof Xr&&l.preventDefault()},s.getCallbacks=function(){if(!s.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return s.callbacks},s.setCallbacks=function(l){s.callbacks=l},s}var a=r.prototype;return a.componentDidMount=function(){this.unbind=st(window,[{eventName:"error",fn:this.onWindowError}])},a.componentDidCatch=function(n){if(n instanceof Xr){this.setState({});return}throw n},a.componentWillUnmount=function(){this.unbind()},a.render=function(){return this.props.children(this.setCallbacks)},r}(Ce.Component),Oc=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,ea=function(r){return r+1},Fc=function(r){return`
  You have lifted an item in position `+ea(r.source.index)+`
`},Ci=function(r,a){var s=r.droppableId===a.droppableId,n=ea(r.index),i=ea(a.index);return s?`
      You have moved the item from position `+n+`
      to position `+i+`
    `:`
    You have moved the item from position `+n+`
    in list `+r.droppableId+`
    to list `+a.droppableId+`
    in position `+i+`
  `},Ii=function(r,a,s){var n=a.droppableId===s.droppableId;return n?`
      The item `+r+`
      has been combined with `+s.draggableId:`
      The item `+r+`
      in list `+a.droppableId+`
      has been combined with `+s.draggableId+`
      in list `+s.droppableId+`
    `},Lc=function(r){var a=r.destination;if(a)return Ci(r.source,a);var s=r.combine;return s?Ii(r.draggableId,r.source,s):"You are over an area that cannot be dropped on"},hn=function(r){return`
  The item has returned to its starting position
  of `+ea(r.index)+`
`},Bc=function(r){if(r.reason==="CANCEL")return`
      Movement cancelled.
      `+hn(r.source)+`
    `;var a=r.destination,s=r.combine;return a?`
      You have dropped the item.
      `+Ci(r.source,a)+`
    `:s?`
      You have dropped the item.
      `+Ii(r.draggableId,r.source,s)+`
    `:`
    The item has been dropped while not over a drop area.
    `+hn(r.source)+`
  `},Jr={dragHandleUsageInstructions:Oc,onDragStart:Fc,onDragUpdate:Lc,onDragEnd:Bc},Be={x:0,y:0},He=function(r,a){return{x:r.x+a.x,y:r.y+a.y}},Ke=function(r,a){return{x:r.x-a.x,y:r.y-a.y}},Tt=function(r,a){return r.x===a.x&&r.y===a.y},lr=function(r){return{x:r.x!==0?-r.x:0,y:r.y!==0?-r.y:0}},Wt=function(r,a,s){var n;return s===void 0&&(s=0),n={},n[r]=a,n[r==="x"?"y":"x"]=s,n},vr=function(r,a){return Math.sqrt(Math.pow(a.x-r.x,2)+Math.pow(a.y-r.y,2))},xn=function(r,a){return Math.min.apply(Math,a.map(function(s){return vr(r,s)}))},ki=function(r){return function(a){return{x:r(a.x),y:r(a.y)}}},zc=function(t,r){var a=ct({top:Math.max(r.top,t.top),right:Math.min(r.right,t.right),bottom:Math.min(r.bottom,t.bottom),left:Math.max(r.left,t.left)});return a.width<=0||a.height<=0?null:a},Mr=function(r,a){return{top:r.top+a.y,left:r.left+a.x,bottom:r.bottom+a.y,right:r.right+a.x}},bn=function(r){return[{x:r.left,y:r.top},{x:r.right,y:r.top},{x:r.left,y:r.bottom},{x:r.right,y:r.bottom}]},$c={top:0,right:0,bottom:0,left:0},Uc=function(r,a){return a?Mr(r,a.scroll.diff.displacement):r},Hc=function(r,a,s){if(s&&s.increasedBy){var n;return Z({},r,(n={},n[a.end]=r[a.end]+s.increasedBy[a.line],n))}return r},Wc=function(r,a){return a&&a.shouldClipSubject?zc(a.pageMarginBox,r):ct(r)},sr=function(t){var r=t.page,a=t.withPlaceholder,s=t.axis,n=t.frame,i=Uc(r.marginBox,n),o=Hc(i,s,a),l=Wc(o,n);return{page:r,withPlaceholder:a,active:l}},Cs=function(t,r){t.frame||F();var a=t.frame,s=Ke(r,a.scroll.initial),n=lr(s),i=Z({},a,{scroll:{initial:a.scroll.initial,current:r,diff:{value:s,displacement:n},max:a.scroll.max}}),o=sr({page:t.subject.page,withPlaceholder:t.subject.withPlaceholder,axis:t.axis,frame:i}),l=Z({},t,{frame:i,subject:o});return l};function ta(t){return Object.values?Object.values(t):Object.keys(t).map(function(r){return t[r]})}function Is(t,r){if(t.findIndex)return t.findIndex(r);for(var a=0;a<t.length;a++)if(r(t[a]))return a;return-1}function Vt(t,r){if(t.find)return t.find(r);var a=Is(t,r);if(a!==-1)return t[a]}function Ri(t){return Array.prototype.slice.call(t)}var Ai=Le(function(t){return t.reduce(function(r,a){return r[a.descriptor.id]=a,r},{})}),Di=Le(function(t){return t.reduce(function(r,a){return r[a.descriptor.id]=a,r},{})}),Sa=Le(function(t){return ta(t)}),qc=Le(function(t){return ta(t)}),cr=Le(function(t,r){var a=qc(r).filter(function(s){return t===s.descriptor.droppableId}).sort(function(s,n){return s.descriptor.index-n.descriptor.index});return a});function ks(t){return t.at&&t.at.type==="REORDER"?t.at.destination:null}function Ca(t){return t.at&&t.at.type==="COMBINE"?t.at.combine:null}var Ia=Le(function(t,r){return r.filter(function(a){return a.descriptor.id!==t.descriptor.id})}),Yc=function(t){var r=t.isMovingForward,a=t.draggable,s=t.destination,n=t.insideDestination,i=t.previousImpact;if(!s.isCombineEnabled)return null;var o=ks(i);if(!o)return null;function l(b){var y={type:"COMBINE",combine:{draggableId:b,droppableId:s.descriptor.id}};return Z({},i,{at:y})}var d=i.displaced.all,u=d.length?d[0]:null;if(r)return u?l(u):null;var m=Ia(a,n);if(!u){if(!m.length)return null;var c=m[m.length-1];return l(c.descriptor.id)}var p=Is(m,function(b){return b.descriptor.id===u});p===-1&&F();var g=p-1;if(g<0)return null;var f=m[g];return l(f.descriptor.id)},dr=function(t,r){return t.descriptor.droppableId===r.descriptor.id},Ti={point:Be,value:0},yr={invisible:{},visible:{},all:[]},Gc={displaced:yr,displacedBy:Ti,at:null},nt=function(t,r){return function(a){return t<=a&&a<=r}},Ei=function(t){var r=nt(t.top,t.bottom),a=nt(t.left,t.right);return function(s){var n=r(s.top)&&r(s.bottom)&&a(s.left)&&a(s.right);if(n)return!0;var i=r(s.top)||r(s.bottom),o=a(s.left)||a(s.right),l=i&&o;if(l)return!0;var d=s.top<t.top&&s.bottom>t.bottom,u=s.left<t.left&&s.right>t.right,m=d&&u;if(m)return!0;var c=d&&o||u&&i;return c}},Jc=function(t){var r=nt(t.top,t.bottom),a=nt(t.left,t.right);return function(s){var n=r(s.top)&&r(s.bottom)&&a(s.left)&&a(s.right);return n}},Rs={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Pi={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},_c=function(t){return function(r){var a=nt(r.top,r.bottom),s=nt(r.left,r.right);return function(n){return t===Rs?a(n.top)&&a(n.bottom):s(n.left)&&s(n.right)}}},Qc=function(r,a){var s=a.frame?a.frame.scroll.diff.displacement:Be;return Mr(r,s)},Kc=function(r,a,s){return a.subject.active?s(a.subject.active)(r):!1},Zc=function(r,a,s){return s(a)(r)},As=function(r){var a=r.target,s=r.destination,n=r.viewport,i=r.withDroppableDisplacement,o=r.isVisibleThroughFrameFn,l=i?Qc(a,s):a;return Kc(l,s,o)&&Zc(l,n,o)},Xc=function(r){return As(Z({},r,{isVisibleThroughFrameFn:Ei}))},Mi=function(r){return As(Z({},r,{isVisibleThroughFrameFn:Jc}))},ed=function(r){return As(Z({},r,{isVisibleThroughFrameFn:_c(r.destination.axis)}))},td=function(r,a,s){if(typeof s=="boolean")return s;if(!a)return!0;var n=a.invisible,i=a.visible;if(n[r])return!1;var o=i[r];return o?o.shouldAnimate:!0};function rd(t,r){var a=t.page.marginBox,s={top:r.point.y,right:0,bottom:0,left:r.point.x};return ct(Ns(a,s))}function wr(t){var r=t.afterDragging,a=t.destination,s=t.displacedBy,n=t.viewport,i=t.forceShouldAnimate,o=t.last;return r.reduce(function(d,u){var m=rd(u,s),c=u.descriptor.id;d.all.push(c);var p=Xc({target:m,destination:a,viewport:n,withDroppableDisplacement:!0});if(!p)return d.invisible[u.descriptor.id]=!0,d;var g=td(c,o,i),f={draggableId:c,shouldAnimate:g};return d.visible[c]=f,d},{all:[],visible:{},invisible:{}})}function ad(t,r){if(!t.length)return 0;var a=t[t.length-1].descriptor.index;return r.inHomeList?a:a+1}function vn(t){var r=t.insideDestination,a=t.inHomeList,s=t.displacedBy,n=t.destination,i=ad(r,{inHomeList:a});return{displaced:yr,displacedBy:s,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:i}}}}function ra(t){var r=t.draggable,a=t.insideDestination,s=t.destination,n=t.viewport,i=t.displacedBy,o=t.last,l=t.index,d=t.forceShouldAnimate,u=dr(r,s);if(l==null)return vn({insideDestination:a,inHomeList:u,displacedBy:i,destination:s});var m=Vt(a,function(b){return b.descriptor.index===l});if(!m)return vn({insideDestination:a,inHomeList:u,displacedBy:i,destination:s});var c=Ia(r,a),p=a.indexOf(m),g=c.slice(p),f=wr({afterDragging:g,destination:s,displacedBy:i,last:o,viewport:n.frame,forceShouldAnimate:d});return{displaced:f,displacedBy:i,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:l}}}}function Mt(t,r){return!!r.effected[t]}var sd=function(t){var r=t.isMovingForward,a=t.destination,s=t.draggables,n=t.combine,i=t.afterCritical;if(!a.isCombineEnabled)return null;var o=n.draggableId,l=s[o],d=l.descriptor.index,u=Mt(o,i);return u?r?d:d-1:r?d+1:d},nd=function(t){var r=t.isMovingForward,a=t.isInHomeList,s=t.insideDestination,n=t.location;if(!s.length)return null;var i=n.index,o=r?i+1:i-1,l=s[0].descriptor.index,d=s[s.length-1].descriptor.index,u=a?d:d+1;return o<l||o>u?null:o},id=function(t){var r=t.isMovingForward,a=t.isInHomeList,s=t.draggable,n=t.draggables,i=t.destination,o=t.insideDestination,l=t.previousImpact,d=t.viewport,u=t.afterCritical,m=l.at;if(m||F(),m.type==="REORDER"){var c=nd({isMovingForward:r,isInHomeList:a,location:m.destination,insideDestination:o});return c==null?null:ra({draggable:s,insideDestination:o,destination:i,viewport:d,last:l.displaced,displacedBy:l.displacedBy,index:c})}var p=sd({isMovingForward:r,destination:i,displaced:l.displaced,draggables:n,combine:m.combine,afterCritical:u});return p==null?null:ra({draggable:s,insideDestination:o,destination:i,viewport:d,last:l.displaced,displacedBy:l.displacedBy,index:p})},od=function(t){var r=t.displaced,a=t.afterCritical,s=t.combineWith,n=t.displacedBy,i=!!(r.visible[s]||r.invisible[s]);return Mt(s,a)?i?Be:lr(n.point):i?n.point:Be},ld=function(t){var r=t.afterCritical,a=t.impact,s=t.draggables,n=Ca(a);n||F();var i=n.draggableId,o=s[i].page.borderBox.center,l=od({displaced:a.displaced,afterCritical:r,combineWith:i,displacedBy:a.displacedBy});return He(o,l)},Vi=function(r,a){return a.margin[r.start]+a.borderBox[r.size]/2},cd=function(r,a){return a.margin[r.end]+a.borderBox[r.size]/2},Ds=function(r,a,s){return a[r.crossAxisStart]+s.margin[r.crossAxisStart]+s.borderBox[r.crossAxisSize]/2},yn=function(r){var a=r.axis,s=r.moveRelativeTo,n=r.isMoving;return Wt(a.line,s.marginBox[a.end]+Vi(a,n),Ds(a,s.marginBox,n))},wn=function(r){var a=r.axis,s=r.moveRelativeTo,n=r.isMoving;return Wt(a.line,s.marginBox[a.start]-cd(a,n),Ds(a,s.marginBox,n))},dd=function(r){var a=r.axis,s=r.moveInto,n=r.isMoving;return Wt(a.line,s.contentBox[a.start]+Vi(a,n),Ds(a,s.contentBox,n))},ud=function(t){var r=t.impact,a=t.draggable,s=t.draggables,n=t.droppable,i=t.afterCritical,o=cr(n.descriptor.id,s),l=a.page,d=n.axis;if(!o.length)return dd({axis:d,moveInto:n.page,isMoving:l});var u=r.displaced,m=r.displacedBy,c=u.all[0];if(c){var p=s[c];if(Mt(c,i))return wn({axis:d,moveRelativeTo:p.page,isMoving:l});var g=Kr(p.page,m.point);return wn({axis:d,moveRelativeTo:g,isMoving:l})}var f=o[o.length-1];if(f.descriptor.id===a.descriptor.id)return l.borderBox.center;if(Mt(f.descriptor.id,i)){var b=Kr(f.page,lr(i.displacedBy.point));return yn({axis:d,moveRelativeTo:b,isMoving:l})}return yn({axis:d,moveRelativeTo:f.page,isMoving:l})},es=function(t,r){var a=t.frame;return a?He(r,a.scroll.diff.displacement):r},md=function(r){var a=r.impact,s=r.draggable,n=r.droppable,i=r.draggables,o=r.afterCritical,l=s.page.borderBox.center,d=a.at;return!n||!d?l:d.type==="REORDER"?ud({impact:a,draggable:s,draggables:i,droppable:n,afterCritical:o}):ld({impact:a,draggables:i,afterCritical:o})},ka=function(t){var r=md(t),a=t.droppable,s=a?es(a,r):r;return s},Oi=function(t,r){var a=Ke(r,t.scroll.initial),s=lr(a),n=ct({top:r.y,bottom:r.y+t.frame.height,left:r.x,right:r.x+t.frame.width}),i={frame:n,scroll:{initial:t.scroll.initial,max:t.scroll.max,current:r,diff:{value:a,displacement:s}}};return i};function jn(t,r){return t.map(function(a){return r[a]})}function pd(t,r){for(var a=0;a<r.length;a++){var s=r[a].visible[t];if(s)return s}return null}var gd=function(t){var r=t.impact,a=t.viewport,s=t.destination,n=t.draggables,i=t.maxScrollChange,o=Oi(a,He(a.scroll.current,i)),l=s.frame?Cs(s,He(s.frame.scroll.current,i)):s,d=r.displaced,u=wr({afterDragging:jn(d.all,n),destination:s,displacedBy:r.displacedBy,viewport:o.frame,last:d,forceShouldAnimate:!1}),m=wr({afterDragging:jn(d.all,n),destination:l,displacedBy:r.displacedBy,viewport:a.frame,last:d,forceShouldAnimate:!1}),c={},p={},g=[d,u,m];d.all.forEach(function(b){var y=pd(b,g);if(y){p[b]=y;return}c[b]=!0});var f=Z({},r,{displaced:{all:d.all,invisible:c,visible:p}});return f},fd=function(t,r){return He(t.scroll.diff.displacement,r)},Ts=function(t){var r=t.pageBorderBoxCenter,a=t.draggable,s=t.viewport,n=fd(s,r),i=Ke(n,a.page.borderBox.center);return He(a.client.borderBox.center,i)},Fi=function(t){var r=t.draggable,a=t.destination,s=t.newPageBorderBoxCenter,n=t.viewport,i=t.withDroppableDisplacement,o=t.onlyOnMainAxis,l=o===void 0?!1:o,d=Ke(s,r.page.borderBox.center),u=Mr(r.page.borderBox,d),m={target:u,destination:a,withDroppableDisplacement:i,viewport:n};return l?ed(m):Mi(m)},hd=function(t){var r=t.isMovingForward,a=t.draggable,s=t.destination,n=t.draggables,i=t.previousImpact,o=t.viewport,l=t.previousPageBorderBoxCenter,d=t.previousClientSelection,u=t.afterCritical;if(!s.isEnabled)return null;var m=cr(s.descriptor.id,n),c=dr(a,s),p=Yc({isMovingForward:r,draggable:a,destination:s,insideDestination:m,previousImpact:i})||id({isMovingForward:r,isInHomeList:c,draggable:a,draggables:n,destination:s,insideDestination:m,previousImpact:i,viewport:o,afterCritical:u});if(!p)return null;var g=ka({impact:p,draggable:a,droppable:s,draggables:n,afterCritical:u}),f=Fi({draggable:a,destination:s,newPageBorderBoxCenter:g,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(f){var b=Ts({pageBorderBoxCenter:g,draggable:a,viewport:o});return{clientSelection:b,impact:p,scrollJumpRequest:null}}var y=Ke(g,l),x=gd({impact:p,viewport:o,destination:s,draggables:n,maxScrollChange:y});return{clientSelection:d,impact:x,scrollJumpRequest:y}},Ye=function(r){var a=r.subject.active;return a||F(),a},xd=function(t){var r=t.isMovingForward,a=t.pageBorderBoxCenter,s=t.source,n=t.droppables,i=t.viewport,o=s.subject.active;if(!o)return null;var l=s.axis,d=nt(o[l.start],o[l.end]),u=Sa(n).filter(function(c){return c!==s}).filter(function(c){return c.isEnabled}).filter(function(c){return!!c.subject.active}).filter(function(c){return Ei(i.frame)(Ye(c))}).filter(function(c){var p=Ye(c);return r?o[l.crossAxisEnd]<p[l.crossAxisEnd]:p[l.crossAxisStart]<o[l.crossAxisStart]}).filter(function(c){var p=Ye(c),g=nt(p[l.start],p[l.end]);return d(p[l.start])||d(p[l.end])||g(o[l.start])||g(o[l.end])}).sort(function(c,p){var g=Ye(c)[l.crossAxisStart],f=Ye(p)[l.crossAxisStart];return r?g-f:f-g}).filter(function(c,p,g){return Ye(c)[l.crossAxisStart]===Ye(g[0])[l.crossAxisStart]});if(!u.length)return null;if(u.length===1)return u[0];var m=u.filter(function(c){var p=nt(Ye(c)[l.start],Ye(c)[l.end]);return p(a[l.line])});return m.length===1?m[0]:m.length>1?m.sort(function(c,p){return Ye(c)[l.start]-Ye(p)[l.start]})[0]:u.sort(function(c,p){var g=xn(a,bn(Ye(c))),f=xn(a,bn(Ye(p)));return g!==f?g-f:Ye(c)[l.start]-Ye(p)[l.start]})[0]},Nn=function(r,a){var s=r.page.borderBox.center;return Mt(r.descriptor.id,a)?Ke(s,a.displacedBy.point):s},bd=function(r,a){var s=r.page.borderBox;return Mt(r.descriptor.id,a)?Mr(s,lr(a.displacedBy.point)):s},vd=function(t){var r=t.pageBorderBoxCenter,a=t.viewport,s=t.destination,n=t.insideDestination,i=t.afterCritical,o=n.filter(function(l){return Mi({target:bd(l,i),destination:s,viewport:a.frame,withDroppableDisplacement:!0})}).sort(function(l,d){var u=vr(r,es(s,Nn(l,i))),m=vr(r,es(s,Nn(d,i)));return u<m?-1:m<u?1:l.descriptor.index-d.descriptor.index});return o[0]||null},Vr=Le(function(r,a){var s=a[r.line];return{value:s,point:Wt(r.line,s)}}),yd=function(r,a,s){var n=r.axis;if(r.descriptor.mode==="virtual")return Wt(n.line,a[n.line]);var i=r.subject.page.contentBox[n.size],o=cr(r.descriptor.id,s),l=o.reduce(function(m,c){return m+c.client.marginBox[n.size]},0),d=l+a[n.line],u=d-i;return u<=0?null:Wt(n.line,u)},Li=function(r,a){return Z({},r,{scroll:Z({},r.scroll,{max:a})})},Bi=function(r,a,s){var n=r.frame;dr(a,r)&&F(),r.subject.withPlaceholder&&F();var i=Vr(r.axis,a.displaceBy).point,o=yd(r,i,s),l={placeholderSize:i,increasedBy:o,oldFrameMaxScroll:r.frame?r.frame.scroll.max:null};if(!n){var d=sr({page:r.subject.page,withPlaceholder:l,axis:r.axis,frame:r.frame});return Z({},r,{subject:d})}var u=o?He(n.scroll.max,o):n.scroll.max,m=Li(n,u),c=sr({page:r.subject.page,withPlaceholder:l,axis:r.axis,frame:m});return Z({},r,{subject:c,frame:m})},wd=function(r){var a=r.subject.withPlaceholder;a||F();var s=r.frame;if(!s){var n=sr({page:r.subject.page,axis:r.axis,frame:null,withPlaceholder:null});return Z({},r,{subject:n})}var i=a.oldFrameMaxScroll;i||F();var o=Li(s,i),l=sr({page:r.subject.page,axis:r.axis,frame:o,withPlaceholder:null});return Z({},r,{subject:l,frame:o})},jd=function(t){var r=t.previousPageBorderBoxCenter,a=t.moveRelativeTo,s=t.insideDestination,n=t.draggable,i=t.draggables,o=t.destination,l=t.viewport,d=t.afterCritical;if(!a){if(s.length)return null;var u={displaced:yr,displacedBy:Ti,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},m=ka({impact:u,draggable:n,droppable:o,draggables:i,afterCritical:d}),c=dr(n,o)?o:Bi(o,n,i),p=Fi({draggable:n,destination:c,newPageBorderBoxCenter:m,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return p?u:null}var g=r[o.axis.line]<=a.page.borderBox.center[o.axis.line],f=function(){var y=a.descriptor.index;return a.descriptor.id===n.descriptor.id||g?y:y+1}(),b=Vr(o.axis,n.displaceBy);return ra({draggable:n,insideDestination:s,destination:o,viewport:l,displacedBy:b,last:yr,index:f})},Nd=function(t){var r=t.isMovingForward,a=t.previousPageBorderBoxCenter,s=t.draggable,n=t.isOver,i=t.draggables,o=t.droppables,l=t.viewport,d=t.afterCritical,u=xd({isMovingForward:r,pageBorderBoxCenter:a,source:n,droppables:o,viewport:l});if(!u)return null;var m=cr(u.descriptor.id,i),c=vd({pageBorderBoxCenter:a,viewport:l,destination:u,insideDestination:m,afterCritical:d}),p=jd({previousPageBorderBoxCenter:a,destination:u,draggable:s,draggables:i,moveRelativeTo:c,insideDestination:m,viewport:l,afterCritical:d});if(!p)return null;var g=ka({impact:p,draggable:s,droppable:u,draggables:i,afterCritical:d}),f=Ts({pageBorderBoxCenter:g,draggable:s,viewport:l});return{clientSelection:f,impact:p,scrollJumpRequest:null}},Ze=function(t){var r=t.at;return r?r.type==="REORDER"?r.destination.droppableId:r.combine.droppableId:null},Sd=function(r,a){var s=Ze(r);return s?a[s]:null},Cd=function(t){var r=t.state,a=t.type,s=Sd(r.impact,r.dimensions.droppables),n=!!s,i=r.dimensions.droppables[r.critical.droppable.id],o=s||i,l=o.axis.direction,d=l==="vertical"&&(a==="MOVE_UP"||a==="MOVE_DOWN")||l==="horizontal"&&(a==="MOVE_LEFT"||a==="MOVE_RIGHT");if(d&&!n)return null;var u=a==="MOVE_DOWN"||a==="MOVE_RIGHT",m=r.dimensions.draggables[r.critical.draggable.id],c=r.current.page.borderBoxCenter,p=r.dimensions,g=p.draggables,f=p.droppables;return d?hd({isMovingForward:u,previousPageBorderBoxCenter:c,draggable:m,destination:o,draggables:g,viewport:r.viewport,previousClientSelection:r.current.client.selection,previousImpact:r.impact,afterCritical:r.afterCritical}):Nd({isMovingForward:u,previousPageBorderBoxCenter:c,draggable:m,isOver:o,draggables:g,droppables:f,viewport:r.viewport,afterCritical:r.afterCritical})};function Ft(t){return t.phase==="DRAGGING"||t.phase==="COLLECTING"}function zi(t){var r=nt(t.top,t.bottom),a=nt(t.left,t.right);return function(n){return r(n.y)&&a(n.x)}}function Id(t,r){return t.left<r.right&&t.right>r.left&&t.top<r.bottom&&t.bottom>r.top}function kd(t){var r=t.pageBorderBox,a=t.draggable,s=t.candidates,n=a.page.borderBox.center,i=s.map(function(o){var l=o.axis,d=Wt(o.axis.line,r.center[l.line],o.page.borderBox.center[l.crossAxisLine]);return{id:o.descriptor.id,distance:vr(n,d)}}).sort(function(o,l){return l.distance-o.distance});return i[0]?i[0].id:null}function Rd(t){var r=t.pageBorderBox,a=t.draggable,s=t.droppables,n=Sa(s).filter(function(i){if(!i.isEnabled)return!1;var o=i.subject.active;if(!o||!Id(r,o))return!1;if(zi(o)(r.center))return!0;var l=i.axis,d=o.center[l.crossAxisLine],u=r[l.crossAxisStart],m=r[l.crossAxisEnd],c=nt(o[l.crossAxisStart],o[l.crossAxisEnd]),p=c(u),g=c(m);return!p&&!g?!0:p?u<d:m>d});return n.length?n.length===1?n[0].descriptor.id:kd({pageBorderBox:r,draggable:a,candidates:n}):null}var $i=function(r,a){return ct(Mr(r,a))},Ad=function(t,r){var a=t.frame;return a?$i(r,a.scroll.diff.value):r};function Ui(t){var r=t.displaced,a=t.id;return!!(r.visible[a]||r.invisible[a])}function Dd(t){var r=t.draggable,a=t.closest,s=t.inHomeList;return a?s&&a.descriptor.index>r.descriptor.index?a.descriptor.index-1:a.descriptor.index:null}var Td=function(t){var r=t.pageBorderBoxWithDroppableScroll,a=t.draggable,s=t.destination,n=t.insideDestination,i=t.last,o=t.viewport,l=t.afterCritical,d=s.axis,u=Vr(s.axis,a.displaceBy),m=u.value,c=r[d.start],p=r[d.end],g=Ia(a,n),f=Vt(g,function(y){var x=y.descriptor.id,w=y.page.borderBox.center[d.line],C=Mt(x,l),R=Ui({displaced:i,id:x});return C?R?p<=w:c<w-m:R?p<=w+m:c<w}),b=Dd({draggable:a,closest:f,inHomeList:dr(a,s)});return ra({draggable:a,insideDestination:n,destination:s,viewport:o,last:i,displacedBy:u,index:b})},Ed=4,Pd=function(t){var r=t.draggable,a=t.pageBorderBoxWithDroppableScroll,s=t.previousImpact,n=t.destination,i=t.insideDestination,o=t.afterCritical;if(!n.isCombineEnabled)return null;var l=n.axis,d=Vr(n.axis,r.displaceBy),u=d.value,m=a[l.start],c=a[l.end],p=Ia(r,i),g=Vt(p,function(b){var y=b.descriptor.id,x=b.page.borderBox,w=x[l.size],C=w/Ed,R=Mt(y,o),N=Ui({displaced:s.displaced,id:y});return R?N?c>x[l.start]+C&&c<x[l.end]-C:m>x[l.start]-u+C&&m<x[l.end]-u-C:N?c>x[l.start]+u+C&&c<x[l.end]+u-C:m>x[l.start]+C&&m<x[l.end]-C});if(!g)return null;var f={displacedBy:d,displaced:s.displaced,at:{type:"COMBINE",combine:{draggableId:g.descriptor.id,droppableId:n.descriptor.id}}};return f},Hi=function(t){var r=t.pageOffset,a=t.draggable,s=t.draggables,n=t.droppables,i=t.previousImpact,o=t.viewport,l=t.afterCritical,d=$i(a.page.borderBox,r),u=Rd({pageBorderBox:d,draggable:a,droppables:n});if(!u)return Gc;var m=n[u],c=cr(m.descriptor.id,s),p=Ad(m,d);return Pd({pageBorderBoxWithDroppableScroll:p,draggable:a,previousImpact:i,destination:m,insideDestination:c,afterCritical:l})||Td({pageBorderBoxWithDroppableScroll:p,draggable:a,destination:m,insideDestination:c,last:i.displaced,viewport:o,afterCritical:l})},Es=function(t,r){var a;return Z({},t,(a={},a[r.descriptor.id]=r,a))},Md=function(r){var a=r.previousImpact,s=r.impact,n=r.droppables,i=Ze(a),o=Ze(s);if(!i||i===o)return n;var l=n[i];if(!l.subject.withPlaceholder)return n;var d=wd(l);return Es(n,d)},Vd=function(t){var r=t.draggable,a=t.draggables,s=t.droppables,n=t.previousImpact,i=t.impact,o=Md({previousImpact:n,impact:i,droppables:s}),l=Ze(i);if(!l)return o;var d=s[l];if(dr(r,d)||d.subject.withPlaceholder)return o;var u=Bi(d,r,a);return Es(o,u)},fr=function(t){var r=t.state,a=t.clientSelection,s=t.dimensions,n=t.viewport,i=t.impact,o=t.scrollJumpRequest,l=n||r.viewport,d=s||r.dimensions,u=a||r.current.client.selection,m=Ke(u,r.initial.client.selection),c={offset:m,selection:u,borderBoxCenter:He(r.initial.client.borderBoxCenter,m)},p={selection:He(c.selection,l.scroll.current),borderBoxCenter:He(c.borderBoxCenter,l.scroll.current),offset:He(c.offset,l.scroll.diff.value)},g={client:c,page:p};if(r.phase==="COLLECTING")return Z({phase:"COLLECTING"},r,{dimensions:d,viewport:l,current:g});var f=d.draggables[r.critical.draggable.id],b=i||Hi({pageOffset:p.offset,draggable:f,draggables:d.draggables,droppables:d.droppables,previousImpact:r.impact,viewport:l,afterCritical:r.afterCritical}),y=Vd({draggable:f,impact:b,previousImpact:r.impact,draggables:d.draggables,droppables:d.droppables}),x=Z({},r,{current:g,dimensions:{draggables:d.draggables,droppables:y},impact:b,viewport:l,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null});return x};function Od(t,r){return t.map(function(a){return r[a]})}var Wi=function(t){var r=t.impact,a=t.viewport,s=t.draggables,n=t.destination,i=t.forceShouldAnimate,o=r.displaced,l=Od(o.all,s),d=wr({afterDragging:l,destination:n,displacedBy:r.displacedBy,viewport:a.frame,forceShouldAnimate:i,last:o});return Z({},r,{displaced:d})},qi=function(t){var r=t.impact,a=t.draggable,s=t.droppable,n=t.draggables,i=t.viewport,o=t.afterCritical,l=ka({impact:r,draggable:a,draggables:n,droppable:s,afterCritical:o});return Ts({pageBorderBoxCenter:l,draggable:a,viewport:i})},Yi=function(t){var r=t.state,a=t.dimensions,s=t.viewport;r.movementMode!=="SNAP"&&F();var n=r.impact,i=s||r.viewport,o=a||r.dimensions,l=o.draggables,d=o.droppables,u=l[r.critical.draggable.id],m=Ze(n);m||F();var c=d[m],p=Wi({impact:n,viewport:i,destination:c,draggables:l}),g=qi({impact:p,draggable:u,droppable:c,draggables:l,viewport:i,afterCritical:r.afterCritical});return fr({impact:p,clientSelection:g,state:r,dimensions:o,viewport:i})},Fd=function(t){return{index:t.index,droppableId:t.droppableId}},Gi=function(t){var r=t.draggable,a=t.home,s=t.draggables,n=t.viewport,i=Vr(a.axis,r.displaceBy),o=cr(a.descriptor.id,s),l=o.indexOf(r);l===-1&&F();var d=o.slice(l+1),u=d.reduce(function(g,f){return g[f.descriptor.id]=!0,g},{}),m={inVirtualList:a.descriptor.mode==="virtual",displacedBy:i,effected:u},c=wr({afterDragging:d,destination:a,displacedBy:i,last:null,viewport:n.frame,forceShouldAnimate:!1}),p={displaced:c,displacedBy:i,at:{type:"REORDER",destination:Fd(r.descriptor)}};return{impact:p,afterCritical:m}},Ld=function(t,r){return{draggables:t.draggables,droppables:Es(t.droppables,r)}},Bd=function(t){var r=t.draggable,a=t.offset,s=t.initialWindowScroll,n=Kr(r.client,a),i=Zr(n,s),o=Z({},r,{placeholder:Z({},r.placeholder,{client:n}),client:n,page:i});return o},zd=function(t){var r=t.frame;return r||F(),r},$d=function(t){var r=t.additions,a=t.updatedDroppables,s=t.viewport,n=s.scroll.diff.value;return r.map(function(i){var o=i.descriptor.droppableId,l=a[o],d=zd(l),u=d.scroll.diff.value,m=He(n,u),c=Bd({draggable:i,offset:m,initialWindowScroll:s.scroll.initial});return c})},Ud=function(t){var r=t.state,a=t.published,s=a.modified.map(function(C){var R=r.dimensions.droppables[C.droppableId],N=Cs(R,C.scroll);return N}),n=Z({},r.dimensions.droppables,{},Ai(s)),i=Di($d({additions:a.additions,updatedDroppables:n,viewport:r.viewport})),o=Z({},r.dimensions.draggables,{},i);a.removals.forEach(function(C){delete o[C]});var l={droppables:n,draggables:o},d=Ze(r.impact),u=d?l.droppables[d]:null,m=l.draggables[r.critical.draggable.id],c=l.droppables[r.critical.droppable.id],p=Gi({draggable:m,home:c,draggables:o,viewport:r.viewport}),g=p.impact,f=p.afterCritical,b=u&&u.isCombineEnabled?r.impact:g,y=Hi({pageOffset:r.current.page.offset,draggable:l.draggables[r.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:b,viewport:r.viewport,afterCritical:f}),x=Z({phase:"DRAGGING"},r,{phase:"DRAGGING",impact:y,onLiftImpact:g,dimensions:l,afterCritical:f,forceShouldAnimate:!1});if(r.phase==="COLLECTING")return x;var w=Z({phase:"DROP_PENDING"},x,{phase:"DROP_PENDING",reason:r.reason,isWaiting:!1});return w},ts=function(r){return r.movementMode==="SNAP"},za=function(r,a,s){var n=Ld(r.dimensions,a);return!ts(r)||s?fr({state:r,dimensions:n}):Yi({state:r,dimensions:n})};function $a(t){return t.isDragging&&t.movementMode==="SNAP"?Z({phase:"DRAGGING"},t,{scrollJumpRequest:null}):t}var Sn={phase:"IDLE",completed:null,shouldFlush:!1},Hd=function(t,r){if(t===void 0&&(t=Sn),r.type==="FLUSH")return Z({},Sn,{shouldFlush:!0});if(r.type==="INITIAL_PUBLISH"){t.phase!=="IDLE"&&F();var a=r.payload,s=a.critical,n=a.clientSelection,i=a.viewport,o=a.dimensions,l=a.movementMode,d=o.draggables[s.draggable.id],u=o.droppables[s.droppable.id],m={selection:n,borderBoxCenter:d.client.borderBox.center,offset:Be},c={client:m,page:{selection:He(m.selection,i.scroll.initial),borderBoxCenter:He(m.selection,i.scroll.initial),offset:He(m.selection,i.scroll.diff.value)}},p=Sa(o.droppables).every(function(X){return!X.isFixedOnPage}),g=Gi({draggable:d,home:u,draggables:o.draggables,viewport:i}),f=g.impact,b=g.afterCritical,y={phase:"DRAGGING",isDragging:!0,critical:s,movementMode:l,dimensions:o,initial:c,current:c,isWindowScrollAllowed:p,impact:f,afterCritical:b,onLiftImpact:f,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null};return y}if(r.type==="COLLECTION_STARTING"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&F();var x=Z({phase:"COLLECTING"},t,{phase:"COLLECTING"});return x}if(r.type==="PUBLISH_WHILE_DRAGGING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"||F(),Ud({state:t,published:r.payload});if(r.type==="MOVE"){if(t.phase==="DROP_PENDING")return t;Ft(t)||F();var w=r.payload.client;return Tt(w,t.current.client.selection)?t:fr({state:t,clientSelection:w,impact:ts(t)?t.impact:null})}if(r.type==="UPDATE_DROPPABLE_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="COLLECTING")return $a(t);Ft(t)||F();var C=r.payload,R=C.id,N=C.newScroll,v=t.dimensions.droppables[R];if(!v)return t;var S=Cs(v,N);return za(t,S,!1)}if(r.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(t.phase==="DROP_PENDING")return t;Ft(t)||F();var I=r.payload,D=I.id,L=I.isEnabled,E=t.dimensions.droppables[D];E||F(),E.isEnabled===L&&F();var $=Z({},E,{isEnabled:L});return za(t,$,!0)}if(r.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(t.phase==="DROP_PENDING")return t;Ft(t)||F();var se=r.payload,k=se.id,M=se.isCombineEnabled,A=t.dimensions.droppables[k];A||F(),A.isCombineEnabled===M&&F();var O=Z({},A,{isCombineEnabled:M});return za(t,O,!0)}if(r.type==="MOVE_BY_WINDOW_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="DROP_ANIMATING")return t;Ft(t)||F(),t.isWindowScrollAllowed||F();var V=r.payload.newScroll;if(Tt(t.viewport.scroll.current,V))return $a(t);var B=Oi(t.viewport,V);return ts(t)?Yi({state:t,viewport:B}):fr({state:t,viewport:B})}if(r.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Ft(t))return t;var z=r.payload.maxScroll;if(Tt(z,t.viewport.scroll.max))return t;var ce=Z({},t.viewport,{scroll:Z({},t.viewport.scroll,{max:z})});return Z({phase:"DRAGGING"},t,{viewport:ce})}if(r.type==="MOVE_UP"||r.type==="MOVE_DOWN"||r.type==="MOVE_LEFT"||r.type==="MOVE_RIGHT"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&F();var me=Cd({state:t,type:r.type});return me?fr({state:t,impact:me.impact,clientSelection:me.clientSelection,scrollJumpRequest:me.scrollJumpRequest}):t}if(r.type==="DROP_PENDING"){var Ne=r.payload.reason;t.phase!=="COLLECTING"&&F();var re=Z({phase:"DROP_PENDING"},t,{phase:"DROP_PENDING",isWaiting:!0,reason:Ne});return re}if(r.type==="DROP_ANIMATE"){var Y=r.payload,we=Y.completed,de=Y.dropDuration,Pe=Y.newHomeClientOffset;t.phase==="DRAGGING"||t.phase==="DROP_PENDING"||F();var j={phase:"DROP_ANIMATING",completed:we,dropDuration:de,newHomeClientOffset:Pe,dimensions:t.dimensions};return j}if(r.type==="DROP_COMPLETE"){var T=r.payload.completed;return{phase:"IDLE",completed:T,shouldFlush:!1}}return t},Wd=function(r){return{type:"BEFORE_INITIAL_CAPTURE",payload:r}},qd=function(r){return{type:"LIFT",payload:r}},Yd=function(r){return{type:"INITIAL_PUBLISH",payload:r}},Gd=function(r){return{type:"PUBLISH_WHILE_DRAGGING",payload:r}},Jd=function(){return{type:"COLLECTION_STARTING",payload:null}},_d=function(r){return{type:"UPDATE_DROPPABLE_SCROLL",payload:r}},Qd=function(r){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:r}},Kd=function(r){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:r}},Ji=function(r){return{type:"MOVE",payload:r}},Zd=function(r){return{type:"MOVE_BY_WINDOW_SCROLL",payload:r}},Xd=function(r){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:r}},eu=function(){return{type:"MOVE_UP",payload:null}},tu=function(){return{type:"MOVE_DOWN",payload:null}},ru=function(){return{type:"MOVE_RIGHT",payload:null}},au=function(){return{type:"MOVE_LEFT",payload:null}},Ps=function(){return{type:"FLUSH",payload:null}},su=function(r){return{type:"DROP_ANIMATE",payload:r}},Ms=function(r){return{type:"DROP_COMPLETE",payload:r}},_i=function(r){return{type:"DROP",payload:r}},nu=function(r){return{type:"DROP_PENDING",payload:r}},Qi=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},iu=function(t){return function(r){var a=r.getState,s=r.dispatch;return function(n){return function(i){if(i.type!=="LIFT"){n(i);return}var o=i.payload,l=o.id,d=o.clientSelection,u=o.movementMode,m=a();m.phase==="DROP_ANIMATING"&&s(Ms({completed:m.completed})),a().phase!=="IDLE"&&F(),s(Ps()),s(Wd({draggableId:l,movementMode:u}));var c={shouldPublishImmediately:u==="SNAP"},p={draggableId:l,scrollOptions:c},g=t.startPublishing(p),f=g.critical,b=g.dimensions,y=g.viewport;s(Yd({critical:f,dimensions:b,clientSelection:d,movementMode:u,viewport:y}))}}}},ou=function(t){return function(){return function(r){return function(a){a.type==="INITIAL_PUBLISH"&&t.dragging(),a.type==="DROP_ANIMATE"&&t.dropping(a.payload.completed.result.reason),(a.type==="FLUSH"||a.type==="DROP_COMPLETE")&&t.resting(),r(a)}}}},Vs={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},jr={opacity:{drop:0,combining:.7},scale:{drop:.75}},Os={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Ot=Os.outOfTheWay+"s "+Vs.outOfTheWay,hr={fluid:"opacity "+Ot,snap:"transform "+Ot+", opacity "+Ot,drop:function(r){var a=r+"s "+Vs.drop;return"transform "+a+", opacity "+a},outOfTheWay:"transform "+Ot,placeholder:"height "+Ot+", width "+Ot+", margin "+Ot},Cn=function(r){return Tt(r,Be)?null:"translate("+r.x+"px, "+r.y+"px)"},rs={moveTo:Cn,drop:function(r,a){var s=Cn(r);return s?a?s+" scale("+jr.scale.drop+")":s:null}},as=Os.minDropTime,Ki=Os.maxDropTime,lu=Ki-as,In=1500,cu=.6,du=function(t){var r=t.current,a=t.destination,s=t.reason,n=vr(r,a);if(n<=0)return as;if(n>=In)return Ki;var i=n/In,o=as+lu*i,l=s==="CANCEL"?o*cu:o;return Number(l.toFixed(2))},uu=function(t){var r=t.impact,a=t.draggable,s=t.dimensions,n=t.viewport,i=t.afterCritical,o=s.draggables,l=s.droppables,d=Ze(r),u=d?l[d]:null,m=l[a.descriptor.droppableId],c=qi({impact:r,draggable:a,draggables:o,afterCritical:i,droppable:u||m,viewport:n}),p=Ke(c,a.client.borderBox.center);return p},mu=function(t){var r=t.draggables,a=t.reason,s=t.lastImpact,n=t.home,i=t.viewport,o=t.onLiftImpact;if(!s.at||a!=="DROP"){var l=Wi({draggables:r,impact:o,destination:n,viewport:i,forceShouldAnimate:!0});return{impact:l,didDropInsideDroppable:!1}}if(s.at.type==="REORDER")return{impact:s,didDropInsideDroppable:!0};var d=Z({},s,{displaced:yr});return{impact:d,didDropInsideDroppable:!0}},pu=function(t){var r=t.getState,a=t.dispatch;return function(s){return function(n){if(n.type!=="DROP"){s(n);return}var i=r(),o=n.payload.reason;if(i.phase==="COLLECTING"){a(nu({reason:o}));return}if(i.phase!=="IDLE"){var l=i.phase==="DROP_PENDING"&&i.isWaiting;l&&F(),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||F();var d=i.critical,u=i.dimensions,m=u.draggables[i.critical.draggable.id],c=mu({reason:o,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),p=c.impact,g=c.didDropInsideDroppable,f=g?ks(p):null,b=g?Ca(p):null,y={index:d.draggable.index,droppableId:d.droppable.id},x={draggableId:m.descriptor.id,type:m.descriptor.type,source:y,reason:o,mode:i.movementMode,destination:f,combine:b},w=uu({impact:p,draggable:m,dimensions:u,viewport:i.viewport,afterCritical:i.afterCritical}),C={critical:i.critical,afterCritical:i.afterCritical,result:x,impact:p},R=!Tt(i.current.client.offset,w)||!!x.combine;if(!R){a(Ms({completed:C}));return}var N=du({current:i.current.client.offset,destination:w,reason:o}),v={newHomeClientOffset:w,dropDuration:N,completed:C};a(su(v))}}}},Zi=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function gu(t){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(a){a.target!==window&&a.target!==window.document||t()}}}function fu(t){var r=t.onWindowScroll;function a(){r(Zi())}var s=br(a),n=gu(s),i=Dt;function o(){return i!==Dt}function l(){o()&&F(),i=st(window,[n])}function d(){o()||F(),s.cancel(),i(),i=Dt}return{start:l,stop:d,isActive:o}}var hu=function(r){return r.type==="DROP_COMPLETE"||r.type==="DROP_ANIMATE"||r.type==="FLUSH"},xu=function(t){var r=fu({onWindowScroll:function(s){t.dispatch(Zd({newScroll:s}))}});return function(a){return function(s){!r.isActive()&&s.type==="INITIAL_PUBLISH"&&r.start(),r.isActive()&&hu(s)&&r.stop(),a(s)}}},bu=function(t){var r=!1,a=!1,s=setTimeout(function(){a=!0}),n=function(o){r||a||(r=!0,t(o),clearTimeout(s))};return n.wasCalled=function(){return r},n},vu=function(){var t=[],r=function(i){var o=Is(t,function(u){return u.timerId===i});o===-1&&F();var l=t.splice(o,1),d=l[0];d.callback()},a=function(i){var o=setTimeout(function(){return r(o)}),l={timerId:o,callback:i};t.push(l)},s=function(){if(t.length){var i=[].concat(t);t.length=0,i.forEach(function(o){clearTimeout(o.timerId),o.callback()})}};return{add:a,flush:s}},yu=function(r,a){return r==null&&a==null?!0:r==null||a==null?!1:r.droppableId===a.droppableId&&r.index===a.index},wu=function(r,a){return r==null&&a==null?!0:r==null||a==null?!1:r.draggableId===a.draggableId&&r.droppableId===a.droppableId},ju=function(r,a){if(r===a)return!0;var s=r.draggable.id===a.draggable.id&&r.draggable.droppableId===a.draggable.droppableId&&r.draggable.type===a.draggable.type&&r.draggable.index===a.draggable.index,n=r.droppable.id===a.droppable.id&&r.droppable.type===a.droppable.type;return s&&n},mr=function(r,a){a()},$r=function(r,a){return{draggableId:r.draggable.id,type:r.droppable.type,source:{droppableId:r.droppable.id,index:r.draggable.index},mode:a}},Ua=function(r,a,s,n){if(!r){s(n(a));return}var i=bu(s),o={announce:i};r(a,o),i.wasCalled()||s(n(a))},Nu=function(t,r){var a=vu(),s=null,n=function(p,g){s&&F(),mr("onBeforeCapture",function(){var f=t().onBeforeCapture;if(f){var b={draggableId:p,mode:g};f(b)}})},i=function(p,g){s&&F(),mr("onBeforeDragStart",function(){var f=t().onBeforeDragStart;f&&f($r(p,g))})},o=function(p,g){s&&F();var f=$r(p,g);s={mode:g,lastCritical:p,lastLocation:f.source,lastCombine:null},a.add(function(){mr("onDragStart",function(){return Ua(t().onDragStart,f,r,Jr.onDragStart)})})},l=function(p,g){var f=ks(g),b=Ca(g);s||F();var y=!ju(p,s.lastCritical);y&&(s.lastCritical=p);var x=!yu(s.lastLocation,f);x&&(s.lastLocation=f);var w=!wu(s.lastCombine,b);if(w&&(s.lastCombine=b),!(!y&&!x&&!w)){var C=Z({},$r(p,s.mode),{combine:b,destination:f});a.add(function(){mr("onDragUpdate",function(){return Ua(t().onDragUpdate,C,r,Jr.onDragUpdate)})})}},d=function(){s||F(),a.flush()},u=function(p){s||F(),s=null,mr("onDragEnd",function(){return Ua(t().onDragEnd,p,r,Jr.onDragEnd)})},m=function(){if(s){var p=Z({},$r(s.lastCritical,s.mode),{combine:null,destination:null,reason:"CANCEL"});u(p)}};return{beforeCapture:n,beforeStart:i,start:o,update:l,flush:d,drop:u,abort:m}},Su=function(t,r){var a=Nu(t,r);return function(s){return function(n){return function(i){if(i.type==="BEFORE_INITIAL_CAPTURE"){a.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(i.type==="INITIAL_PUBLISH"){var o=i.payload.critical;a.beforeStart(o,i.payload.movementMode),n(i),a.start(o,i.payload.movementMode);return}if(i.type==="DROP_COMPLETE"){var l=i.payload.completed.result;a.flush(),n(i),a.drop(l);return}if(n(i),i.type==="FLUSH"){a.abort();return}var d=s.getState();d.phase==="DRAGGING"&&a.update(d.critical,d.impact)}}}},Cu=function(t){return function(r){return function(a){if(a.type!=="DROP_ANIMATION_FINISHED"){r(a);return}var s=t.getState();s.phase!=="DROP_ANIMATING"&&F(),t.dispatch(Ms({completed:s.completed}))}}},Iu=function(t){var r=null,a=null;function s(){a&&(cancelAnimationFrame(a),a=null),r&&(r(),r=null)}return function(n){return function(i){if((i.type==="FLUSH"||i.type==="DROP_COMPLETE"||i.type==="DROP_ANIMATION_FINISHED")&&s(),n(i),i.type==="DROP_ANIMATE"){var o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var d=t.getState();d.phase==="DROP_ANIMATING"&&t.dispatch(Qi())}};a=requestAnimationFrame(function(){a=null,r=st(window,[o])})}}}},ku=function(t){return function(){return function(r){return function(a){(a.type==="DROP_COMPLETE"||a.type==="FLUSH"||a.type==="DROP_ANIMATE")&&t.stopPublishing(),r(a)}}}},Ru=function(t){var r=!1;return function(){return function(a){return function(s){if(s.type==="INITIAL_PUBLISH"){r=!0,t.tryRecordFocus(s.payload.critical.draggable.id),a(s),t.tryRestoreFocusRecorded();return}if(a(s),!!r){if(s.type==="FLUSH"){r=!1,t.tryRestoreFocusRecorded();return}if(s.type==="DROP_COMPLETE"){r=!1;var n=s.payload.completed.result;n.combine&&t.tryShiftRecord(n.draggableId,n.combine.draggableId),t.tryRestoreFocusRecorded()}}}}}},Au=function(r){return r.type==="DROP_COMPLETE"||r.type==="DROP_ANIMATE"||r.type==="FLUSH"},Du=function(t){return function(r){return function(a){return function(s){if(Au(s)){t.stop(),a(s);return}if(s.type==="INITIAL_PUBLISH"){a(s);var n=r.getState();n.phase!=="DRAGGING"&&F(),t.start(n);return}a(s),t.scroll(r.getState())}}}},Tu=function(t){return function(r){return function(a){if(r(a),a.type==="PUBLISH_WHILE_DRAGGING"){var s=t.getState();s.phase==="DROP_PENDING"&&(s.isWaiting||t.dispatch(_i({reason:s.reason})))}}}},Eu=si,Pu=function(t){var r=t.dimensionMarshal,a=t.focusMarshal,s=t.styleMarshal,n=t.getResponders,i=t.announce,o=t.autoScroller;return ai(Hd,Eu(vl(ou(s),ku(r),iu(r),pu,Cu,Iu,Tu,Du(o),xu,Ru(a),Su(n,i))))},Ha=function(){return{additions:{},removals:{},modified:{}}};function Mu(t){var r=t.registry,a=t.callbacks,s=Ha(),n=null,i=function(){n||(a.collectionStarting(),n=requestAnimationFrame(function(){n=null;var m=s,c=m.additions,p=m.removals,g=m.modified,f=Object.keys(c).map(function(x){return r.draggable.getById(x).getDimension(Be)}).sort(function(x,w){return x.descriptor.index-w.descriptor.index}),b=Object.keys(g).map(function(x){var w=r.droppable.getById(x),C=w.callbacks.getScrollWhileDragging();return{droppableId:x,scroll:C}}),y={additions:f,removals:Object.keys(p),modified:b};s=Ha(),a.publish(y)}))},o=function(m){var c=m.descriptor.id;s.additions[c]=m,s.modified[m.descriptor.droppableId]=!0,s.removals[c]&&delete s.removals[c],i()},l=function(m){var c=m.descriptor;s.removals[c.id]=!0,s.modified[c.droppableId]=!0,s.additions[c.id]&&delete s.additions[c.id],i()},d=function(){n&&(cancelAnimationFrame(n),n=null,s=Ha())};return{add:o,remove:l,stop:d}}var Xi=function(t){var r=t.scrollHeight,a=t.scrollWidth,s=t.height,n=t.width,i=Ke({x:a,y:r},{x:n,y:s}),o={x:Math.max(0,i.x),y:Math.max(0,i.y)};return o},eo=function(){var t=document.documentElement;return t||F(),t},to=function(){var t=eo(),r=Xi({scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,width:t.clientWidth,height:t.clientHeight});return r},Vu=function(){var t=Zi(),r=to(),a=t.y,s=t.x,n=eo(),i=n.clientWidth,o=n.clientHeight,l=s+i,d=a+o,u=ct({top:a,left:s,right:l,bottom:d}),m={frame:u,scroll:{initial:t,current:t,max:r,diff:{value:Be,displacement:Be}}};return m},Ou=function(t){var r=t.critical,a=t.scrollOptions,s=t.registry,n=Vu(),i=n.scroll.current,o=r.droppable,l=s.droppable.getAllByType(o.type).map(function(c){return c.callbacks.getDimensionAndWatchScroll(i,a)}),d=s.draggable.getAllByType(r.draggable.type).map(function(c){return c.getDimension(i)}),u={draggables:Di(d),droppables:Ai(l)},m={dimensions:u,critical:r,viewport:n};return m};function kn(t,r,a){if(a.descriptor.id===r.id||a.descriptor.type!==r.type)return!1;var s=t.droppable.getById(a.descriptor.droppableId);return s.descriptor.mode==="virtual"}var Fu=function(t,r){var a=null,s=Mu({callbacks:{publish:r.publishWhileDragging,collectionStarting:r.collectionStarting},registry:t}),n=function(g,f){t.droppable.exists(g)||F(),a&&r.updateDroppableIsEnabled({id:g,isEnabled:f})},i=function(g,f){a&&(t.droppable.exists(g)||F(),r.updateDroppableIsCombineEnabled({id:g,isCombineEnabled:f}))},o=function(g,f){a&&(t.droppable.exists(g)||F(),r.updateDroppableScroll({id:g,newScroll:f}))},l=function(g,f){a&&t.droppable.getById(g).callbacks.scroll(f)},d=function(){if(a){s.stop();var g=a.critical.droppable;t.droppable.getAllByType(g.type).forEach(function(f){return f.callbacks.dragStopped()}),a.unsubscribe(),a=null}},u=function(g){a||F();var f=a.critical.draggable;g.type==="ADDITION"&&kn(t,f,g.value)&&s.add(g.value),g.type==="REMOVAL"&&kn(t,f,g.value)&&s.remove(g.value)},m=function(g){a&&F();var f=t.draggable.getById(g.draggableId),b=t.droppable.getById(f.descriptor.droppableId),y={draggable:f.descriptor,droppable:b.descriptor},x=t.subscribe(u);return a={critical:y,unsubscribe:x},Ou({critical:y,registry:t,scrollOptions:g.scrollOptions})},c={updateDroppableIsEnabled:n,updateDroppableIsCombineEnabled:i,scrollDroppable:l,updateDroppableScroll:o,startPublishing:m,stopPublishing:d};return c},ro=function(t,r){return t.phase==="IDLE"?!0:t.phase!=="DROP_ANIMATING"||t.completed.result.draggableId===r?!1:t.completed.result.reason==="DROP"},Lu=function(t){window.scrollBy(t.x,t.y)},Bu=Le(function(t){return Sa(t).filter(function(r){return!(!r.isEnabled||!r.frame)})}),zu=function(r,a){var s=Vt(Bu(a),function(n){return n.frame||F(),zi(n.frame.pageMarginBox)(r)});return s},$u=function(t){var r=t.center,a=t.destination,s=t.droppables;if(a){var n=s[a];return n.frame?n:null}var i=zu(r,s);return i},Et={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(r){return Math.pow(r,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},Uu=function(t,r){var a=t[r.size]*Et.startFromPercentage,s=t[r.size]*Et.maxScrollAtPercentage,n={startScrollingFrom:a,maxScrollValueAt:s};return n},ao=function(t){var r=t.startOfRange,a=t.endOfRange,s=t.current,n=a-r;if(n===0)return 0;var i=s-r,o=i/n;return o},Fs=1,Hu=function(t,r){if(t>r.startScrollingFrom)return 0;if(t<=r.maxScrollValueAt)return Et.maxPixelScroll;if(t===r.startScrollingFrom)return Fs;var a=ao({startOfRange:r.maxScrollValueAt,endOfRange:r.startScrollingFrom,current:t}),s=1-a,n=Et.maxPixelScroll*Et.ease(s);return Math.ceil(n)},Rn=Et.durationDampening.accelerateAt,An=Et.durationDampening.stopDampeningAt,Wu=function(t,r){var a=r,s=An,n=Date.now(),i=n-a;if(i>=An)return t;if(i<Rn)return Fs;var o=ao({startOfRange:Rn,endOfRange:s,current:i}),l=t*Et.ease(o);return Math.ceil(l)},Dn=function(t){var r=t.distanceToEdge,a=t.thresholds,s=t.dragStartTime,n=t.shouldUseTimeDampening,i=Hu(r,a);return i===0?0:n?Math.max(Wu(i,s),Fs):i},Tn=function(t){var r=t.container,a=t.distanceToEdges,s=t.dragStartTime,n=t.axis,i=t.shouldUseTimeDampening,o=Uu(r,n),l=a[n.end]<a[n.start];return l?Dn({distanceToEdge:a[n.end],thresholds:o,dragStartTime:s,shouldUseTimeDampening:i}):-1*Dn({distanceToEdge:a[n.start],thresholds:o,dragStartTime:s,shouldUseTimeDampening:i})},qu=function(t){var r=t.container,a=t.subject,s=t.proposedScroll,n=a.height>r.height,i=a.width>r.width;return!i&&!n?s:i&&n?null:{x:i?0:s.x,y:n?0:s.y}},Yu=ki(function(t){return t===0?0:t}),so=function(t){var r=t.dragStartTime,a=t.container,s=t.subject,n=t.center,i=t.shouldUseTimeDampening,o={top:n.y-a.top,right:a.right-n.x,bottom:a.bottom-n.y,left:n.x-a.left},l=Tn({container:a,distanceToEdges:o,dragStartTime:r,axis:Rs,shouldUseTimeDampening:i}),d=Tn({container:a,distanceToEdges:o,dragStartTime:r,axis:Pi,shouldUseTimeDampening:i}),u=Yu({x:d,y:l});if(Tt(u,Be))return null;var m=qu({container:a,subject:s,proposedScroll:u});return m?Tt(m,Be)?null:m:null},Gu=ki(function(t){return t===0?0:t>0?1:-1}),Ls=function(){var t=function(a,s){return a<0?a:a>s?a-s:0};return function(r){var a=r.current,s=r.max,n=r.change,i=He(a,n),o={x:t(i.x,s.x),y:t(i.y,s.y)};return Tt(o,Be)?null:o}}(),no=function(r){var a=r.max,s=r.current,n=r.change,i={x:Math.max(s.x,a.x),y:Math.max(s.y,a.y)},o=Gu(n),l=Ls({max:i,current:s,change:o});return!l||o.x!==0&&l.x===0||o.y!==0&&l.y===0},Bs=function(r,a){return no({current:r.scroll.current,max:r.scroll.max,change:a})},Ju=function(r,a){if(!Bs(r,a))return null;var s=r.scroll.max,n=r.scroll.current;return Ls({current:n,max:s,change:a})},zs=function(r,a){var s=r.frame;return s?no({current:s.scroll.current,max:s.scroll.max,change:a}):!1},_u=function(r,a){var s=r.frame;return!s||!zs(r,a)?null:Ls({current:s.scroll.current,max:s.scroll.max,change:a})},Qu=function(t){var r=t.viewport,a=t.subject,s=t.center,n=t.dragStartTime,i=t.shouldUseTimeDampening,o=so({dragStartTime:n,container:r.frame,subject:a,center:s,shouldUseTimeDampening:i});return o&&Bs(r,o)?o:null},Ku=function(t){var r=t.droppable,a=t.subject,s=t.center,n=t.dragStartTime,i=t.shouldUseTimeDampening,o=r.frame;if(!o)return null;var l=so({dragStartTime:n,container:o.pageMarginBox,subject:a,center:s,shouldUseTimeDampening:i});return l&&zs(r,l)?l:null},En=function(t){var r=t.state,a=t.dragStartTime,s=t.shouldUseTimeDampening,n=t.scrollWindow,i=t.scrollDroppable,o=r.current.page.borderBoxCenter,l=r.dimensions.draggables[r.critical.draggable.id],d=l.page.marginBox;if(r.isWindowScrollAllowed){var u=r.viewport,m=Qu({dragStartTime:a,viewport:u,subject:d,center:o,shouldUseTimeDampening:s});if(m){n(m);return}}var c=$u({center:o,destination:Ze(r.impact),droppables:r.dimensions.droppables});if(c){var p=Ku({dragStartTime:a,droppable:c,subject:d,center:o,shouldUseTimeDampening:s});p&&i(c.descriptor.id,p)}},Zu=function(t){var r=t.scrollWindow,a=t.scrollDroppable,s=br(r),n=br(a),i=null,o=function(m){i||F();var c=i,p=c.shouldUseTimeDampening,g=c.dragStartTime;En({state:m,scrollWindow:s,scrollDroppable:n,dragStartTime:g,shouldUseTimeDampening:p})},l=function(m){i&&F();var c=Date.now(),p=!1,g=function(){p=!0};En({state:m,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:g,scrollDroppable:g}),i={dragStartTime:c,shouldUseTimeDampening:p},p&&o(m)},d=function(){i&&(s.cancel(),n.cancel(),i=null)};return{start:l,stop:d,scroll:o}},Xu=function(t){var r=t.move,a=t.scrollDroppable,s=t.scrollWindow,n=function(u,m){var c=He(u.current.client.selection,m);r({client:c})},i=function(u,m){if(!zs(u,m))return m;var c=_u(u,m);if(!c)return a(u.descriptor.id,m),null;var p=Ke(m,c);a(u.descriptor.id,p);var g=Ke(m,p);return g},o=function(u,m,c){if(!u||!Bs(m,c))return c;var p=Ju(m,c);if(!p)return s(c),null;var g=Ke(c,p);s(g);var f=Ke(c,g);return f},l=function(u){var m=u.scrollJumpRequest;if(m){var c=Ze(u.impact);c||F();var p=i(u.dimensions.droppables[c],m);if(p){var g=u.viewport,f=o(u.isWindowScrollAllowed,g,p);f&&n(u,f)}}};return l},em=function(t){var r=t.scrollDroppable,a=t.scrollWindow,s=t.move,n=Zu({scrollWindow:a,scrollDroppable:r}),i=Xu({move:s,scrollWindow:a,scrollDroppable:r}),o=function(u){if(u.phase==="DRAGGING"){if(u.movementMode==="FLUID"){n.scroll(u);return}u.scrollJumpRequest&&i(u)}},l={scroll:o,start:n.start,stop:n.stop};return l},nr="data-rbd",ir=function(){var t=nr+"-drag-handle";return{base:t,draggableId:t+"-draggable-id",contextId:t+"-context-id"}}(),ss=function(){var t=nr+"-draggable";return{base:t,contextId:t+"-context-id",id:t+"-id"}}(),tm=function(){var t=nr+"-droppable";return{base:t,contextId:t+"-context-id",id:t+"-id"}}(),Pn={contextId:nr+"-scroll-container-context-id"},rm=function(r){return function(a){return"["+a+'="'+r+'"]'}},pr=function(r,a){return r.map(function(s){var n=s.styles[a];return n?s.selector+" { "+n+" }":""}).join(" ")},am="pointer-events: none;",sm=function(t){var r=rm(t),a=function(){var l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:r(ir.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:am,dropAnimating:l}}}(),s=function(){var l=`
      transition: `+hr.outOfTheWay+`;
    `;return{selector:r(ss.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}}(),n={selector:r(tm.contextId),styles:{always:"overflow-anchor: none;"}},i={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},o=[s,a,n,i];return{always:pr(o,"always"),resting:pr(o,"resting"),dragging:pr(o,"dragging"),dropAnimating:pr(o,"dropAnimating"),userCancel:pr(o,"userCancel")}},Xe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?h.useLayoutEffect:h.useEffect,Wa=function(){var r=document.querySelector("head");return r||F(),r},Mn=function(r){var a=document.createElement("style");return r&&a.setAttribute("nonce",r),a.type="text/css",a};function nm(t,r){var a=je(function(){return sm(t)},[t]),s=h.useRef(null),n=h.useRef(null),i=G(Le(function(c){var p=n.current;p||F(),p.textContent=c}),[]),o=G(function(c){var p=s.current;p||F(),p.textContent=c},[]);Xe(function(){!s.current&&!n.current||F();var c=Mn(r),p=Mn(r);return s.current=c,n.current=p,c.setAttribute(nr+"-always",t),p.setAttribute(nr+"-dynamic",t),Wa().appendChild(c),Wa().appendChild(p),o(a.always),i(a.resting),function(){var g=function(b){var y=b.current;y||F(),Wa().removeChild(y),b.current=null};g(s),g(n)}},[r,o,i,a.always,a.resting,t]);var l=G(function(){return i(a.dragging)},[i,a.dragging]),d=G(function(c){if(c==="DROP"){i(a.dropAnimating);return}i(a.userCancel)},[i,a.dropAnimating,a.userCancel]),u=G(function(){n.current&&i(a.resting)},[i,a.resting]),m=je(function(){return{dragging:l,dropping:d,resting:u}},[l,d,u]);return m}var io=function(t){return t&&t.ownerDocument?t.ownerDocument.defaultView:window};function Ra(t){return t instanceof io(t).HTMLElement}function im(t,r){var a="["+ir.contextId+'="'+t+'"]',s=Ri(document.querySelectorAll(a));if(!s.length)return null;var n=Vt(s,function(i){return i.getAttribute(ir.draggableId)===r});return!n||!Ra(n)?null:n}function om(t){var r=h.useRef({}),a=h.useRef(null),s=h.useRef(null),n=h.useRef(!1),i=G(function(p,g){var f={id:p,focus:g};return r.current[p]=f,function(){var y=r.current,x=y[p];x!==f&&delete y[p]}},[]),o=G(function(p){var g=im(t,p);g&&g!==document.activeElement&&g.focus()},[t]),l=G(function(p,g){a.current===p&&(a.current=g)},[]),d=G(function(){s.current||n.current&&(s.current=requestAnimationFrame(function(){s.current=null;var p=a.current;p&&o(p)}))},[o]),u=G(function(p){a.current=null;var g=document.activeElement;g&&g.getAttribute(ir.draggableId)===p&&(a.current=p)},[]);Xe(function(){return n.current=!0,function(){n.current=!1;var p=s.current;p&&cancelAnimationFrame(p)}},[]);var m=je(function(){return{register:i,tryRecordFocus:u,tryRestoreFocusRecorded:d,tryShiftRecord:l}},[i,u,d,l]);return m}function lm(){var t={draggables:{},droppables:{}},r=[];function a(c){return r.push(c),function(){var g=r.indexOf(c);g!==-1&&r.splice(g,1)}}function s(c){r.length&&r.forEach(function(p){return p(c)})}function n(c){return t.draggables[c]||null}function i(c){var p=n(c);return p||F(),p}var o={register:function(p){t.draggables[p.descriptor.id]=p,s({type:"ADDITION",value:p})},update:function(p,g){var f=t.draggables[g.descriptor.id];f&&f.uniqueId===p.uniqueId&&(delete t.draggables[g.descriptor.id],t.draggables[p.descriptor.id]=p)},unregister:function(p){var g=p.descriptor.id,f=n(g);f&&p.uniqueId===f.uniqueId&&(delete t.draggables[g],s({type:"REMOVAL",value:p}))},getById:i,findById:n,exists:function(p){return!!n(p)},getAllByType:function(p){return ta(t.draggables).filter(function(g){return g.descriptor.type===p})}};function l(c){return t.droppables[c]||null}function d(c){var p=l(c);return p||F(),p}var u={register:function(p){t.droppables[p.descriptor.id]=p},unregister:function(p){var g=l(p.descriptor.id);g&&p.uniqueId===g.uniqueId&&delete t.droppables[p.descriptor.id]},getById:d,findById:l,exists:function(p){return!!l(p)},getAllByType:function(p){return ta(t.droppables).filter(function(g){return g.descriptor.type===p})}};function m(){t.draggables={},t.droppables={},r.length=0}return{draggable:o,droppable:u,subscribe:a,clean:m}}function cm(){var t=je(lm,[]);return h.useEffect(function(){return function(){requestAnimationFrame(t.clean)}},[t]),t}var $s=Ce.createContext(null),aa=function(){var t=document.body;return t||F(),t},dm={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},um=function(r){return"rbd-announcement-"+r};function mm(t){var r=je(function(){return um(t)},[t]),a=h.useRef(null);h.useEffect(function(){var i=document.createElement("div");return a.current=i,i.id=r,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),Z(i.style,dm),aa().appendChild(i),function(){setTimeout(function(){var d=aa();d.contains(i)&&d.removeChild(i),i===a.current&&(a.current=null)})}},[r]);var s=G(function(n){var i=a.current;if(i){i.textContent=n;return}},[]);return s}var pm=0,gm={separator:"::"};function Us(t,r){return r===void 0&&(r=gm),je(function(){return""+t+r.separator+pm++},[r.separator,t])}function fm(t){var r=t.contextId,a=t.uniqueId;return"rbd-hidden-text-"+r+"-"+a}function hm(t){var r=t.contextId,a=t.text,s=Us("hidden-text",{separator:"-"}),n=je(function(){return fm({contextId:r,uniqueId:s})},[s,r]);return h.useEffect(function(){var o=document.createElement("div");return o.id=n,o.textContent=a,o.style.display="none",aa().appendChild(o),function(){var d=aa();d.contains(o)&&d.removeChild(o)}},[n,a]),n}var Aa=Ce.createContext(null);function oo(t){var r=h.useRef(t);return h.useEffect(function(){r.current=t}),r}function xm(){var t=null;function r(){return!!t}function a(o){return o===t}function s(o){t&&F();var l={abandon:o};return t=l,l}function n(){t||F(),t=null}function i(){t&&(t.abandon(),n())}return{isClaimed:r,isActive:a,claim:s,release:n,tryAbandon:i}}var bm=9,vm=13,Hs=27,lo=32,ym=33,wm=34,jm=35,Nm=36,Sm=37,Cm=38,Im=39,km=40,Ur,Rm=(Ur={},Ur[vm]=!0,Ur[bm]=!0,Ur),co=function(t){Rm[t.keyCode]&&t.preventDefault()},Da=function(){var t="visibilitychange";if(typeof document>"u")return t;var r=[t,"ms"+t,"webkit"+t,"moz"+t,"o"+t],a=Vt(r,function(s){return"on"+s in document});return a||t}(),uo=0,Vn=5;function Am(t,r){return Math.abs(r.x-t.x)>=Vn||Math.abs(r.y-t.y)>=Vn}var On={type:"IDLE"};function Dm(t){var r=t.cancel,a=t.completed,s=t.getPhase,n=t.setPhase;return[{eventName:"mousemove",fn:function(o){var l=o.button,d=o.clientX,u=o.clientY;if(l===uo){var m={x:d,y:u},c=s();if(c.type==="DRAGGING"){o.preventDefault(),c.actions.move(m);return}c.type!=="PENDING"&&F();var p=c.point;if(Am(p,m)){o.preventDefault();var g=c.actions.fluidLift(m);n({type:"DRAGGING",actions:g})}}}},{eventName:"mouseup",fn:function(o){var l=s();if(l.type!=="DRAGGING"){r();return}o.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),a()}},{eventName:"mousedown",fn:function(o){s().type==="DRAGGING"&&o.preventDefault(),r()}},{eventName:"keydown",fn:function(o){var l=s();if(l.type==="PENDING"){r();return}if(o.keyCode===Hs){o.preventDefault(),r();return}co(o)}},{eventName:"resize",fn:r},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){s().type==="PENDING"&&r()}},{eventName:"webkitmouseforcedown",fn:function(o){var l=s();if(l.type==="IDLE"&&F(),l.actions.shouldRespectForcePress()){r();return}o.preventDefault()}},{eventName:Da,fn:r}]}function Tm(t){var r=h.useRef(On),a=h.useRef(Dt),s=je(function(){return{eventName:"mousedown",fn:function(c){if(!c.defaultPrevented&&c.button===uo&&!(c.ctrlKey||c.metaKey||c.shiftKey||c.altKey)){var p=t.findClosestDraggableId(c);if(p){var g=t.tryGetLock(p,o,{sourceEvent:c});if(g){c.preventDefault();var f={x:c.clientX,y:c.clientY};a.current(),u(g,f)}}}}}},[t]),n=je(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(c){if(!c.defaultPrevented){var p=t.findClosestDraggableId(c);if(p){var g=t.findOptionsForDraggable(p);g&&(g.shouldRespectForcePress||t.canGetLock(p)&&c.preventDefault())}}}}},[t]),i=G(function(){var c={passive:!1,capture:!0};a.current=st(window,[n,s],c)},[n,s]),o=G(function(){var m=r.current;m.type!=="IDLE"&&(r.current=On,a.current(),i())},[i]),l=G(function(){var m=r.current;o(),m.type==="DRAGGING"&&m.actions.cancel({shouldBlockNextClick:!0}),m.type==="PENDING"&&m.actions.abort()},[o]),d=G(function(){var c={capture:!0,passive:!1},p=Dm({cancel:l,completed:o,getPhase:function(){return r.current},setPhase:function(f){r.current=f}});a.current=st(window,p,c)},[l,o]),u=G(function(c,p){r.current.type!=="IDLE"&&F(),r.current={type:"PENDING",point:p,actions:c},d()},[d]);Xe(function(){return i(),function(){a.current()}},[i])}var _t;function Em(){}var Pm=(_t={},_t[wm]=!0,_t[ym]=!0,_t[Nm]=!0,_t[jm]=!0,_t);function Mm(t,r){function a(){r(),t.cancel()}function s(){r(),t.drop()}return[{eventName:"keydown",fn:function(i){if(i.keyCode===Hs){i.preventDefault(),a();return}if(i.keyCode===lo){i.preventDefault(),s();return}if(i.keyCode===km){i.preventDefault(),t.moveDown();return}if(i.keyCode===Cm){i.preventDefault(),t.moveUp();return}if(i.keyCode===Im){i.preventDefault(),t.moveRight();return}if(i.keyCode===Sm){i.preventDefault(),t.moveLeft();return}if(Pm[i.keyCode]){i.preventDefault();return}co(i)}},{eventName:"mousedown",fn:a},{eventName:"mouseup",fn:a},{eventName:"click",fn:a},{eventName:"touchstart",fn:a},{eventName:"resize",fn:a},{eventName:"wheel",fn:a,options:{passive:!0}},{eventName:Da,fn:a}]}function Vm(t){var r=h.useRef(Em),a=je(function(){return{eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==lo)return;var o=t.findClosestDraggableId(i);if(!o)return;var l=t.tryGetLock(o,m,{sourceEvent:i});if(!l)return;i.preventDefault();var d=!0,u=l.snapLift();r.current();function m(){d||F(),d=!1,r.current(),s()}r.current=st(window,Mm(u,m),{capture:!0,passive:!1})}}},[t]),s=G(function(){var i={passive:!1,capture:!0};r.current=st(window,[a],i)},[a]);Xe(function(){return s(),function(){r.current()}},[s])}var qa={type:"IDLE"},Om=120,Fm=.15;function Lm(t){var r=t.cancel,a=t.getPhase;return[{eventName:"orientationchange",fn:r},{eventName:"resize",fn:r},{eventName:"contextmenu",fn:function(n){n.preventDefault()}},{eventName:"keydown",fn:function(n){if(a().type!=="DRAGGING"){r();return}n.keyCode===Hs&&n.preventDefault(),r()}},{eventName:Da,fn:r}]}function Bm(t){var r=t.cancel,a=t.completed,s=t.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(i){var o=s();if(o.type!=="DRAGGING"){r();return}o.hasMoved=!0;var l=i.touches[0],d=l.clientX,u=l.clientY,m={x:d,y:u};i.preventDefault(),o.actions.move(m)}},{eventName:"touchend",fn:function(i){var o=s();if(o.type!=="DRAGGING"){r();return}i.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),a()}},{eventName:"touchcancel",fn:function(i){if(s().type!=="DRAGGING"){r();return}i.preventDefault(),r()}},{eventName:"touchforcechange",fn:function(i){var o=s();o.type==="IDLE"&&F();var l=i.touches[0];if(l){var d=l.force>=Fm;if(d){var u=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){u&&r();return}if(u){if(o.hasMoved){i.preventDefault();return}r();return}i.preventDefault()}}}},{eventName:Da,fn:r}]}function zm(t){var r=h.useRef(qa),a=h.useRef(Dt),s=G(function(){return r.current},[]),n=G(function(g){r.current=g},[]),i=je(function(){return{eventName:"touchstart",fn:function(g){if(!g.defaultPrevented){var f=t.findClosestDraggableId(g);if(f){var b=t.tryGetLock(f,l,{sourceEvent:g});if(b){var y=g.touches[0],x=y.clientX,w=y.clientY,C={x,y:w};a.current(),c(b,C)}}}}}},[t]),o=G(function(){var g={capture:!0,passive:!1};a.current=st(window,[i],g)},[i]),l=G(function(){var p=r.current;p.type!=="IDLE"&&(p.type==="PENDING"&&clearTimeout(p.longPressTimerId),n(qa),a.current(),o())},[o,n]),d=G(function(){var p=r.current;l(),p.type==="DRAGGING"&&p.actions.cancel({shouldBlockNextClick:!0}),p.type==="PENDING"&&p.actions.abort()},[l]),u=G(function(){var g={capture:!0,passive:!1},f={cancel:d,completed:l,getPhase:s},b=st(window,Bm(f),g),y=st(window,Lm(f),g);a.current=function(){b(),y()}},[d,s,l]),m=G(function(){var g=s();g.type!=="PENDING"&&F();var f=g.actions.fluidLift(g.point);n({type:"DRAGGING",actions:f,hasMoved:!1})},[s,n]),c=G(function(g,f){s().type!=="IDLE"&&F();var b=setTimeout(m,Om);n({type:"PENDING",point:f,actions:g,longPressTimerId:b}),u()},[u,s,n,m]);Xe(function(){return o(),function(){a.current();var f=s();f.type==="PENDING"&&(clearTimeout(f.longPressTimerId),n(qa))}},[s,o,n]),Xe(function(){var g=st(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return g},[])}var $m={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function mo(t,r){if(r==null)return!1;var a=!!$m[r.tagName.toLowerCase()];if(a)return!0;var s=r.getAttribute("contenteditable");return s==="true"||s===""?!0:r===t?!1:mo(t,r.parentElement)}function Um(t,r){var a=r.target;return Ra(a)?mo(t,a):!1}var Hm=function(t){return ct(t.getBoundingClientRect()).center};function Wm(t){return t instanceof io(t).Element}var qm=function(){var t="matches";if(typeof document>"u")return t;var r=[t,"msMatchesSelector","webkitMatchesSelector"],a=Vt(r,function(s){return s in Element.prototype});return a||t}();function po(t,r){return t==null?null:t[qm](r)?t:po(t.parentElement,r)}function Ym(t,r){return t.closest?t.closest(r):po(t,r)}function Gm(t){return"["+ir.contextId+'="'+t+'"]'}function Jm(t,r){var a=r.target;if(!Wm(a))return null;var s=Gm(t),n=Ym(a,s);return!n||!Ra(n)?null:n}function _m(t,r){var a=Jm(t,r);return a?a.getAttribute(ir.draggableId):null}function Qm(t,r){var a="["+ss.contextId+'="'+t+'"]',s=Ri(document.querySelectorAll(a)),n=Vt(s,function(i){return i.getAttribute(ss.id)===r});return!n||!Ra(n)?null:n}function Km(t){t.preventDefault()}function Hr(t){var r=t.expected,a=t.phase,s=t.isLockActive;return t.shouldWarn,!(!s()||r!==a)}function go(t){var r=t.lockAPI,a=t.store,s=t.registry,n=t.draggableId;if(r.isClaimed())return!1;var i=s.draggable.findById(n);return!(!i||!i.options.isEnabled||!ro(a.getState(),n))}function Zm(t){var r=t.lockAPI,a=t.contextId,s=t.store,n=t.registry,i=t.draggableId,o=t.forceSensorStop,l=t.sourceEvent,d=go({lockAPI:r,store:s,registry:n,draggableId:i});if(!d)return null;var u=n.draggable.getById(i),m=Qm(a,u.descriptor.id);if(!m||l&&!u.options.canDragInteractiveElements&&Um(m,l))return null;var c=r.claim(o||Dt),p="PRE_DRAG";function g(){return u.options.shouldRespectForcePress}function f(){return r.isActive(c)}function b(v,S){Hr({expected:v,phase:p,isLockActive:f,shouldWarn:!0})&&s.dispatch(S())}var y=b.bind(null,"DRAGGING");function x(v){function S(){r.release(),p="COMPLETED"}p!=="PRE_DRAG"&&(S(),p!=="PRE_DRAG"&&F()),s.dispatch(qd(v.liftActionArgs)),p="DRAGGING";function I(D,L){if(L===void 0&&(L={shouldBlockNextClick:!1}),v.cleanup(),L.shouldBlockNextClick){var E=st(window,[{eventName:"click",fn:Km,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(E)}S(),s.dispatch(_i({reason:D}))}return Z({isActive:function(){return Hr({expected:"DRAGGING",phase:p,isLockActive:f,shouldWarn:!1})},shouldRespectForcePress:g,drop:function(L){return I("DROP",L)},cancel:function(L){return I("CANCEL",L)}},v.actions)}function w(v){var S=br(function(D){y(function(){return Ji({client:D})})}),I=x({liftActionArgs:{id:i,clientSelection:v,movementMode:"FLUID"},cleanup:function(){return S.cancel()},actions:{move:S}});return Z({},I,{move:S})}function C(){var v={moveUp:function(){return y(eu)},moveRight:function(){return y(ru)},moveDown:function(){return y(tu)},moveLeft:function(){return y(au)}};return x({liftActionArgs:{id:i,clientSelection:Hm(m),movementMode:"SNAP"},cleanup:Dt,actions:v})}function R(){var v=Hr({expected:"PRE_DRAG",phase:p,isLockActive:f,shouldWarn:!0});v&&r.release()}var N={isActive:function(){return Hr({expected:"PRE_DRAG",phase:p,isLockActive:f,shouldWarn:!1})},shouldRespectForcePress:g,fluidLift:w,snapLift:C,abort:R};return N}var Xm=[Tm,Vm,zm];function ep(t){var r=t.contextId,a=t.store,s=t.registry,n=t.customSensors,i=t.enableDefaultSensors,o=[].concat(i?Xm:[],n||[]),l=h.useState(function(){return xm()})[0],d=G(function(w,C){w.isDragging&&!C.isDragging&&l.tryAbandon()},[l]);Xe(function(){var w=a.getState(),C=a.subscribe(function(){var R=a.getState();d(w,R),w=R});return C},[l,a,d]),Xe(function(){return l.tryAbandon},[l.tryAbandon]);for(var u=G(function(x){return go({lockAPI:l,registry:s,store:a,draggableId:x})},[l,s,a]),m=G(function(x,w,C){return Zm({lockAPI:l,registry:s,contextId:r,store:a,draggableId:x,forceSensorStop:w,sourceEvent:C&&C.sourceEvent?C.sourceEvent:null})},[r,l,s,a]),c=G(function(x){return _m(r,x)},[r]),p=G(function(x){var w=s.draggable.findById(x);return w?w.options:null},[s.draggable]),g=G(function(){l.isClaimed()&&(l.tryAbandon(),a.getState().phase!=="IDLE"&&a.dispatch(Ps()))},[l,a]),f=G(l.isClaimed,[l]),b=je(function(){return{canGetLock:u,tryGetLock:m,findClosestDraggableId:c,findOptionsForDraggable:p,tryReleaseLock:g,isLockClaimed:f}},[u,m,c,p,g,f]),y=0;y<o.length;y++)o[y](b)}var tp=function(r){return{onBeforeCapture:r.onBeforeCapture,onBeforeDragStart:r.onBeforeDragStart,onDragStart:r.onDragStart,onDragEnd:r.onDragEnd,onDragUpdate:r.onDragUpdate}};function gr(t){return t.current||F(),t.current}function rp(t){var r=t.contextId,a=t.setCallbacks,s=t.sensors,n=t.nonce,i=t.dragHandleUsageInstructions,o=h.useRef(null),l=oo(t),d=G(function(){return tp(l.current)},[l]),u=mm(r),m=hm({contextId:r,text:i}),c=nm(r,n),p=G(function(D){gr(o).dispatch(D)},[]),g=je(function(){return sn({publishWhileDragging:Gd,updateDroppableScroll:_d,updateDroppableIsEnabled:Qd,updateDroppableIsCombineEnabled:Kd,collectionStarting:Jd},p)},[p]),f=cm(),b=je(function(){return Fu(f,g)},[f,g]),y=je(function(){return em(Z({scrollWindow:Lu,scrollDroppable:b.scrollDroppable},sn({move:Ji},p)))},[b.scrollDroppable,p]),x=om(r),w=je(function(){return Pu({announce:u,autoScroller:y,dimensionMarshal:b,focusMarshal:x,getResponders:d,styleMarshal:c})},[u,y,b,x,d,c]);o.current=w;var C=G(function(){var D=gr(o),L=D.getState();L.phase!=="IDLE"&&D.dispatch(Ps())},[]),R=G(function(){var D=gr(o).getState();return D.isDragging||D.phase==="DROP_ANIMATING"},[]),N=je(function(){return{isDragging:R,tryAbort:C}},[R,C]);a(N);var v=G(function(D){return ro(gr(o).getState(),D)},[]),S=G(function(){return Ft(gr(o).getState())},[]),I=je(function(){return{marshal:b,focus:x,contextId:r,canLift:v,isMovementAllowed:S,dragHandleUsageInstructionsId:m,registry:f}},[r,b,m,x,v,S,f]);return ep({contextId:r,store:w,registry:f,customSensors:s,enableDefaultSensors:t.enableDefaultSensors!==!1}),h.useEffect(function(){return C},[C]),Ce.createElement(Aa.Provider,{value:I},Ce.createElement(Sl,{context:$s,store:w},t.children))}var ap=0;function sp(){return je(function(){return""+ap++},[])}function np(t){var r=sp(),a=t.dragHandleUsageInstructions||Jr.dragHandleUsageInstructions;return Ce.createElement(Vc,null,function(s){return Ce.createElement(rp,{nonce:t.nonce,contextId:r,setCallbacks:s,dragHandleUsageInstructions:a,enableDefaultSensors:t.enableDefaultSensors,sensors:t.sensors,onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragUpdate:t.onDragUpdate,onDragEnd:t.onDragEnd},t.children)})}var fo=function(r){return function(a){return r===a}},ip=fo("scroll"),op=fo("auto"),Fn=function(r,a){return a(r.overflowX)||a(r.overflowY)},lp=function(r){var a=window.getComputedStyle(r),s={overflowX:a.overflowX,overflowY:a.overflowY};return Fn(s,ip)||Fn(s,op)},cp=function(){return!1},dp=function t(r){return r==null?null:r===document.body?cp()?r:null:r===document.documentElement?null:lp(r)?r:t(r.parentElement)},ns=function(t){return{x:t.scrollLeft,y:t.scrollTop}},up=function t(r){if(!r)return!1;var a=window.getComputedStyle(r);return a.position==="fixed"?!0:t(r.parentElement)},mp=function(t){var r=dp(t),a=up(t);return{closestScrollable:r,isFixedOnPage:a}},pp=function(t){var r=t.descriptor,a=t.isEnabled,s=t.isCombineEnabled,n=t.isFixedOnPage,i=t.direction,o=t.client,l=t.page,d=t.closest,u=function(){if(!d)return null;var g=d.scrollSize,f=d.client,b=Xi({scrollHeight:g.scrollHeight,scrollWidth:g.scrollWidth,height:f.paddingBox.height,width:f.paddingBox.width});return{pageMarginBox:d.page.marginBox,frameClient:f,scrollSize:g,shouldClipSubject:d.shouldClipSubject,scroll:{initial:d.scroll,current:d.scroll,max:b,diff:{value:Be,displacement:Be}}}}(),m=i==="vertical"?Rs:Pi,c=sr({page:l,withPlaceholder:null,axis:m,frame:u}),p={descriptor:r,isCombineEnabled:s,isFixedOnPage:n,axis:m,isEnabled:a,client:o,page:l,frame:u,subject:c};return p},gp=function(r,a){var s=Ni(r);if(!a||r!==a)return s;var n=s.paddingBox.top-a.scrollTop,i=s.paddingBox.left-a.scrollLeft,o=n+a.scrollHeight,l=i+a.scrollWidth,d={top:n,right:l,bottom:o,left:i},u=Ns(d,s.border),m=Ss({borderBox:u,margin:s.margin,border:s.border,padding:s.padding});return m},fp=function(t){var r=t.ref,a=t.descriptor,s=t.env,n=t.windowScroll,i=t.direction,o=t.isDropDisabled,l=t.isCombineEnabled,d=t.shouldClipSubject,u=s.closestScrollable,m=gp(r,u),c=Zr(m,n),p=function(){if(!u)return null;var f=Ni(u),b={scrollHeight:u.scrollHeight,scrollWidth:u.scrollWidth};return{client:f,page:Zr(f,n),scroll:ns(u),scrollSize:b,shouldClipSubject:d}}(),g=pp({descriptor:a,isEnabled:!o,isCombineEnabled:l,isFixedOnPage:s.isFixedOnPage,direction:i,client:m,page:c,closest:p});return g},hp={passive:!1},xp={passive:!0},Ln=function(t){return t.shouldPublishImmediately?hp:xp};function sa(t){var r=h.useContext(t);return r||F(),r}var Wr=function(r){return r&&r.env.closestScrollable||null};function bp(t){var r=h.useRef(null),a=sa(Aa),s=Us("droppable"),n=a.registry,i=a.marshal,o=oo(t),l=je(function(){return{id:t.droppableId,type:t.type,mode:t.mode}},[t.droppableId,t.mode,t.type]),d=h.useRef(l),u=je(function(){return Le(function(R,N){r.current||F();var v={x:R,y:N};i.updateDroppableScroll(l.id,v)})},[l.id,i]),m=G(function(){var R=r.current;return!R||!R.env.closestScrollable?Be:ns(R.env.closestScrollable)},[]),c=G(function(){var R=m();u(R.x,R.y)},[m,u]),p=je(function(){return br(c)},[c]),g=G(function(){var R=r.current,N=Wr(R);R&&N||F();var v=R.scrollOptions;if(v.shouldPublishImmediately){c();return}p()},[p,c]),f=G(function(R,N){r.current&&F();var v=o.current,S=v.getDroppableRef();S||F();var I=mp(S),D={ref:S,descriptor:l,env:I,scrollOptions:N};r.current=D;var L=fp({ref:S,descriptor:l,env:I,windowScroll:R,direction:v.direction,isDropDisabled:v.isDropDisabled,isCombineEnabled:v.isCombineEnabled,shouldClipSubject:!v.ignoreContainerClipping}),E=I.closestScrollable;return E&&(E.setAttribute(Pn.contextId,a.contextId),E.addEventListener("scroll",g,Ln(D.scrollOptions))),L},[a.contextId,l,g,o]),b=G(function(){var R=r.current,N=Wr(R);return R&&N||F(),ns(N)},[]),y=G(function(){var R=r.current;R||F();var N=Wr(R);r.current=null,N&&(p.cancel(),N.removeAttribute(Pn.contextId),N.removeEventListener("scroll",g,Ln(R.scrollOptions)))},[g,p]),x=G(function(R){var N=r.current;N||F();var v=Wr(N);v||F(),v.scrollTop+=R.y,v.scrollLeft+=R.x},[]),w=je(function(){return{getDimensionAndWatchScroll:f,getScrollWhileDragging:b,dragStopped:y,scroll:x}},[y,f,b,x]),C=je(function(){return{uniqueId:s,descriptor:l,callbacks:w}},[w,l,s]);Xe(function(){return d.current=C.descriptor,n.droppable.register(C),function(){r.current&&y(),n.droppable.unregister(C)}},[w,l,y,C,i,n.droppable]),Xe(function(){r.current&&i.updateDroppableIsEnabled(d.current.id,!t.isDropDisabled)},[t.isDropDisabled,i]),Xe(function(){r.current&&i.updateDroppableIsCombineEnabled(d.current.id,t.isCombineEnabled)},[t.isCombineEnabled,i])}function Ya(){}var Bn={width:0,height:0,margin:$c},vp=function(r){var a=r.isAnimatingOpenOnMount,s=r.placeholder,n=r.animate;return a||n==="close"?Bn:{height:s.client.borderBox.height,width:s.client.borderBox.width,margin:s.client.margin}},yp=function(r){var a=r.isAnimatingOpenOnMount,s=r.placeholder,n=r.animate,i=vp({isAnimatingOpenOnMount:a,placeholder:s,animate:n});return{display:s.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?hr.placeholder:null}};function wp(t){var r=h.useRef(null),a=G(function(){r.current&&(clearTimeout(r.current),r.current=null)},[]),s=t.animate,n=t.onTransitionEnd,i=t.onClose,o=t.contextId,l=h.useState(t.animate==="open"),d=l[0],u=l[1];h.useEffect(function(){return d?s!=="open"?(a(),u(!1),Ya):r.current?Ya:(r.current=setTimeout(function(){r.current=null,u(!1)}),a):Ya},[s,d,a]);var m=G(function(p){p.propertyName==="height"&&(n(),s==="close"&&i())},[s,i,n]),c=yp({isAnimatingOpenOnMount:d,animate:t.animate,placeholder:t.placeholder});return Ce.createElement(t.placeholder.tagName,{style:c,"data-rbd-placeholder-context-id":o,onTransitionEnd:m,ref:t.innerRef})}var jp=Ce.memo(wp),Ws=Ce.createContext(null),Np=function(t){ri(r,t);function r(){for(var s,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return s=t.call.apply(t,[this].concat(i))||this,s.state={isVisible:!!s.props.on,data:s.props.on,animate:s.props.shouldAnimate&&s.props.on?"open":"none"},s.onClose=function(){s.state.animate==="close"&&s.setState({isVisible:!1})},s}r.getDerivedStateFromProps=function(n,i){return n.shouldAnimate?n.on?{isVisible:!0,data:n.on,animate:"open"}:i.isVisible?{isVisible:!0,data:i.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!n.on,data:n.on,animate:"none"}};var a=r.prototype;return a.render=function(){if(!this.state.isVisible)return null;var n={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(n)},r}(Ce.PureComponent),zn={dragging:5e3,dropAnimating:4500},Sp=function(r,a){return a?hr.drop(a.duration):r?hr.snap:hr.fluid},Cp=function(r,a){return r?a?jr.opacity.drop:jr.opacity.combining:null},Ip=function(r){return r.forceShouldAnimate!=null?r.forceShouldAnimate:r.mode==="SNAP"};function kp(t){var r=t.dimension,a=r.client,s=t.offset,n=t.combineWith,i=t.dropping,o=!!n,l=Ip(t),d=!!i,u=d?rs.drop(s,o):rs.moveTo(s),m={position:"fixed",top:a.marginBox.top,left:a.marginBox.left,boxSizing:"border-box",width:a.borderBox.width,height:a.borderBox.height,transition:Sp(l,i),transform:u,opacity:Cp(o,d),zIndex:d?zn.dropAnimating:zn.dragging,pointerEvents:"none"};return m}function Rp(t){return{transform:rs.moveTo(t.offset),transition:t.shouldAnimateDisplacement?null:"none"}}function Ap(t){return t.type==="DRAGGING"?kp(t):Rp(t)}function Dp(t,r,a){a===void 0&&(a=Be);var s=window.getComputedStyle(r),n=r.getBoundingClientRect(),i=ji(n,s),o=Zr(i,a),l={client:i,tagName:r.tagName.toLowerCase(),display:s.display},d={x:i.marginBox.width,y:i.marginBox.height},u={descriptor:t,placeholder:l,displaceBy:d,client:i,page:o};return u}function Tp(t){var r=Us("draggable"),a=t.descriptor,s=t.registry,n=t.getDraggableRef,i=t.canDragInteractiveElements,o=t.shouldRespectForcePress,l=t.isEnabled,d=je(function(){return{canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:l}},[i,l,o]),u=G(function(g){var f=n();return f||F(),Dp(a,f,g)},[a,n]),m=je(function(){return{uniqueId:r,descriptor:a,options:d,getDimension:u}},[a,u,d,r]),c=h.useRef(m),p=h.useRef(!0);Xe(function(){return s.draggable.register(c.current),function(){return s.draggable.unregister(c.current)}},[s.draggable]),Xe(function(){if(p.current){p.current=!1;return}var g=c.current;c.current=m,s.draggable.update(m,g)},[m,s.draggable])}function Ep(t){t.preventDefault()}function Pp(t){var r=h.useRef(null),a=G(function(D){r.current=D},[]),s=G(function(){return r.current},[]),n=sa(Aa),i=n.contextId,o=n.dragHandleUsageInstructionsId,l=n.registry,d=sa(Ws),u=d.type,m=d.droppableId,c=je(function(){return{id:t.draggableId,index:t.index,type:u,droppableId:m}},[t.draggableId,t.index,u,m]),p=t.children,g=t.draggableId,f=t.isEnabled,b=t.shouldRespectForcePress,y=t.canDragInteractiveElements,x=t.isClone,w=t.mapped,C=t.dropAnimationFinished;if(!x){var R=je(function(){return{descriptor:c,registry:l,getDraggableRef:s,canDragInteractiveElements:y,shouldRespectForcePress:b,isEnabled:f}},[c,l,s,y,b,f]);Tp(R)}var N=je(function(){return f?{tabIndex:0,role:"button","aria-describedby":o,"data-rbd-drag-handle-draggable-id":g,"data-rbd-drag-handle-context-id":i,draggable:!1,onDragStart:Ep}:null},[i,o,g,f]),v=G(function(D){w.type==="DRAGGING"&&w.dropping&&D.propertyName==="transform"&&C()},[C,w]),S=je(function(){var D=Ap(w),L=w.type==="DRAGGING"&&w.dropping?v:null,E={innerRef:a,draggableProps:{"data-rbd-draggable-context-id":i,"data-rbd-draggable-id":g,style:D,onTransitionEnd:L},dragHandleProps:N};return E},[i,N,g,w,v,a]),I=je(function(){return{draggableId:c.id,type:c.type,source:{index:c.index,droppableId:c.droppableId}}},[c.droppableId,c.id,c.index,c.type]);return p(S,w.snapshot,I)}var ho=function(t,r){return t===r},xo=function(t){var r=t.combine,a=t.destination;return a?a.droppableId:r?r.droppableId:null},Mp=function(r){return r.combine?r.combine.draggableId:null},Vp=function(r){return r.at&&r.at.type==="COMBINE"?r.at.combine.draggableId:null};function Op(){var t=Le(function(n,i){return{x:n,y:i}}),r=Le(function(n,i,o,l,d){return{isDragging:!0,isClone:i,isDropAnimating:!!d,dropAnimation:d,mode:n,draggingOver:o,combineWith:l,combineTargetFor:null}}),a=Le(function(n,i,o,l,d,u,m){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:d,combineWith:u,mode:i,offset:n,dimension:o,forceShouldAnimate:m,snapshot:r(i,l,d,u,null)}}}),s=function(i,o){if(i.isDragging){if(i.critical.draggable.id!==o.draggableId)return null;var l=i.current.client.offset,d=i.dimensions.draggables[o.draggableId],u=Ze(i.impact),m=Vp(i.impact),c=i.forceShouldAnimate;return a(t(l.x,l.y),i.movementMode,d,o.isClone,u,m,c)}if(i.phase==="DROP_ANIMATING"){var p=i.completed;if(p.result.draggableId!==o.draggableId)return null;var g=o.isClone,f=i.dimensions.draggables[o.draggableId],b=p.result,y=b.mode,x=xo(b),w=Mp(b),C=i.dropDuration,R={duration:C,curve:Vs.drop,moveTo:i.newHomeClientOffset,opacity:w?jr.opacity.drop:null,scale:w?jr.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:f,dropping:R,draggingOver:x,combineWith:w,mode:y,forceShouldAnimate:null,snapshot:r(y,g,x,w,R)}}}return null};return s}function bo(t){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:t,combineWith:null}}var Fp={mapped:{type:"SECONDARY",offset:Be,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:bo(null)}};function Lp(){var t=Le(function(o,l){return{x:o,y:l}}),r=Le(bo),a=Le(function(o,l,d){return l===void 0&&(l=null),{mapped:{type:"SECONDARY",offset:o,combineTargetFor:l,shouldAnimateDisplacement:d,snapshot:r(l)}}}),s=function(l){return l?a(Be,l,!0):null},n=function(l,d,u,m){var c=u.displaced.visible[l],p=!!(m.inVirtualList&&m.effected[l]),g=Ca(u),f=g&&g.draggableId===l?d:null;if(!c){if(!p)return s(f);if(u.displaced.invisible[l])return null;var b=lr(m.displacedBy.point),y=t(b.x,b.y);return a(y,f,!0)}if(p)return s(f);var x=u.displacedBy.point,w=t(x.x,x.y);return a(w,f,c.shouldAnimate)},i=function(l,d){if(l.isDragging)return l.critical.draggable.id===d.draggableId?null:n(d.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){var u=l.completed;return u.result.draggableId===d.draggableId?null:n(d.draggableId,u.result.draggableId,u.impact,u.afterCritical)}return null};return i}var Bp=function(){var r=Op(),a=Lp(),s=function(i,o){return r(i,o)||a(i,o)||Fp};return s},zp={dropAnimationFinished:Qi},$p=yi(Bp,zp,null,{context:$s,pure:!0,areStatePropsEqual:ho})(Pp);function vo(t){var r=sa(Ws),a=r.isUsingCloneFor;return a===t.draggableId&&!t.isClone?null:Ce.createElement($p,t)}function Up(t){var r=typeof t.isDragDisabled=="boolean"?!t.isDragDisabled:!0,a=!!t.disableInteractiveElementBlocking,s=!!t.shouldRespectForcePress;return Ce.createElement(vo,Z({},t,{isClone:!1,isEnabled:r,canDragInteractiveElements:a,shouldRespectForcePress:s}))}function Hp(t){var r=h.useContext(Aa);r||F();var a=r.contextId,s=r.isMovementAllowed,n=h.useRef(null),i=h.useRef(null),o=t.children,l=t.droppableId,d=t.type,u=t.mode,m=t.direction,c=t.ignoreContainerClipping,p=t.isDropDisabled,g=t.isCombineEnabled,f=t.snapshot,b=t.useClone,y=t.updateViewportMaxScroll,x=t.getContainerForClone,w=G(function(){return n.current},[]),C=G(function(E){n.current=E},[]);G(function(){return i.current},[]);var R=G(function(E){i.current=E},[]),N=G(function(){s()&&y({maxScroll:to()})},[s,y]);bp({droppableId:l,type:d,mode:u,direction:m,isDropDisabled:p,isCombineEnabled:g,ignoreContainerClipping:c,getDroppableRef:w});var v=Ce.createElement(Np,{on:t.placeholder,shouldAnimate:t.shouldAnimatePlaceholder},function(E){var $=E.onClose,se=E.data,k=E.animate;return Ce.createElement(jp,{placeholder:se,onClose:$,innerRef:R,animate:k,contextId:a,onTransitionEnd:N})}),S=je(function(){return{innerRef:C,placeholder:v,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":a}}},[a,l,v,C]),I=b?b.dragging.draggableId:null,D=je(function(){return{droppableId:l,type:d,isUsingCloneFor:I}},[l,I,d]);function L(){if(!b)return null;var E=b.dragging,$=b.render,se=Ce.createElement(vo,{draggableId:E.draggableId,index:E.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(k,M){return $(k,M,E)});return Ro.createPortal(se,x())}return Ce.createElement(Ws.Provider,{value:D},o(S,f),L())}var Ga=function(r,a){return r===a.droppable.type},$n=function(r,a){return a.draggables[r.draggable.id]},Wp=function(){var r={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},a=Z({},r,{shouldAnimatePlaceholder:!1}),s=Le(function(o){return{draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}}}),n=Le(function(o,l,d,u,m,c){var p=m.descriptor.id,g=m.descriptor.droppableId===o;if(g){var f=c?{render:c,dragging:s(m.descriptor)}:null,b={isDraggingOver:d,draggingOverWith:d?p:null,draggingFromThisWith:p,isUsingPlaceholder:!0};return{placeholder:m.placeholder,shouldAnimatePlaceholder:!1,snapshot:b,useClone:f}}if(!l)return a;if(!u)return r;var y={isDraggingOver:d,draggingOverWith:p,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:m.placeholder,shouldAnimatePlaceholder:!0,snapshot:y,useClone:null}}),i=function(l,d){var u=d.droppableId,m=d.type,c=!d.isDropDisabled,p=d.renderClone;if(l.isDragging){var g=l.critical;if(!Ga(m,g))return a;var f=$n(g,l.dimensions),b=Ze(l.impact)===u;return n(u,c,b,b,f,p)}if(l.phase==="DROP_ANIMATING"){var y=l.completed;if(!Ga(m,y.critical))return a;var x=$n(y.critical,l.dimensions);return n(u,c,xo(y.result)===u,Ze(y.impact)===u,x,p)}if(l.phase==="IDLE"&&l.completed&&!l.shouldFlush){var w=l.completed;if(!Ga(m,w.critical))return a;var C=Ze(w.impact)===u,R=!!(w.impact.at&&w.impact.at.type==="COMBINE"),N=w.critical.droppable.id===u;return C?R?r:a:N?r:a}return a};return i},qp={updateViewportMaxScroll:Xd};function Yp(){return document.body||F(),document.body}var Gp={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Yp},yo=yi(Wp,qp,null,{context:$s,pure:!0,areStatePropsEqual:ho})(Hp);yo.defaultProps=Gp;const Ja=[{id:"livesSaved",label:"Lives Saved",icon:Ht,color:"text-green-600",higherIsBetter:!0},{id:"casualties",label:"Casualties",icon:Sr,color:"text-red-600",higherIsBetter:!1},{id:"resources",label:"Resources",icon:Pt,color:"text-blue-600",higherIsBetter:!1},{id:"infrastructure",label:"Infrastructure",icon:bt,color:"text-gray-600",higherIsBetter:!1},{id:"biodiversity",label:"Biodiversity",icon:or,color:"text-green-600",higherIsBetter:!1},{id:"properties",label:"Properties",icon:bt,color:"text-blue-600",higherIsBetter:!1},{id:"nuclear",label:"Nuclear",icon:Nr,color:"text-purple-600",higherIsBetter:!1}],Jp=({scenario:t,onBack:r,onConfirm:a,currentMetrics:s,onReorderPriorities:n})=>{const[i,o]=h.useState([]),[l,d]=h.useState(""),[u,m]=h.useState(null),[c,p]=h.useState(!0),[g,f]=h.useState(!1),[b,y]=h.useState(null);h.useEffect(()=>{localStorage.setItem("rankedViewAccessed","true");const N=localStorage.getItem("preferenceTypeFlag"),v=JSON.parse(localStorage.getItem("simulationMetricsRanking")||"[]"),S=JSON.parse(localStorage.getItem("moralValuesRanking")||"[]"),I=N==="true"?v:S,D=I.slice(0,2).map(E=>E.label).join(", ");d(N==="true"?`Based on your simulation metrics priorities (${D}), the following options are ranked according to their impact on these key metrics:`:`Based on your moral values priorities (${D}), the following options are ranked according to their alignment with these core values:`);const L=[...t.options].sort((E,$)=>{var se;if(N==="true"){const k=Ja.find(O=>{var V;return O.id===((V=I[0])==null?void 0:V.id)});if(!k)return 0;let M=0,A=0;switch((se=I[0])==null?void 0:se.id){case"livesSaved":M=E.impact.livesSaved,A=$.impact.livesSaved;break;case"casualties":M=E.impact.humanCasualties,A=$.impact.humanCasualties;break;case"resources":M=Math.abs(E.impact.firefightingResource),A=Math.abs($.impact.firefightingResource);break;case"infrastructure":M=Math.abs(E.impact.infrastructureCondition),A=Math.abs($.impact.infrastructureCondition);break;case"biodiversity":M=Math.abs(E.impact.biodiversityCondition),A=Math.abs($.impact.biodiversityCondition);break;case"properties":M=Math.abs(E.impact.propertiesCondition),A=Math.abs($.impact.propertiesCondition);break;case"nuclear":M=Math.abs(E.impact.nuclearPowerStation),A=Math.abs($.impact.nuclearPowerStation);break}return k.higherIsBetter?A-M:M-A}else{const k=x(E,I);return x($,I)-k}});o(L)},[t]);const x=(N,v)=>{let S=0;const I=v.map((D,L)=>v.length-L);return v.forEach((D,L)=>{N.label.toLowerCase()===D.id&&(S+=100*I[L])}),S},w=N=>{m(u===N?null:N),g||(f(!0),p(!1))},C=(N,v)=>{switch(v){case"livesSaved":return`+${N.impact.livesSaved}`;case"casualties":return`+${N.impact.humanCasualties}`;case"resources":return`${N.impact.firefightingResource}%`;case"infrastructure":return`${N.impact.infrastructureCondition}%`;case"biodiversity":return`${N.impact.biodiversityCondition}%`;case"properties":return`${N.impact.propertiesCondition}%`;case"nuclear":return`${N.impact.nuclearPowerStation}%`;default:return""}},R=(N,v)=>{y(N.id);const S=v<2;localStorage.setItem("hasReorderedValues","true");const I=localStorage.getItem("hasReorderedValuesCount"),D=I?parseInt(I)+1:1;localStorage.setItem("hasReorderedValuesCount",D.toString()),setTimeout(()=>{a(N,S)},600)};return e.jsx("div",{className:"h-screen bg-gray-50 p-4 flex flex-col",children:e.jsxs("div",{className:"max-w-6xl mx-auto w-full flex-1 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("button",{onClick:r,className:"text-gray-600 hover:text-gray-800 flex items-center gap-2 transition-colors",children:[e.jsx($t,{size:20}),"Back to Simulation"]}),e.jsxs("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white font-medium rounded-lg shadow-md hover:shadow-lg transition-all duration-200",children:[e.jsx(Ko,{size:18}),"Re-order Priorities"]})]}),g&&!c&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 border-l-4 border-green-400 rounded-r-lg animate-fade-in",children:e.jsxs("p",{className:"text-sm text-green-800",children:["üéâ ",e.jsx("strong",{children:"Great!"})," Now you can see how each option impacts this metric. Try clicking other metrics to compare!"]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 flex-1 flex flex-col",children:[e.jsx("h2",{className:"text-lg font-semibold mb-1 text-gray-700",children:t.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:t.description}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:e.jsx("p",{className:"text-blue-800",children:l})}),e.jsx("div",{className:"bg-amber-50 border-l-4 border-amber-400 p-4 rounded-r-lg mb-6",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Qs,{size:18,className:"text-amber-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-amber-900 font-medium mb-1",children:"Selection Limited to Top 2 Options"}),e.jsx("p",{className:"text-amber-800 text-sm",children:'Only the top two ranked options are available for selection based on your priorities. To choose from other options, use the "Re-order Priorities" button to adjust your rankings.'})]})]})}),e.jsxs("div",{className:"relative flex flex-wrap gap-2 mb-6",children:[c&&e.jsx("div",{className:"absolute -top-12 left-0 z-20 animate-bounce",children:e.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white text-sm px-4 py-2 rounded-lg shadow-lg whitespace-nowrap font-medium",children:["‚ú® Click any metric to see impact numbers!",e.jsx("div",{className:"absolute top-full left-8 transform -translate-x-1/2 w-0 h-0 border-t-8 border-purple-500 border-x-8 border-x-transparent"})]})}),Ja.map((N,v)=>{const S=N.icon;return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>w(N.id),className:`flex items-center gap-2 px-3 py-1.5 rounded-md text-sm transition-all duration-200 ${u===N.id?"bg-blue-500 text-white shadow-lg scale-105":c&&v===0?"bg-purple-100 text-purple-700 hover:bg-purple-200 ring-2 ring-purple-300 ring-offset-2":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(S,{size:16,className:u===N.id?"text-white":N.color}),N.label]}),c&&v===0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-pink-400 rounded-full animate-ping"})]},N.id)})]}),e.jsx("div",{className:"space-y-4",children:i.map((N,v)=>{var I;const S=v>=2;return e.jsx("div",{className:`rounded-lg border transition-all duration-200 ${S?"border-gray-200 bg-gray-50 opacity-60":"border-gray-200 bg-white"}`,children:e.jsxs("div",{className:"grid grid-cols-[auto_1fr_auto] gap-4 p-4 items-start",children:[e.jsxs("div",{className:"flex flex-col items-center justify-start pt-1 gap-2",children:[e.jsx("span",{className:`w-10 h-10 flex items-center justify-center rounded-full font-semibold text-lg ${S?"bg-gray-200 text-gray-500":"bg-blue-100 text-blue-600"}`,children:v+1}),e.jsx("span",{className:`text-xs font-medium text-center px-2 py-1 rounded ${S?"bg-gray-100 text-gray-500":"bg-blue-50 text-blue-700"}`,children:N.label})]}),e.jsxs("div",{className:"flex flex-col gap-2 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:`font-medium text-base ${S?"text-gray-500":"text-gray-900"}`,children:N.title}),S&&e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-0.5 bg-gray-600 text-white text-xs font-medium rounded",children:[e.jsx(Qs,{size:11}),"Locked"]}),u&&e.jsx("span",{className:`font-medium text-sm ml-auto ${S?"text-gray-400":(I=Ja.find(D=>D.id===u))==null?void 0:I.color}`,children:C(N,u)})]}),e.jsx("p",{className:`text-sm ${S?"text-gray-400":"text-gray-600"}`,children:N.description})]}),e.jsx("div",{className:"flex items-center justify-center pt-1",children:!S&&(b===N.id?e.jsxs("div",{className:"flex items-center gap-2 animate-scale-in",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center shadow-lg transform transition-transform duration-300",children:e.jsx(Kn,{size:28,className:"text-white",strokeWidth:3})}),e.jsx("span",{className:"text-green-700 font-semibold text-sm",children:"Selected"})]}):e.jsx("button",{onClick:()=>R(N,v),disabled:b!==null,className:"bg-gray-400 hover:bg-blue-500 text-white font-medium py-2 px-6 rounded-lg flex items-center gap-2 transition-all duration-300 whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-gray-400 shadow-sm hover:shadow-md transform hover:scale-105 active:scale-95",children:"Select"}))})]})},N.id)})})]})]})})};class Fe{static startScenario(r){this.currentScenarioTracking={scenarioId:r,startTime:Date.now(),optionSelections:[],cvrVisited:!1,cvrVisitCount:0,cvrYesAnswers:0,cvrNoAnswers:0,apaReordered:!1,apaReorderCount:0,alternativesExplored:!1,alternativesExploredCount:0,switchCount:0},this.emitEvent({event:"scenario_started",timestamp:new Date().toISOString(),scenarioId:r,timeSinceScenarioOpen:0});const a=be.getSessionId();be.insertScenarioInteraction({session_id:a,scenario_id:r,scenario_title:`Scenario ${r}`,event_type:"scenario_started",time_since_scenario_start:0})}static recordOptionSelection(r,a,s){if(!this.currentScenarioTracking)return;const n=Date.now(),i=n-this.currentScenarioTracking.startTime,o=be.getSessionId();if(this.currentScenarioTracking.optionSelections.length>0){const l=this.currentScenarioTracking.optionSelections[this.currentScenarioTracking.optionSelections.length-1];l.optionId!==r&&(this.currentScenarioTracking.switchCount++,l.aligned!==s&&(this.emitEvent({event:"alignment_state_changed",timestamp:new Date().toISOString(),scenarioId:this.currentScenarioTracking.scenarioId,optionId:r,optionLabel:a,alignedBefore:l.aligned,alignedAfter:s,timeSinceScenarioOpen:i}),be.insertScenarioInteraction({session_id:o,scenario_id:this.currentScenarioTracking.scenarioId,scenario_title:`Scenario ${this.currentScenarioTracking.scenarioId}`,event_type:"alignment_state_changed",option_id:r,option_label:a,is_aligned:s,time_since_scenario_start:Math.round(i/1e3),switch_count:this.currentScenarioTracking.switchCount,event_data:{alignedBefore:l.aligned,alignedAfter:s}})))}this.currentScenarioTracking.optionSelections.push({optionId:r,optionLabel:a,timestamp:n,aligned:s}),this.emitEvent({event:"option_selected",timestamp:new Date().toISOString(),scenarioId:this.currentScenarioTracking.scenarioId,optionId:r,optionLabel:a,alignedAfter:s,timeSinceScenarioOpen:i}),be.insertScenarioInteraction({session_id:o,scenario_id:this.currentScenarioTracking.scenarioId,scenario_title:`Scenario ${this.currentScenarioTracking.scenarioId}`,event_type:"option_selected",option_id:r,option_label:a,is_aligned:s,time_since_scenario_start:Math.round(i/1e3),switch_count:this.currentScenarioTracking.switchCount})}static confirmOption(r,a,s,n,i,o){if(!this.currentScenarioTracking)return;const l=Date.now(),d=l-this.currentScenarioTracking.startTime;this.currentScenarioTracking.finalChoice={optionId:r,optionLabel:a,aligned:s},this.currentScenarioTracking.endTime=l,this.emitEvent({event:"option_confirmed",timestamp:new Date().toISOString(),scenarioId:this.currentScenarioTracking.scenarioId,optionId:r,optionLabel:a,alignedAfter:s,timeSinceScenarioOpen:d,objectivesSnapshot:n,flagsAtConfirmation:i,finalTopTwoValuesBeforeUpdate:o})}static recordCVRVisit(r,a){this.currentScenarioTracking&&(this.currentScenarioTracking.cvrVisited=!0,this.currentScenarioTracking.cvrVisitCount++);const s=this.currentScenarioTracking?Date.now()-this.currentScenarioTracking.startTime:0;this.emitEvent({event:"cvr_opened",timestamp:new Date().toISOString(),scenarioId:r,optionId:a,timeSinceScenarioOpen:s});const n=be.getSessionId();be.insertScenarioInteraction({session_id:n,scenario_id:r,scenario_title:`Scenario ${r}`,event_type:"cvr_opened",option_id:a,time_since_scenario_start:Math.round(s/1e3)})}static recordCVRAnswer(r,a,s,n,i){this.currentScenarioTracking&&(a?this.currentScenarioTracking.cvrYesAnswers++:this.currentScenarioTracking.cvrNoAnswers++);const o=this.currentScenarioTracking?Date.now()-this.currentScenarioTracking.startTime:0;this.emitEvent({event:"cvr_answered",timestamp:new Date().toISOString(),scenarioId:r,cvrAnswer:a,timeSinceScenarioOpen:o});const l=be.getSessionId();s&&n&&i&&be.insertCVRResponse({session_id:l,scenario_id:r,option_id:s,option_label:n,cvr_question:i,user_answer:a,response_time_ms:Math.round(o)})}static recordAPAReordering(r,a,s,n){this.currentScenarioTracking&&(this.currentScenarioTracking.apaReordered=!0,this.currentScenarioTracking.apaReorderCount++);const i=this.currentScenarioTracking?Date.now()-this.currentScenarioTracking.startTime:0;this.emitEvent({event:"apa_reordered",timestamp:new Date().toISOString(),scenarioId:r,valuesBefore:a,valuesAfter:s,preferenceType:n,timeSinceScenarioOpen:i});const o=be.getSessionId();be.insertAPAReordering({session_id:o,scenario_id:r,preference_type:n,values_before:a,values_after:s,time_spent_ms:Math.round(i)}),be.insertValueEvolution({session_id:o,scenario_id:r,value_list_snapshot:s,change_trigger:"apa_reordering",change_type:n})}static recordAlternativesExplored(r){this.currentScenarioTracking&&(this.currentScenarioTracking.alternativesExplored=!0),this.emitEvent({event:"alternatives_explored",timestamp:new Date().toISOString(),scenarioId:r,timeSinceScenarioOpen:this.currentScenarioTracking?Date.now()-this.currentScenarioTracking.startTime:0})}static recordAlternativeAdded(r,a,s){this.currentScenarioTracking&&(this.currentScenarioTracking.alternativesExploredCount+=1),this.emitEvent({event:"alternative_added",timestamp:new Date().toISOString(),scenarioId:r,optionId:a,optionLabel:s,timeSinceScenarioOpen:this.currentScenarioTracking?Date.now()-this.currentScenarioTracking.startTime:0})}static getCurrentScenarioTracking(){return this.currentScenarioTracking}static endScenario(){if(!this.currentScenarioTracking)return;const r={...this.currentScenarioTracking},a=JSON.parse(localStorage.getItem("scenarioTrackingHistory")||"[]");return a.push(r),localStorage.setItem("scenarioTrackingHistory",JSON.stringify(a)),this.currentScenarioTracking=null,r}static emitEvent(r){const a=JSON.parse(localStorage.getItem("sessionEventLogs")||"[]");a.push(r),localStorage.setItem("sessionEventLogs",JSON.stringify(a))}static getScenarioTrackingHistory(){return JSON.parse(localStorage.getItem("scenarioTrackingHistory")||"[]")}static getAllEvents(){return JSON.parse(localStorage.getItem("sessionEventLogs")||"[]")}}Ys(Fe,"currentScenarioTracking",null);const _a=[{id:"livesSaved",label:"Lives Saved"},{id:"casualties",label:"Casualties"},{id:"resources",label:"Resources"},{id:"infrastructure",label:"Infrastructure"},{id:"biodiversity",label:"Biodiversity"},{id:"properties",label:"Properties"},{id:"nuclear",label:"Nuclear Safety"}],qr=[{id:"safety",label:"Safety"},{id:"efficiency",label:"Efficiency"},{id:"sustainability",label:"Sustainability"},{id:"fairness",label:"Fairness"},{id:"nonmaleficence",label:"Nonmaleficence"}];function _p(t,r){const a=[{id:"safety",label:"Safety"},{id:"efficiency",label:"Efficiency"},{id:"sustainability",label:"Sustainability"},{id:"fairness",label:"Fairness"},{id:"nonmaleficence",label:"Nonmaleficence"}],s=t==null?void 0:t.toLowerCase(),n=[],i=new Set;if(s){const l=a.find(d=>d.id===s);l&&(n.push(l),i.add(l.id))}r.forEach(l=>{if(!i.has(l)){const d=a.find(u=>u.id===l);d&&(n.push(d),i.add(d.id))}});const o=a.filter(l=>!i.has(l.id));return n.push(...o),n}const Qp=({onBack:t,selectedOption:r,mainScenario:a,onConfirm:s,scenarioId:n=1,isLastScenario:i=!1})=>{const[o,l]=h.useState(""),[d,u]=h.useState(["Safety","Efficiency","Sustainability","Fairness","Nonmaleficence"]),[m,c]=h.useState(null),[p,g]=h.useState(_a),[f,b]=h.useState(qr),[y,x]=h.useState(_a),[w,C]=h.useState(!1),[R,N]=h.useState(!0),[v,S]=h.useState(!0),[I,D]=h.useState(()=>localStorage.getItem("hasClickedPreferenceButton")==="true"),[L,E]=h.useState(()=>localStorage.getItem("hasClickedPreferenceButton")!=="true"),[$,se]=h.useState(!1),k=O=>{if(!O.destination)return;const V=Array.from(y),[B]=V.splice(O.source.index,1);V.splice(O.destination.index,0,B),x(V),m==="metrics"?g(V):m==="values"&&b(V)},M=()=>{if(!m||y.length===0)return;const O=m==="values"?qr.map(B=>B.id):_a.map(B=>B.id),V=y.map(B=>B.id);if(Fe.recordAPAReordering(a.id,O,V,m),localStorage.setItem("preferenceTypeFlag",m==="metrics"?"true":"false"),m==="metrics"){localStorage.setItem("simulationMetricsRanking",JSON.stringify(y)),localStorage.setItem("SimulationMetricsReorderList",JSON.stringify(y)),localStorage.setItem("simulationMetricsReorderingFlag","true"),localStorage.setItem("moralValuesReorderingFlag","false");const B=localStorage.getItem("simulationMetricsSelectedCount"),z=B?parseInt(B)+1:1;localStorage.setItem("simulationMetricsSelectedCount",z.toString())}else{localStorage.setItem("moralValuesRanking",JSON.stringify(y)),localStorage.setItem("MoralValuesReorderList",JSON.stringify(y)),localStorage.setItem("moralValuesReorderingFlag","true"),localStorage.setItem("simulationMetricsReorderingFlag","false");const B=localStorage.getItem("moralValuesSelectedCount"),z=B?parseInt(B)+1:1;localStorage.setItem("moralValuesSelectedCount",z.toString())}C(!0)};if(w)return e.jsx(Jp,{scenario:a,onBack:()=>{C(!1),t()},onConfirm:(O,V)=>s(O,V),currentMetrics:{livesSaved:0,humanCasualties:0,firefightingResource:100,infrastructureCondition:100,biodiversityCondition:100,propertiesCondition:100,nuclearPowerStation:100},onReorderPriorities:()=>{C(!1)}});const{comparisonTableColumnContent:A}=r;return i&&n===3?e.jsx("div",{className:"bg-gradient-to-br from-slate-50 to-blue-50 min-h-screen p-6 flex-1 flex flex-col",children:e.jsxs("div",{className:"max-w-5xl mx-auto w-full",children:[e.jsxs("button",{onClick:t,className:"mb-4 text-gray-600 hover:text-gray-800 flex items-center gap-2 transition-colors",children:[e.jsx($t,{size:20}),"Back to Scenario 3"]}),e.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-gray-50 border border-gray-200 rounded-xl p-4 mb-4",children:[e.jsxs("button",{onClick:()=>S(!v),className:"w-full flex items-center justify-between text-left hover:opacity-80 transition-opacity",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center shadow-md",children:e.jsx(Ct,{className:"text-white",size:20})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Why You're Seeing This Page"})]}),e.jsx(At,{size:20,className:`text-gray-600 transition-transform duration-300 ${v?"":"rotate-180"}`})]}),e.jsx("div",{className:`overflow-hidden transition-all duration-300 ${v?"max-h-0":"max-h-96"}`,children:e.jsxs("div",{className:"pt-4 space-y-3",children:[e.jsx("p",{className:"text-gray-800 leading-relaxed text-sm",children:"This section is here to simply help you reflect ‚Äî not to tell you what you should have chosen."}),e.jsx("p",{className:"text-gray-800 leading-relaxed text-sm",children:"The purpose of the value-reflection scenario is to show how the same core values feel when they appear in a different storyline."}),e.jsx("p",{className:"text-gray-800 leading-relaxed text-sm",children:"Sometimes people respond differently without realizing it. This page helps you think about which part of your decision-making matters most to you right now."})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-5 text-center",children:"We Noticed a Contradiction in Your Recent Choices"}),e.jsx("div",{className:"bg-amber-50 border-l-4 border-amber-400 p-4 rounded-r-lg mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Qa,{className:"text-amber-600 mt-0.5 flex-shrink-0",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-amber-900 font-medium mb-1 text-sm",children:"This is the last scenario"}),e.jsx("p",{className:"text-amber-800 text-xs leading-relaxed",children:"You don't need to reorder your values since there are no more scenarios after this one. You can review the information below and return to the simulation to make a different choice if needed."})]})]})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white border-2 border-blue-200 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(It,{className:"text-blue-600",size:20})}),e.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"Your Simulation Scenario Choice"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Scenario Title"}),e.jsx("p",{className:"text-sm text-gray-800 font-medium",children:A.firstColumnTitle})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Affected Population"}),e.jsxs("p",{className:"text-sm text-gray-800",children:[A.firstColumnAffected.toLocaleString()," residents"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Decision Trade-off"}),e.jsx("p",{className:"text-sm text-gray-800",children:A.firstColumnRisk})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Applied Moral Value"}),e.jsx("p",{className:"text-sm text-gray-800 font-medium",children:A.firstValue})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Your Response"}),e.jsx("p",{className:`text-sm font-semibold ${A.firstColumnuserChoice==="Accepted"?"text-green-600":"text-red-600"}`,children:A.firstColumnuserChoice==="Accepted"?"‚úì Accepted":"‚úó Rejected"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-white border-2 border-teal-200 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-teal-100 flex items-center justify-center",children:e.jsx(at,{className:"text-teal-600",size:20})}),e.jsx("h3",{className:"text-lg font-semibold text-teal-900",children:"Your Value-Reflection Scenario Choice"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Scenario Title"}),e.jsx("p",{className:"text-sm text-gray-800 font-medium",children:A.secondColumnTitle})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Affected Population"}),e.jsxs("p",{className:"text-sm text-gray-800",children:[A.secondColumnaffected.toLocaleString()," residents"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Decision Trade-off"}),e.jsx("p",{className:"text-sm text-gray-800",children:A.secondColumnRisk})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Applied Moral Value"}),e.jsx("p",{className:"text-sm text-gray-800 font-medium",children:A.secondValue})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Your Response"}),e.jsx("p",{className:`text-sm font-semibold ${A.secondColumnuserChoice==="Accepted"?"text-green-600":"text-red-600"}`,children:A.secondColumnuserChoice==="Accepted"?"‚úì Accepted":"‚úó Rejected"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-cyan-400 to-teal-500 flex items-center justify-center shadow-md",children:e.jsx(at,{className:"text-white",size:20})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"What We Detected"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-gray-50 rounded-xl p-6 mb-4",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0 mt-1",children:e.jsx(Xt,{className:"text-blue-600",size:16})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2",children:"Your recent choice emphasizes"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:A.secondValue.toLowerCase()})]})]})}),e.jsx("div",{className:"border-t border-gray-200 pt-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0 mt-1",children:e.jsx(Qt,{className:"text-green-600",size:16})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2",children:(()=>{try{const O=localStorage.getItem("FinalTopTwoValues");return(O?JSON.parse(O):[]).length===1?"Your current top value priority is":"Your current top value priorities are"}catch{return"Your current top value priorities are"}})()}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:(()=>{try{const O=localStorage.getItem("FinalTopTwoValues"),V=O?JSON.parse(O):[];if(V.length===1)return V[0].charAt(0).toUpperCase()+V[0].slice(1);if(V.length===2){const B=V[0].charAt(0).toUpperCase()+V[0].slice(1),z=V[1].charAt(0).toUpperCase()+V[1].slice(1);return`${B} and ${z}`}return"Not yet determined"}catch{return"Not yet determined"}})()})]})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-gray-700 leading-relaxed text-sm",children:"This suggests that your decision in this scenario is not fully aligned with your previously expressed preferences."}),e.jsx("p",{className:"text-gray-600 leading-relaxed text-sm italic bg-gray-50 p-3 rounded-lg",children:"You might genuinely want to act differently than your earlier ranking suggested ‚Äî or you might want your preferences to better match how you're actually choosing in these situations."})]})]}),e.jsxs("button",{onClick:t,className:"w-full flex items-center justify-center gap-2 py-3 px-4 rounded-lg bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-medium transition-all duration-200 shadow-md hover:shadow-lg",children:[e.jsx($t,{size:20}),"Return to Scenario 3"]})]})]})}):e.jsx("div",{className:"bg-gradient-to-br from-slate-50 to-blue-50 min-h-screen p-6 flex-1 flex flex-col",children:e.jsxs("div",{className:"max-w-5xl mx-auto w-full",children:[e.jsxs("button",{onClick:t,className:"mb-4 text-gray-600 hover:text-gray-800 flex items-center gap-2 transition-colors",children:[e.jsx($t,{size:20}),"Back to Simulation"]}),e.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-gray-50 border border-gray-200 rounded-xl p-4 mb-4",children:[e.jsxs("button",{onClick:()=>S(!v),className:"w-full flex items-center justify-between text-left hover:opacity-80 transition-opacity",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center shadow-md",children:e.jsx(Ct,{className:"text-white",size:20})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Why You're Seeing This Page"})]}),e.jsx(At,{size:20,className:`text-gray-600 transition-transform duration-300 ${v?"":"rotate-180"}`})]}),e.jsx("div",{className:`overflow-hidden transition-all duration-300 ${v?"max-h-0":"max-h-96"}`,children:e.jsxs("div",{className:"pt-4 space-y-3",children:[e.jsx("p",{className:"text-gray-800 leading-relaxed text-sm",children:"This section is here to simply help you reflect ‚Äî not to tell you what you should have chosen."}),e.jsx("p",{className:"text-gray-800 leading-relaxed text-sm",children:"The purpose of the value-reflection scenario is to show how the same core values feel when they appear in a different storyline."}),e.jsx("p",{className:"text-gray-800 leading-relaxed text-sm",children:"Sometimes people respond differently without realizing it. This page helps you think about which part of your decision-making matters most to you right now."})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-5 text-center",children:"We Noticed a Difference in Your Recent Choices"}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-teal-50 border-l-4 border-blue-500 p-4 rounded-r-xl mb-6 shadow-sm",children:[e.jsx("p",{className:"text-gray-800 leading-relaxed mb-3 text-sm",children:"Earlier in the simulation, you selected an option that reflected a certain value."}),e.jsx("p",{className:"text-gray-800 leading-relaxed mb-3 text-sm",children:"A moment later, when you were shown a very similar scenario designed to reflect your chosen value-based option, you reacted differently and rejected the same value-based option you had previously accepted in a different scenario."}),e.jsx("p",{className:"text-gray-700 leading-relaxed italic text-sm",children:"This happens to many people ‚Äî especially when the same moral values appear in new or stressful contexts."})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-teal-500 flex items-center justify-center shadow-md",children:e.jsx(at,{className:"text-white",size:20})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Here's What You Chose Before"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white border-2 border-blue-200 rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(It,{className:"text-blue-600",size:20})}),e.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"Your Simulation Scenario Choice"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Scenario Title"}),e.jsx("p",{className:"text-sm text-gray-800 font-medium",children:A.firstColumnTitle})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Affected Population"}),e.jsxs("p",{className:"text-sm text-gray-800",children:[A.firstColumnAffected.toLocaleString()," residents"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Decision Trade-off"}),e.jsx("p",{className:"text-sm text-gray-800",children:A.firstColumnRisk})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Applied Moral Value"}),e.jsx("p",{className:"text-sm text-gray-800 font-medium",children:A.firstValue})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Your Response"}),e.jsx("p",{className:`text-sm font-semibold ${A.firstColumnuserChoice==="Accepted"?"text-green-600":"text-red-600"}`,children:A.firstColumnuserChoice==="Accepted"?"‚úì Accepted":"‚úó Rejected"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-white border-2 border-teal-200 rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-teal-100 flex items-center justify-center",children:e.jsx(at,{className:"text-teal-600",size:20})}),e.jsx("h3",{className:"text-lg font-semibold text-teal-900",children:"Your Value-Reflection Scenario Choice"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Scenario Title"}),e.jsx("p",{className:"text-sm text-gray-800 font-medium",children:A.secondColumnTitle})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Affected Population"}),e.jsxs("p",{className:"text-sm text-gray-800",children:[A.secondColumnaffected.toLocaleString()," residents"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Decision Trade-off"}),e.jsx("p",{className:"text-sm text-gray-800",children:A.secondColumnRisk})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Applied Moral Value"}),e.jsx("p",{className:"text-sm text-gray-800 font-medium",children:A.secondValue})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Your Response"}),e.jsx("p",{className:`text-sm font-semibold ${A.secondColumnuserChoice==="Accepted"?"text-green-600":"text-red-600"}`,children:A.secondColumnuserChoice==="Accepted"?"‚úì Accepted":"‚úó Rejected"})]})]})]})]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 text-center",children:e.jsx("p",{className:"text-amber-900 font-medium text-sm",children:"Both scenarios affected the same number of residents and carried nearly the same consequences, yet your reactions were different."})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-cyan-400 to-teal-500 flex items-center justify-center shadow-md",children:e.jsx(at,{className:"text-white",size:20})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"What We Detected"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-gray-50 rounded-xl p-6 mb-4",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0 mt-1",children:e.jsx(Xt,{className:"text-blue-600",size:16})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2",children:"Your recent choice emphasizes"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:A.secondValue.toLowerCase()})]})]})}),e.jsx("div",{className:"border-t border-gray-200 pt-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0 mt-1",children:e.jsx(Qt,{className:"text-green-600",size:16})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2",children:(()=>{try{const O=localStorage.getItem("FinalTopTwoValues");return(O?JSON.parse(O):[]).length===1?"Your current top value priority is":"Your current top value priorities are"}catch{return"Your current top value priorities are"}})()}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:(()=>{try{const O=localStorage.getItem("FinalTopTwoValues"),V=O?JSON.parse(O):[];if(V.length===1)return V[0].charAt(0).toUpperCase()+V[0].slice(1);if(V.length===2){const B=V[0].charAt(0).toUpperCase()+V[0].slice(1),z=V[1].charAt(0).toUpperCase()+V[1].slice(1);return`${B} and ${z}`}return"Not yet determined"}catch{return"Not yet determined"}})()})]})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-gray-700 leading-relaxed text-sm",children:"This suggests that your decision in this scenario is not fully aligned with your previously expressed preferences."}),e.jsx("p",{className:"text-gray-600 leading-relaxed text-sm italic bg-gray-50 p-3 rounded-lg",children:"You might genuinely want to act differently than your earlier ranking suggested ‚Äî or you might want your preferences to better match how you're actually choosing in these situations."})]})]}),e.jsxs("div",{className:"bg-white border-2 border-slate-200 rounded-xl p-6 mb-6 shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center shadow-md",children:e.jsx(Xt,{className:"text-white",size:24})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"What Matters More to You Going Forward?"})]}),e.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:"Because we noticed a contradiction, this step helps you clarify what should guide your decisions in the current and upcoming scenarios."}),e.jsx("p",{className:"text-gray-600 text-sm mb-6 italic",children:"You can choose whichever matters more to you right now‚ÄîSimulation Metrics or Moral Values‚Äîand you can always adjust this preference later if your priorities change."}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("button",{onClick:()=>{c("metrics"),x(p),I||(D(!0),E(!1),localStorage.setItem("hasClickedPreferenceButton","true"))},className:`py-8 px-5 rounded-xl border-2 transition-all duration-300 flex flex-col items-center gap-4 shadow-sm hover:shadow-lg relative transform hover:-translate-y-1 ${m==="metrics"?"border-blue-500 bg-gradient-to-br from-blue-50 to-blue-100 shadow-lg scale-105":L?"border-blue-400 bg-white hover:border-blue-500 hover:bg-blue-50 shadow-blue-300 shadow-lg animate-pulse":"border-gray-300 bg-white hover:border-blue-400 hover:bg-blue-50"}`,children:[e.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center shadow-md transition-all duration-300 ${m==="metrics"?"bg-gradient-to-br from-blue-500 to-blue-600":"bg-gray-200"}`,children:e.jsx(Ho,{className:m==="metrics"?"text-white":"text-gray-600",size:32})}),e.jsxs("div",{className:"flex flex-col items-center gap-1.5",children:[e.jsx("span",{className:`font-bold text-xl ${m==="metrics"?"text-blue-700":"text-gray-800"}`,children:"Simulation Metrics"}),e.jsx("span",{className:`text-xs text-center leading-relaxed ${m==="metrics"?"text-blue-600":"text-gray-500"}`,children:"Prioritize quantifiable outcomes and measurable impact"}),e.jsx("span",{className:`text-xs text-center leading-relaxed italic  ${m==="metrics"?"text-blue-600":"text-gray-500"}`,children:"(The Context of the Problem)"})]}),m==="metrics"&&e.jsx("span",{className:"text-xs bg-blue-500 text-white px-3 py-1 rounded-full font-medium shadow-sm",children:"Selected"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>{var O;if(c("values"),$)x(f);else try{const V=localStorage.getItem("FinalTopTwoValues"),B=V?JSON.parse(V):[],z=(O=r==null?void 0:r.comparisonTableColumnContent)==null?void 0:O.secondValue,ce=_p(z,B);b(ce),x(ce),se(!0)}catch(V){console.error("Error applying custom order:",V),b(qr),x(qr)}I||(D(!0),E(!1),localStorage.setItem("hasClickedPreferenceButton","true"))},className:`w-full py-8 px-5 rounded-xl border-2 transition-all duration-300 flex flex-col items-center gap-4 shadow-sm hover:shadow-lg relative transform hover:-translate-y-1 ${m==="values"?"border-emerald-500 bg-gradient-to-br from-emerald-50 to-emerald-100 shadow-lg scale-105":L?"border-emerald-400 bg-white hover:border-emerald-500 hover:bg-emerald-50 shadow-emerald-300 shadow-lg animate-pulse":"border-gray-300 bg-white hover:border-emerald-400 hover:bg-emerald-50"}`,children:[e.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center shadow-md transition-all duration-300 ${m==="values"?"bg-gradient-to-br from-emerald-500 to-emerald-600":"bg-gray-200"}`,children:e.jsx(Kt,{className:m==="values"?"text-white":"text-gray-600",size:32})}),e.jsxs("div",{className:"flex flex-col items-center gap-1.5",children:[e.jsx("span",{className:`font-bold text-xl ${m==="values"?"text-emerald-700":"text-gray-800"}`,children:"Moral Values"}),e.jsx("span",{className:`text-xs text-center leading-relaxed ${m==="values"?"text-emerald-600":"text-gray-500"}`,children:"Prioritize ethical principles and fundamental values"}),e.jsx("span",{className:`text-xs text-center leading-relaxed italic  ${m==="values"?"text-emerald-600":"text-gray-500"}`,children:"(Universal Morals)"})]}),m==="values"&&e.jsx("span",{className:"text-xs bg-emerald-500 text-white px-3 py-1 rounded-full font-medium shadow-sm",children:"Selected"})]}),L&&e.jsx("div",{className:"absolute -top-2 -right-4 transform translate-x-full z-10 animate-bounce",children:e.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-500 text-white text-sm px-4 py-3 rounded-xl shadow-xl whitespace-nowrap font-medium flex items-center gap-2",children:[e.jsx(Qt,{size:16,className:"flex-shrink-0"}),"Click one of these buttons to continue",e.jsx("div",{className:"absolute top-4 right-full transform w-0 h-0 border-t-8 border-b-8 border-r-8 border-emerald-500 border-t-transparent border-b-transparent"})]})})]})]}),m&&e.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-gray-50 border border-gray-200 p-6 rounded-xl mt-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Ks,{size:20,className:"text-blue-600"}),"Rank from 1 (most important) to ",y.length," (least important)"]}),R&&e.jsx("div",{className:"mb-4 p-4 bg-blue-50 border-l-4 border-blue-400 rounded-r-lg",children:e.jsxs("p",{className:"text-sm text-blue-800 flex items-center gap-2",children:[e.jsx(Qt,{size:16,className:"flex-shrink-0"}),e.jsx("strong",{children:"Tip:"})," Drag and drop items to reorder them by importance"]})}),e.jsx(np,{onDragEnd:k,children:e.jsx(yo,{droppableId:"rankingList",children:O=>e.jsxs("div",{...O.droppableProps,ref:O.innerRef,className:"space-y-2",children:[y.map((V,B)=>e.jsx(Up,{draggableId:V.id,index:B,children:(z,ce)=>e.jsxs("div",{ref:z.innerRef,...z.draggableProps,...z.dragHandleProps,className:`bg-white p-4 rounded-lg border flex items-center gap-4 transition-shadow duration-150 ${ce.isDragging?"border-gray-400 shadow-lg":"border-gray-200 shadow-sm"}`,children:[e.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 text-gray-700 font-semibold",children:B+1}),e.jsx("span",{className:"flex-1 font-medium text-gray-700",children:V.label}),e.jsx(Ks,{size:20,className:"text-gray-400"})]})},V.id)),O.placeholder]})})}),e.jsxs("button",{onClick:M,disabled:!m,className:`mt-6 w-full flex items-center justify-center gap-2 py-4 px-6 rounded-xl text-white font-semibold text-lg transition-all duration-200 shadow-md ${m?"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 hover:shadow-lg":"bg-gray-400 cursor-not-allowed"}`,children:["Continue to Next Step",e.jsx(ut,{size:24})]})]})]}),e.jsx("div",{className:"bg-amber-50 border-l-4 border-amber-400 p-5 rounded-r-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Qa,{className:"text-amber-600 mt-0.5 flex-shrink-0",size:20}),e.jsx("p",{className:"text-sm text-amber-900 leading-relaxed",children:"Your rankings will help us understand your decision-making priorities and improve future scenario recommendations."})]})})]})]})})},Yr=({id:t,title:r,children:a,variant:s="info",defaultExpanded:n=!1})=>{const i=`help-message-${t}-hidden`,[o,l]=h.useState(n),[d,u]=h.useState(!1);h.useEffect(()=>{const c=localStorage.getItem(i)==="true";u(c)},[i]);const m=()=>{localStorage.setItem(i,"true"),u(!0)};return d?null:e.jsx("div",{className:"relative mb-4",children:e.jsxs("div",{className:"border-2 bg-gradient-to-r from-yellow-50 to-amber-50 border-yellow-400 rounded-xl shadow-md overflow-hidden transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsxs("button",{onClick:()=>l(!o),className:"flex items-center gap-3 flex-1 text-left group",children:[e.jsx("div",{className:"text-yellow-600 transition-colors",children:e.jsx(zt,{size:20})}),e.jsx("h4",{className:"font-semibold text-yellow-900 text-sm group-hover:opacity-75 transition-opacity",children:r}),e.jsx("div",{className:"ml-auto text-yellow-600",children:o?e.jsx(Zn,{size:20}):e.jsx(At,{size:20})})]}),e.jsx("button",{onClick:m,className:"ml-2 text-yellow-600 hover:opacity-75 transition-opacity",title:"Hide this message permanently",children:e.jsx(mt,{size:18})})]}),o&&e.jsx("div",{className:"px-4 pb-4 text-yellow-900 text-sm leading-relaxed space-y-2 animate-in fade-in duration-200",children:a})]})})},Kp=({isOpen:t,onClose:r,option:a})=>{const[s,n]=h.useState(!0),[i,o]=h.useState(!1),l=h.useRef(null),d=Object.keys(a.expertOpinions).length;h.useEffect(()=>{if(!t){n(!0),o(!1);return}const g=setTimeout(()=>{const f=l.current;if(f){const b=f.scrollHeight>f.clientHeight;n(b)}},800);return()=>clearTimeout(g)},[t]);const u=g=>{const f=g.currentTarget;f.scrollTop/(f.scrollHeight-f.clientHeight)*100>10&&(n(!1),o(!0))},m=()=>{l.current&&l.current.scrollTo({top:l.current.scrollHeight*.3,behavior:"smooth"})};if(!t)return null;const c={safety:{name:"Safety",icon:rr,iconColor:"text-blue-600",bgGradient:"from-blue-50 to-blue-100",borderColor:"border-blue-300",accentColor:"bg-blue-500"},efficiency:{name:"Efficiency",icon:Pt,iconColor:"text-cyan-600",bgGradient:"from-cyan-50 to-cyan-100",borderColor:"border-cyan-300",accentColor:"bg-cyan-500"},sustainability:{name:"Sustainability",icon:ms,iconColor:"text-green-600",bgGradient:"from-green-50 to-green-100",borderColor:"border-green-300",accentColor:"bg-green-500"},fairness:{name:"Fairness",icon:It,iconColor:"text-purple-600",bgGradient:"from-purple-50 to-purple-100",borderColor:"border-purple-300",accentColor:"bg-purple-500"},nonmaleficence:{name:"Nonmaleficence",icon:us,iconColor:"text-red-600",bgGradient:"from-red-50 to-red-100",borderColor:"border-red-300",accentColor:"bg-red-500"}},p=g=>{switch(g){case"Accept":return"bg-gradient-to-r from-green-500 to-emerald-600 text-white shadow-md";case"Reject":return"bg-gradient-to-r from-red-500 to-rose-600 text-white shadow-md";case"Neutral":return"bg-gradient-to-r from-yellow-400 to-amber-500 text-white shadow-md";default:return"bg-gray-200 text-gray-700"}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50 overflow-y-auto backdrop-blur-sm",children:e.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-2xl shadow-2xl max-w-5xl w-full my-8 border border-gray-200",children:[e.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-teal-600 to-cyan-600 rounded-t-2xl p-6 flex items-center justify-between z-10 shadow-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:a.title}),e.jsx("p",{className:"text-teal-50 text-sm leading-relaxed",children:a.description})]}),e.jsx("button",{onClick:r,className:"text-white hover:text-teal-100 transition-colors p-2 rounded-full hover:bg-white hover:bg-opacity-20 ml-4",children:e.jsx(mt,{size:28})})]}),e.jsxs("div",{ref:l,onScroll:u,className:"p-6 max-h-[calc(90vh-10rem)] overflow-y-auto relative",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-teal-500 to-cyan-500 rounded-full"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Expert Analysis"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:Object.entries(a.expertOpinions).map(([g,f])=>{const b=c[g],y=b.icon;return e.jsxs("div",{className:`bg-gradient-to-br ${b.bgGradient} border-2 ${b.borderColor} rounded-xl p-5 shadow-md hover:shadow-xl transition-shadow duration-300`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`${b.accentColor} p-3 rounded-lg shadow-md`,children:e.jsx(y,{size:24,className:"text-white"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800",children:[b.name," Expert"]}),e.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Professional Assessment"})]})]}),e.jsx("span",{className:`px-4 py-2 rounded-lg text-sm font-bold ${p(f.recommendation)}`,children:f.recommendation})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-white bg-opacity-70 rounded-lg p-4 border-l-4 border-blue-500 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ct,{size:16,className:"text-blue-600"}),e.jsx("h4",{className:"text-sm font-bold text-blue-900 uppercase tracking-wide",children:"Analysis"})]}),e.jsx("p",{className:"text-sm text-gray-800 leading-relaxed",children:f.summary})]}),e.jsxs("div",{className:"bg-white bg-opacity-70 rounded-lg p-4 border-l-4 border-purple-500 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Xn,{size:16,className:"text-purple-600"}),e.jsx("h4",{className:"text-sm font-bold text-purple-900 uppercase tracking-wide",children:"Comparison"})]}),e.jsx("p",{className:"text-sm text-gray-800 leading-relaxed",children:f.comparison})]}),e.jsxs("div",{className:"bg-white bg-opacity-70 rounded-lg p-4 border-l-4 border-emerald-500 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Xt,{size:16,className:"text-emerald-600"}),e.jsx("h4",{className:"text-sm font-bold text-emerald-900 uppercase tracking-wide",children:"Confidence Level"})]}),e.jsx("p",{className:"text-sm text-gray-800 leading-relaxed",children:f.confidence})]})]})]},g)})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-300 rounded-xl p-5 shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-blue-500 to-indigo-500 rounded-full"}),e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Simulation Metrics Impact Summary"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{className:"bg-white rounded-lg p-3 border-l-4 border-green-500 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ht,{size:16,className:"text-green-600"}),e.jsx("span",{className:"text-xs font-bold text-gray-700",children:"Lives Saved"})]}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:["+",a.impact.livesSaved]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-3 border-l-4 border-red-500 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Sr,{size:16,className:"text-red-600"}),e.jsx("span",{className:"text-xs font-bold text-gray-700",children:"Casualties"})]}),e.jsxs("span",{className:"text-lg font-bold text-red-600",children:["+",a.impact.humanCasualties]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-3 border-l-4 border-cyan-500 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pt,{size:16,className:"text-cyan-600"}),e.jsx("span",{className:"text-xs font-bold text-gray-700",children:"Resources"})]}),e.jsxs("span",{className:"text-lg font-bold text-cyan-600",children:[a.impact.firefightingResource,"%"]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-3 border-l-4 border-gray-500 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(bt,{size:16,className:"text-gray-600"}),e.jsx("span",{className:"text-xs font-bold text-gray-700",children:"Infrastructure"})]}),e.jsxs("span",{className:"text-lg font-bold text-gray-600",children:[a.impact.infrastructureCondition,"%"]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-3 border-l-4 border-emerald-500 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(or,{size:16,className:"text-emerald-600"}),e.jsx("span",{className:"text-xs font-bold text-gray-700",children:"Biodiversity"})]}),e.jsxs("span",{className:"text-lg font-bold text-emerald-600",children:[a.impact.biodiversityCondition,"%"]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-3 border-l-4 border-blue-500 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(bt,{size:16,className:"text-blue-600"}),e.jsx("span",{className:"text-xs font-bold text-gray-700",children:"Properties"})]}),e.jsxs("span",{className:"text-lg font-bold text-blue-600",children:[a.impact.propertiesCondition,"%"]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-3 border-l-4 border-purple-500 shadow-sm col-span-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Nr,{size:16,className:"text-purple-600"}),e.jsx("span",{className:"text-xs font-bold text-gray-700",children:"Nuclear Station"})]}),e.jsxs("span",{className:"text-lg font-bold text-purple-600",children:[a.impact.nuclearPowerStation,"%"]})]})})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 border-2 border-orange-300 rounded-xl p-5 shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-orange-500 to-red-500 rounded-full"}),e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Key Considerations"})]}),e.jsx("div",{className:"space-y-2",children:a.riskInfo.map((g,f)=>e.jsx("div",{className:"bg-white rounded-lg p-3 border-l-4 border-orange-500 shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-gray-800 leading-relaxed font-medium",children:g})]})},f))})]})]}),s&&!i&&e.jsxs("div",{className:"sticky bottom-0 left-0 right-0 pointer-events-none",children:[e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-white via-white/80 to-transparent"}),e.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 pointer-events-auto",children:e.jsxs("button",{onClick:m,className:"group flex flex-col items-center gap-2 bg-gradient-to-r from-teal-500 to-cyan-500 text-white px-6 py-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 hover:from-teal-600 hover:to-cyan-600 animate-bounce",style:{animationDuration:"2s"},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-bold whitespace-nowrap",children:"More Expert Recommendations Below"}),e.jsx(At,{size:20,className:"group-hover:translate-y-0.5 transition-transform"})]}),e.jsx("div",{className:"flex gap-1",children:Array.from({length:d}).map((g,f)=>e.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full opacity-70"},f))})]})})]})]}),e.jsx("div",{className:"sticky bottom-0 bg-gradient-to-r from-gray-50 to-white rounded-b-2xl border-t-2 border-gray-200 p-6 shadow-lg",children:e.jsxs("button",{onClick:r,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-teal-600 to-cyan-600 text-white hover:from-teal-700 hover:to-cyan-700 px-6 py-4 rounded-xl font-bold text-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-[1.02]",children:[e.jsx(mt,{size:24}),"Close Review"]})})]})})},Gr=[{id:1,title:"Wildfire Approaching a Town",description:"A wildfire is rapidly approaching a town with 2,000 residents. Critical decisions must be made about resource allocation and evacuation priorities.",options:[{id:"safety-first",title:"Prioritize Safety Protocol",label:"safety",description:"Deploy all available firefighters immediately to form defensive lines and evacuate population centers. This action will successfully evacuate all residents but exposes firefighters to intense danger, leading to casualties and resource depletion.",impact:{livesSaved:2e3,humanCasualties:12,firefightingResource:-38,infrastructureCondition:-15,biodiversityCondition:-12,propertiesCondition:-12,nuclearPowerStation:0},riskInfo:["2,000 residents safely evacuated through rapid deployment","12 firefighter casualties due to high exposure in intense zones","Firefighter morale potentially impacted by losses","Heavy short-term resource depletion may affect next emergency","Major fire spread contained near residential areas"],expertOpinions:{safety:{summary:"Ensures maximum civilian survival through aggressive intervention. However, the elevated firefighter risk could undermine future morale and readiness.",recommendation:"Accept",comparison:"Highest civilian survival (100%) among all options. Firefighter loss (12 personnel) introduces medium concern.",confidence:"High confidence based on historical evacuation efficiency in full-resource deployments."},efficiency:{summary:"Resource use is excessive relative to marginal gains over more targeted strategies.",recommendation:"Reject",comparison:"Uses 166% more resources than the efficiency-focused approach for a 42% increase in lives saved.",confidence:"Moderate confidence given modeled depletion thresholds and resource burn rates."},sustainability:{summary:"Environmental degradation is high due to aggressive fire suppression techniques.",recommendation:"Reject",comparison:"Causes 2.3x more environmental impact than the sustainability-focused approach.",confidence:"High confidence from ecological field data on containment burns."},fairness:{summary:"Effectively saves everyone, but accessible zones are disproportionately prioritized in execution.",recommendation:"Accept",comparison:"Outperforms all except fairness-focused plan in geographic equity.",confidence:"Moderate confidence based on standard evacuation route analysis."},nonmaleficence:{summary:"No civilian deaths, but responder harm remains ethically significant.",recommendation:"Accept",comparison:"Second-lowest total harm; only the nonmaleficence-focused strategy performs better.",confidence:"High confidence from harm-reduction comparative modeling."}},radarData:{fireContainment:90,firefighterRisk:60,resourceUse:84,infrastructureDamage:40,biodiversityImpact:35,ethicalFairness:75,populationSafety:100},cvrQuestion:{descriptionTile:"üè• Forced Medical Sacrifice",description:"A chemical plant explosion has filled a city hospital with toxic fumes. To save 2,000 trapped patients, you can order a small team of 12 medical staff to enter the most contaminated zone to open sealed exits. Those 12 will certainly die, but everyone else will be evacuated safely.",question:"Would you order 12 medical staff to certain death so that 2,000 patients can be rescued?",value:"Safety"},comparisonTableColumnContent:{firstColumnTitle:"Wildfire Approaching a Town",firstColumnSelectedPreference:"Deploy all available firefighters immediately to form defensive lines and evacuate population centers",firstValue:"Safety",firstColumnAffected:2e3,firstColumnRisk:"12 firefighter casualties",firstColumnuserChoice:"Accepted",secondColumnTitle:"Forced Medical Sacrifice",secondColumnSelectedPreference:"Order 12 medical staff into a lethal zone to unlock exits and save 2,000 patients",secondValue:"Safety",secondColumnaffected:2e3,secondColumnRisk:"12 medical staff deaths",secondColumnuserChoice:"Rejected"}},{id:"efficiency-focused",title:"Resource Optimization Strategy",label:"efficiency",description:"Deploy firefighter teams only to the most critical zones, minimizing resource use while attempting to save as many lives as possible. However, limited coverage results in preventable resident deaths and minor firefighter casualties.",impact:{livesSaved:1400,humanCasualties:600,firefightingResource:-22,infrastructureCondition:-14,biodiversityCondition:-16,propertiesCondition:-12,nuclearPowerStation:0},riskInfo:["1,400 residents evacuated from high-priority zones","600 casualties from areas not prioritized","Firefighters remained mostly in low-risk sectors","Minimal firefighter exposure and casualties (0)","Resources preserved for future emergencies"],expertOpinions:{safety:{summary:"Substantial lives are saved but at the cost of abandoning lower-priority areas.",recommendation:"Reject",comparison:"600 deaths preventable under safety or nonmaleficence strategies.",confidence:"Moderate confidence based on demographic prioritization models."},efficiency:{summary:"Exceptional performance in lives saved per resource expended.",recommendation:"Accept",comparison:"Best efficiency ratio with 60 lives saved per 1% resource used.",confidence:"High confidence from optimization-based simulations."},sustainability:{summary:"Resources preserved, but ecological damage left unchecked.",recommendation:"Accept",comparison:"Ecological triage limits short-term loss but sacrifices containment.",confidence:"Low confidence due to variable fire behavior in uncontrolled spread."},fairness:{summary:"Benefits skewed toward urban centers, ignoring rural zones.",recommendation:"Reject",comparison:"Most inequitable strategy from a geographic fairness perspective.",confidence:"Moderate confidence from spatial resource allocation studies."},nonmaleficence:{summary:"Large-scale civilian loss undermines core harm-minimization ethics.",recommendation:"Reject",comparison:"600 deaths exceed acceptable ethical thresholds by 400%.",confidence:"High confidence from casualty probability projections."}},radarData:{fireContainment:60,firefighterRisk:20,resourceUse:50,infrastructureDamage:38,biodiversityImpact:45,ethicalFairness:45,populationSafety:70},cvrQuestion:{descriptionTile:"üõ≥Ô∏è Lifeboat Bulkhead Order",description:"A cruise ship with 2,000 people is taking on water. To keep the ship afloat long enough to save 1,400 people using only 25% of rescue resources, you must order the sealing of six lower-deck bulkheads, deliberately trapping 600 passengers below.",question:"Would you seal the bulkheads‚Äîcondemning 600 people‚Äîso that 1,400 can be saved with minimal resources?",value:"Efficiency"},comparisonTableColumnContent:{firstColumnTitle:"Wildfire Approaching a Town",firstColumnSelectedPreference:"Deploy firefighter teams only to the most critical zones",firstValue:"Efficiency",firstColumnAffected:2e3,firstColumnRisk:"600 civilian deaths",firstColumnuserChoice:"Accepted",secondColumnTitle:"Lifeboat Bulkhead Order",secondColumnSelectedPreference:"Seal lower-deck bulkheads to preserve buoyancy and save 1,400 with limited resources",secondValue:"Efficiency",secondColumnaffected:2e3,secondColumnRisk:"600 passenger deaths",secondColumnuserChoice:"Rejected"}},{id:"sustainability-focused",title:"Eco-Conscious Containment",label:"sustainability",description:"Limit intervention to protect natural ecosystems and endangered species. Firefighters engage only in environmentally sensitive zones. Most civilians are left vulnerable, and several firefighters perish in inaccessible terrain.",impact:{livesSaved:900,humanCasualties:1100,firefightingResource:-26,infrastructureCondition:-12,biodiversityCondition:-8,propertiesCondition:-12,nuclearPowerStation:0},riskInfo:["900 residents rescued through low-impact paths","1,080 civilian casualties due to delayed evacuation","20 firefighter deaths during defensive ecological operations","Key wildlife corridors preserved and fire-resistant","Natural firebreaks used instead of industrial tools"],expertOpinions:{safety:{summary:"Unacceptably high casualty rate despite eco-priorities.",recommendation:"Reject",comparison:"Over 1,000 deaths make this the least protective of human life.",confidence:"High confidence from historical fire shelter failures."},efficiency:{summary:"Resources used for habitat protection, not for life-saving.",recommendation:"Reject",comparison:"33% fewer lives saved than efficiency plan with 60% more resource usage.",confidence:"Moderate confidence based on deployment logs."},sustainability:{summary:"Top-tier biodiversity preservation through minimal intrusion.",recommendation:"Accept",comparison:"85% lower impact on ecosystems than any other strategy.",confidence:"High confidence from ecological satellite assessments."},fairness:{summary:"Equitable if extended to non-human lives, ethically controversial otherwise.",recommendation:"Accept",comparison:"Reframes fairness beyond humanity but lacks population equity.",confidence:"Low confidence due to disputed ethical scope."},nonmaleficence:{summary:"Sacrifices too many for future benefits‚Äîethically disproportionate.",recommendation:"Reject",comparison:"Highest total harm in the name of ecological restraint.",confidence:"High confidence based on life-cycle harm index."}},radarData:{fireContainment:40,firefighterRisk:50,resourceUse:56,infrastructureDamage:32,biodiversityImpact:24,ethicalFairness:55,populationSafety:45},cvrQuestion:{descriptionTile:"üíß Operate the Floodgates",description:"A collapsing dam threatens a rare wetland. To save the ecosystem, you can detonate a levee that will divert the torrent into low-lying neighborhoods. This will preserve the habitat but will kill 1,100 people, including 20 responders positioned to execute the operation, while 900 are rescued via low-impact routes.",question:"Would you deliberately breach the levee‚Äîknowing 1,100 people including 20 responders will die‚Äîto preserve the ecosystem?",value:"Sustainability"},comparisonTableColumnContent:{firstColumnTitle:"Wildfire Approaching a Town",firstColumnSelectedPreference:"Limit intervention to protect natural ecosystems and endangered species",firstValue:"Sustainability",firstColumnAffected:2e3,firstColumnRisk:"1,100 civilian deaths + 20 firefighters",firstColumnuserChoice:"Accepted",secondColumnTitle:"Operate the Floodgates",secondColumnSelectedPreference:"Breach a levee to save the wetland, sacrificing 1,100 people (incl. 20 responders)",secondValue:"Sustainability",secondColumnaffected:2e3,secondColumnRisk:"1,100 civilian deaths + 20 responder deaths",secondColumnuserChoice:"Rejected"}},{id:"fairness-focused",title:"Equitable Response Protocol",label:"fairness",description:"Distribute protection equally across all neighborhoods regardless of socioeconomic or geographic differences. This equitable approach stretches resources thin, leading to moderate civilian and firefighter losses.",impact:{livesSaved:1600,humanCasualties:400,firefightingResource:-32,infrastructureCondition:-14,biodiversityCondition:-14,propertiesCondition:-12,nuclearPowerStation:0},riskInfo:["1,600 residents saved through balanced evacuation zones","370 residents and 30 firefighters lost due to delayed response in all areas","No neighborhood prioritized over others","Fire spread difficult to contain due to thin coverage","Moral clarity but logistical challenge"],expertOpinions:{safety:{summary:"Saves a large number while ensuring equal effort across areas.",recommendation:"Accept",comparison:"Reasonable harm (400) with high geographic parity.",confidence:"Moderate confidence from area-distribution simulations."},efficiency:{summary:"Low strategic ROI from wide-spread deployment.",recommendation:"Reject",comparison:"Uses double the resources of efficient strategy with 14% more lives saved.",confidence:"High confidence based on resource-per-zone stats."},sustainability:{summary:"Moderate ecosystem protection at cost of uniformity.",recommendation:"Reject",comparison:"Less targeted response leads to higher net environmental loss.",confidence:"Moderate confidence due to fragmented zone support."},fairness:{summary:"Most ethically aligned with equal protection principles.",recommendation:"Accept",comparison:"Only option achieving full demographic impartiality.",confidence:"High confidence from population-based equity modeling."},nonmaleficence:{summary:"Moderate harm, ethically balanced, but preventable losses remain.",recommendation:"Accept",comparison:"Middle-of-the-road in harm scores, favors equity over efficiency.",confidence:"Moderate confidence based on weighted harm index."}},radarData:{fireContainment:65,firefighterRisk:55,resourceUse:68,infrastructureDamage:36,biodiversityImpact:40,ethicalFairness:90,populationSafety:80},cvrQuestion:{descriptionTile:"üèöÔ∏è Hold the Beams",description:"After a major earthquake, rescue teams face collapsing corridors across rich and poor districts alike. To ensure equal access, you order teams to advance in lockstep across all districts. In several buildings, 30 rescuers must physically brace failing beams so that 1,600 people can pass‚Äîthose 30 will certainly die, and 400 residents still perish due to system-wide delays.",question:"Would you enforce perfectly equal deployment even if it requires 30 rescuers to accept certain death and results in 400 resident deaths due to slower aid?",value:"Fairness"},comparisonTableColumnContent:{firstColumnTitle:"Wildfire Approaching a Town",firstColumnSelectedPreference:"Distribute protection equally across all neighborhoods",firstValue:"Fairness",firstColumnAffected:2e3,firstColumnRisk:"400 deaths including 30 firefighters",firstColumnuserChoice:"Accepted",secondColumnTitle:"Hold the Beams",secondColumnSelectedPreference:"Maintain equal deployment; 30 rescuers brace failing structures to let 1,600 pass",secondValue:"Fairness",secondColumnaffected:2e3,secondColumnRisk:"400 civilian deaths + 30 rescuer deaths",secondColumnuserChoice:"Rejected"}},{id:"nonmaleficence-focused",title:"Harm Minimization Approach",label:"nonmaleficence",description:"Use every available strategy to minimize total harm‚Äîboth human and ecological‚Äîby shielding vulnerable communities, preempting infrastructure collapse, and preserving firefighter life. All civilians are rescued, but some firefighter lives are lost in the process.",impact:{livesSaved:2e3,humanCasualties:8,firefightingResource:-30,infrastructureCondition:-16,biodiversityCondition:-12,propertiesCondition:-16,nuclearPowerStation:0},riskInfo:["All 2,000 residents rescued using layered evacuation strategies","8 firefighter deaths during containment in hazardous areas","Focus on protecting both people and natural resources","Infrastructure takes significant damage as a trade-off","Lowest possible total harm achieved across all groups"],expertOpinions:{safety:{summary:"Superior civilian protection, slight responder risk.",recommendation:"Accept",comparison:"Most balanced plan with 99.6% human survival.",confidence:"High confidence from full-protection model consensus."},efficiency:{summary:"High cost but justified by extraordinary outcomes.",recommendation:"Reject",comparison:"Uses 80% more resources than the efficient option for 43% more lives saved.",confidence:"Moderate confidence based on proportional expenditure models."},sustainability:{summary:"Moderate impact, carefully managed.",recommendation:"Reject",comparison:"Ecological footprint 2x higher than sustainability option.",confidence:"High confidence from scenario-based restoration data."},fairness:{summary:"Vulnerable groups prioritized ethically, but geographic balance is imperfect.",recommendation:"Accept",comparison:"Not equal, but ethically coherent with moral urgency framework.",confidence:"Moderate confidence based on tiered-vulnerability approach."},nonmaleficence:{summary:"Lowest overall harm‚Äîboth to humans and environment.",recommendation:"Accept",comparison:"Most ethically consistent outcome across all domains.",confidence:"High confidence based on integrated harm-weighted scoring."}},radarData:{fireContainment:80,firefighterRisk:40,resourceUse:64,infrastructureDamage:42,biodiversityImpact:35,ethicalFairness:80,populationSafety:100},cvrQuestion:{descriptionTile:"üß™ Manual Valve Shutdown",description:"A bioterror gas release spreads through a university complex. To guarantee the rescue of all 2,000 civilians, you must order an 8‚Äëperson hazmat team to enter a saturated zone and manually shut the final valves. The team will certainly die; everyone else survives, and infrastructure suffers heavy damage.",question:"Would you order 8 hazmat responders to certain death to ensure zero civilian fatalities (2,000 saved) despite severe infrastructure loss?",value:"Nonmaleficence"},comparisonTableColumnContent:{firstColumnTitle:"Wildfire Approaching a Town",firstColumnSelectedPreference:"Use every available strategy to minimize total harm",firstValue:"Nonmaleficence",firstColumnAffected:2e3,firstColumnRisk:"8 firefighter deaths",firstColumnuserChoice:"Accepted",secondColumnTitle:"Manual Valve Shutdown",secondColumnSelectedPreference:"Order 8 hazmat responders into a lethal zone to save 2,000 civilians",secondValue:"Nonmaleficence",secondColumnaffected:2e3,secondColumnRisk:"8 responder deaths + severe infrastructure damage",secondColumnuserChoice:"Rejected"}}]},{id:2,title:"Nuclear Facility Under Threat",description:"A wildfire is spreading rapidly toward a nuclear power plant located near a residential area. If the facility is breached, the resulting radioactive fallout could endanger hundreds of thousands. You must prioritize decisions that balance local evacuation, plant protection, and firefighter safety.",options:[{id:"nuclear-safety-priority",title:"Shield the Reactor at All Costs",label:"safety",description:"Deploy all firefighting forces to fortify the nuclear facility perimeter. This prevents catastrophic radiation release but leaves most of the population unprotected, leading to severe civilian casualties.",impact:{livesSaved:400,humanCasualties:1600,firefightingResource:-42,infrastructureCondition:-16,biodiversityCondition:-16,propertiesCondition:-14,nuclearPowerStation:-5},riskInfo:["Reactor secured and meltdown prevented","1,600 residents perish due to lack of evacuation resources","Firefighters suffer minimal casualties","Long-term regional fallout avoided","Severe public backlash and ethical scrutiny"],comparisonTableColumnContent:{firstColumnTitle:"Nuclear Facility Under Threat",firstColumnSelectedPreference:"Shield the Reactor at All Costs",firstValue:"Safety",firstColumnAffected:2e3,firstColumnRisk:"1600 residents dead, minor firefighter casualties",firstColumnuserChoice:"Accepted",secondColumnTitle:"Seal the Community Gates",secondColumnSelectedPreference:"Close flood/contamination gates to protect reactor, trapping residents inside",secondValue:"Safety",secondColumnaffected:2e3,secondColumnRisk:"1600 residents lost, reactor secured",secondColumnuserChoice:"Rejected"},expertOpinions:{safety:{summary:"Eliminates the highest-risk global hazard, but sacrifices local population safety.",recommendation:"Accept",comparison:"Best long-term safety outcome, worst immediate human cost.",confidence:"High confidence based on reactor shielding precedent (‚âà 85%‚Äì100%)"},efficiency:{summary:"Heavy resource usage on a single target with poor civilian ROI.",recommendation:"Reject",comparison:"Most resource-intensive with lowest lives saved per unit.",confidence:"Moderate confidence from facility defense efficiency models (‚âà 65%‚Äì80%)"},sustainability:{summary:"Protects reactor but ignores biodiversity corridors and burns vast land.",recommendation:"Reject",comparison:"Third worst outcome in biodiversity loss.",confidence:"High confidence from environmental spread simulations (‚âà 85%‚Äì100%)"},fairness:{summary:"Neglects vulnerable residential areas in favor of infrastructure.",recommendation:"Reject",comparison:"Fails basic equity standards.",confidence:"High confidence from response ethics research (‚âà 85%‚Äì100%)"},nonmaleficence:{summary:"Avoids global harm but causes extreme localized suffering.",recommendation:"Reject",comparison:"Most ethically controversial trade-off.",confidence:"Moderate confidence from trade-off harm matrix (‚âà 65%‚Äì80%)"}},radarData:{fireContainment:80,firefighterRisk:15,resourceUse:96,infrastructureDamage:42,biodiversityImpact:45,ethicalFairness:25,populationSafety:20},cvrQuestion:{descriptionTile:"üß± Seal the Community Gates",description:"A toxic plume is advancing toward a nuclear facility and nearby town. To prevent a reactor breach, you can shut the community flood/contamination gates, sealing neighborhoods in place. This will save the facility but condemn 1,600 residents while 400 are evacuated.",question:"Would you deliberately seal the neighborhood gates‚Äîcondemning 1,600 people‚Äîto prevent a catastrophic reactor failure?",value:"Safety"}},{id:"evacuation-priority",title:"Evacuate Every Civilian",label:"fairness",description:"Redirect all resources to evacuate residents as quickly as possible. While this saves the majority of the population, the nuclear plant is left vulnerable, increasing the risk of partial radioactive leakage and infrastructure collapse.",impact:{livesSaved:1800,humanCasualties:200,firefightingResource:-40,infrastructureCondition:-18,biodiversityCondition:-18,propertiesCondition:-16,nuclearPowerStation:-20},riskInfo:["1,800 residents saved via urgent coordinated effort","200 total casualties including vulnerable individuals and 3 firefighters in distant zones","Radiation leaks contained to local zones, potential long-term effects","Minimal firefighter risk, public morale high","Severe damage to the nuclear site may require years of cleanup"],comparisonTableColumnContent:{firstColumnTitle:"Nuclear Facility Under Threat",firstColumnSelectedPreference:"Evacuate Every Civilian",firstValue:"Fairness",firstColumnAffected:2e3,firstColumnRisk:"200 residents and responders lost, nuclear damage ongoing",firstColumnuserChoice:"Accepted",secondColumnTitle:"Controlled Vent for Evacuation",secondColumnSelectedPreference:"Order a controlled vent to the atmosphere to buy evacuation time",secondValue:"Fairness",secondColumnaffected:2e3,secondColumnRisk:"200 deaths from acute exposure (incl. 3 responders)",secondColumnuserChoice:"Rejected"},expertOpinions:{safety:{summary:"Protects population but elevates nuclear contamination risk.",recommendation:"Reject",comparison:"Lower immediate death toll, higher infrastructure hazard.",confidence:"High confidence from emergency evac modeling (‚âà 85%‚Äì100%)"},efficiency:{summary:"Saves maximum lives per resource unit.",recommendation:"Accept",comparison:"Best cost-benefit in life preservation.",confidence:"High confidence from rescue efficiency simulations (‚âà 85%‚Äì100%)"},sustainability:{summary:"Long-term radiation containment becomes costly.",recommendation:"Reject",comparison:"Worsens environmental recovery timelines.",confidence:"Moderate confidence from environmental toxicity projection (‚âà 65%‚Äì80%)"},fairness:{summary:"Favors population-wide equity regardless of cost.",recommendation:"Accept",comparison:"Most equitable outcome.",confidence:"High confidence from ethical distribution models (‚âà 85%‚Äì100%)"},nonmaleficence:{summary:"Minimizes harm to people, defers ecological damage.",recommendation:"Accept",comparison:"Second most morally favorable option.",confidence:"Moderate confidence from risk-aversion studies (‚âà 65%‚Äì80%)"}},radarData:{fireContainment:60,firefighterRisk:20,resourceUse:90,infrastructureDamage:48,biodiversityImpact:50,ethicalFairness:95,populationSafety:85},cvrQuestion:{descriptionTile:"üå¨Ô∏è Controlled Vent for Evacuation",description:"To clear evacuation routes for 1,800 civilians, engineers can perform a controlled venting of radioactive steam. This action will directly cause 200 deaths from acute exposure, including 3 responders, while preventing a wider catastrophe.",question:"Would you order a controlled vent‚Äîcausing 200 deaths (incl. 3 responders)‚Äîto evacuate 1,800 civilians in time?",value:"Fairness"}},{id:"divided-response-strategy",title:"Split Response Strategy",label:"efficiency",description:"Divide firefighting units between civilian evacuation and securing the nuclear facility. This approach aims to minimize both civilian and infrastructure loss, but spreading resources may reduce overall effectiveness and increase complexity.",impact:{livesSaved:1500,humanCasualties:500,firefightingResource:-38,infrastructureCondition:-16,biodiversityCondition:-18,propertiesCondition:-16,nuclearPowerStation:-10},riskInfo:["1500 residents successfully evacuated","500 total casualties including 10 firefighters due to spread-thin response","Radiation contained but minor breach occurred","Moderate infrastructure damage near facility","Balanced short-term and long-term impact, but resource planning remains controversial"],comparisonTableColumnContent:{firstColumnTitle:"Nuclear Facility Under Threat",firstColumnSelectedPreference:"Split Response Strategy",firstValue:"Efficiency",firstColumnAffected:2e3,firstColumnRisk:"500 deaths, minor radiation breach, reduced firefighter readiness",firstColumnuserChoice:"Accepted",secondColumnTitle:"Dual Mission with Sacrifice",secondColumnSelectedPreference:"Assign 10 responders to manual core venting while evacuations proceed",secondValue:"Efficiency",secondColumnaffected:2e3,secondColumnRisk:"500 deaths total (incl. 10 responders)",secondColumnuserChoice:"Rejected"},expertOpinions:{safety:{summary:"Balanced protection plan, mitigates both civilian and infrastructure risk.",recommendation:"Accept",comparison:"Second-best for reducing total harm.",confidence:"High confidence from hybrid emergency strategies (‚âà 85%‚Äì100%)"},efficiency:{summary:"High cost-effectiveness in saving lives and infrastructure.",recommendation:"Accept",comparison:"Strongest compromise across multiple domains.",confidence:"High confidence from multi-variable allocation models (‚âà 85%‚Äì100%)"},sustainability:{summary:"Reduces environmental damage moderately by preventing nuclear spread.",recommendation:"Accept",comparison:"Better than reactor sacrifice, worse than full eco-prioritization.",confidence:"Moderate confidence based on terrain control data (‚âà 65%‚Äì80%)"},fairness:{summary:"Attempts equal distribution of aid, but sacrifices depth for breadth.",recommendation:"Accept",comparison:"Ethically viable under emergency triage frameworks.",confidence:"Moderate confidence from equity studies (‚âà 65%‚Äì80%)"},nonmaleficence:{summary:"Minimizes overall harm but includes risk of partial failure in both sectors.",recommendation:"Accept",comparison:"Moral middle ground, with risks acknowledged.",confidence:"Moderate confidence from harm minimization research (‚âà 65%‚Äì80%)"}},radarData:{fireContainment:70,firefighterRisk:30,resourceUse:84,infrastructureDamage:42,biodiversityImpact:50,ethicalFairness:70,populationSafety:75},cvrQuestion:{descriptionTile:"üîß Dual Mission with Sacrifice",description:"To both evacuate civilians and stabilize the reactor, 10 technicians must enter a breached chamber to manually vent pressure. Those 10 will certainly die; 1,500 civilians are evacuated and the reactor holds with only a minor breach.",question:"Would you order 10 technicians to certain death so you can split teams and still prevent a major reactor failure?",value:"Efficiency"}},{id:"ecosystem-defense-priority",title:"Protect Ecosystems First",label:"sustainability",description:"Redirect major resources toward halting wildfire spread through key biodiversity corridors. This protects sensitive ecosystems and prevents long-term environmental collapse but limits evacuation and increases casualties among both civilians and responders.",impact:{livesSaved:800,humanCasualties:1200,firefightingResource:-40,infrastructureCondition:-16,biodiversityCondition:-8,propertiesCondition:-16,nuclearPowerStation:-20},riskInfo:["800 civilians rescued before route closures","1,200 casualties including 80 firefighters overwhelmed by terrain fires","Critical wildlife corridors preserved","Moderate nuclear facility damage due to diverted response","Significant long-term gains in ecological resilience"],comparisonTableColumnContent:{firstColumnTitle:"Nuclear Facility Under Threat",firstColumnSelectedPreference:"Protect Ecosystems First",firstValue:"Sustainability",firstColumnAffected:2e3,firstColumnRisk:"1,200 deaths including firefighters, minimal biodiversity loss",firstColumnuserChoice:"Accepted",secondColumnTitle:"Last Stand Firebreak",secondColumnSelectedPreference:"Ignite barrier fires and order 80 rangers to hold lines so corridors survive",secondValue:"Sustainability",secondColumnaffected:2e3,secondColumnRisk:"1,200 deaths total (incl. 80 responders)",secondColumnuserChoice:"Rejected"},expertOpinions:{safety:{summary:"Neglects large-scale human safety in favor of long-term gains.",recommendation:"Reject",comparison:"Highest loss of life trade-off.",confidence:"High confidence based on emergency triage outcome (‚âà 85%‚Äì100%)"},efficiency:{summary:"Moderate resource allocation efficiency with heavy trade-offs.",recommendation:"Reject",comparison:"Weakest efficiency-to-impact ratio.",confidence:"Moderate confidence from logistic stress models (‚âà 65%‚Äì75%)"},sustainability:{summary:"Preserves high-value ecosystems and prevents irreversible damage.",recommendation:"Accept",comparison:"Best option for biodiversity and ecological continuity.",confidence:"High confidence from conservation risk metrics (‚âà 85%‚Äì95%)"},fairness:{summary:"Prioritizes environment over people, ethically contested.",recommendation:"Reject",comparison:"Uneven distribution of aid favors future generations.",confidence:"Moderate confidence from ethical impact modeling (‚âà 65%‚Äì75%)"},nonmaleficence:{summary:"High immediate harm for low present benefit, deferred long-term gain.",recommendation:"Reject",comparison:"Violates do-no-harm principle under human loss.",confidence:"High confidence from applied bioethics studies (‚âà 85%‚Äì95%)"}},radarData:{fireContainment:60,firefighterRisk:70,resourceUse:92,infrastructureDamage:42,biodiversityImpact:22,ethicalFairness:45,populationSafety:35},cvrQuestion:{descriptionTile:"üî• Last Stand Firebreak",description:"To keep ancient biodiversity corridors alive, commanders can ignite barrier fires and order 80 rangers to hold the lines until overrun. Their deaths will buy time to save the ecosystems, but only 800 civilians will be rescued; 1,120 others will perish.",question:"Would you order 80 rangers to certain death and accept 1,120 civilian deaths to prevent ecosystem collapse?",value:"Sustainability"}},{id:"nonmaleficence-response",title:"Minimize Harm, Avoid Irreversible Fallout",label:"nonmaleficence",description:"Choose a restrained approach that avoids high-risk maneuvers and minimizes irreversible harm. Firefighters will only secure defensible zones and allow natural containment. This reduces unnecessary loss of life among responders but increases the risk of radiation release and major regional damage.",impact:{livesSaved:1e3,humanCasualties:1e3,firefightingResource:-34,infrastructureCondition:-18,biodiversityCondition:-18,propertiesCondition:-18,nuclearPowerStation:-30},riskInfo:["1,000 residents evacuated with minimal firefighter exposure","1,000 total deaths including residents left in inaccessible zones","Nuclear breach causes long-term contamination in surrounding region","Infrastructure collapse in unprotected urban areas","Low immediate harm to responders but high deferred civilian impact"],comparisonTableColumnContent:{firstColumnTitle:"Nuclear Facility Under Threat",firstColumnSelectedPreference:"Minimize Harm, Avoid Irreversible Fallout",firstValue:"Nonmaleficence",firstColumnAffected:2e3,firstColumnRisk:"1,000 deaths, reactor partially breached, firefighter safety preserved",firstColumnuserChoice:"Accepted",secondColumnTitle:"Lockdown Doctrine",secondColumnSelectedPreference:"Lock down red zones to avoid responder risk, barring rescue attempts",secondValue:"Nonmaleficence",secondColumnaffected:2e3,secondColumnRisk:"1,000 deaths, responders unharmed",secondColumnuserChoice:"Rejected"},expertOpinions:{safety:{summary:"Fails to secure high-risk zones, putting population at serious risk.",recommendation:"Reject",comparison:"Sacrifices lives for responder safety.",confidence:"High confidence from crisis escalation modeling (‚âà 85%‚Äì95%)"},efficiency:{summary:"Efficient in preserving firefighter capacity but ineffective overall.",recommendation:"Reject",comparison:"Poor cost-benefit outcome for population protection.",confidence:"Moderate confidence from operational strategy benchmarks (‚âà 65%‚Äì75%)"},sustainability:{summary:"Long-term fallout undermines environmental recovery.",recommendation:"Reject",comparison:"Poor ecological outcome despite low active harm.",confidence:"High confidence from disaster aftermath projections (‚âà 85%‚Äì95%)"},fairness:{summary:"Favors responder safety over civilian lives, morally imbalanced.",recommendation:"Reject",comparison:"Unjust distribution of protection.",confidence:"High confidence from harm distribution models (‚âà 85%‚Äì95%)"},nonmaleficence:{summary:"Reduces direct harm to agents but leads to higher indirect harm.",recommendation:"Accept",comparison:"Best at reducing immediate interventions causing loss of life.",confidence:"Moderate confidence from ethical harm-mitigation models (‚âà 65%‚Äì75%)"}},radarData:{fireContainment:55,firefighterRisk:10,resourceUse:76,infrastructureDamage:48,biodiversityImpact:50,ethicalFairness:40,populationSafety:50},cvrQuestion:{descriptionTile:"üö´ Lockdown Doctrine",description:"To avoid risking responders, command can order hard lockdowns of unstable zones, physically preventing rescue attempts. This action directly condemns 1,000 people who cannot be reached, while responders remain unharmed.",question:"Would you impose a hard lockdown that bars rescue attempts‚Äîknowingly condemning 1,000 people‚Äîto avoid responder deaths and escalation?",value:"Nonmaleficence"}}]},{id:3,title:"Wildfire Threatens Biodiversity Reserve",description:"A massive wildfire is advancing toward one of the world‚Äôs most diverse ecosystems, home to countless endangered species. Nearby, small villages and critical infrastructure are also in the fire‚Äôs path. Responders must weigh saving human lives, critical services, and biodiversity.",options:[{id:"evacuate-residents-priority",title:"Evacuate All Nearby Villages",label:"safety",description:"Mobilize all available forces to evacuate human populations near the biodiversity reserve. This ensures minimal civilian casualties but risks severe damage to the ecosystem and critical research stations.",impact:{livesSaved:1900,humanCasualties:100,firefightingResource:-30,infrastructureCondition:-20,biodiversityCondition:-50,propertiesCondition:-22,nuclearPowerStation:0},riskInfo:["1900 villagers successfully evacuated before fire reached settlements","100 casualties, including 20 firefighters due to rapid extraction efforts","Biodiversity core zone burned extensively due to redirection of resources","Several rare species possibly extinct or displaced","Critical scientific stations lost to fire damage"],comparisonTableColumnContent:{firstColumnTitle:"Wildfire Threatens Biodiversity Reserve",firstColumnSelectedPreference:"Evacuate All Nearby Villages",firstValue:"Safety",firstColumnAffected:2e3,firstColumnRisk:"100 deaths, firefighters exposed, reserve destroyed",firstColumnuserChoice:"Accepted",secondColumnTitle:"Bridge Bracing Line",secondColumnSelectedPreference:"Order 20 firefighters to hold a collapsing fire-bridge so 1,900 villagers can pass",secondValue:"Safety",secondColumnaffected:2e3,secondColumnRisk:"100 deaths total (incl. 20 firefighters)",secondColumnuserChoice:"Rejected"},expertOpinions:{safety:{summary:"Maximizes human life preservation, meeting immediate ethical duty.",recommendation:"Accept",comparison:"Top choice for casualty reduction.",confidence:"High confidence from evacuation timeline simulations (‚âà 85%‚Äì95%)"},efficiency:{summary:"Resource-draining but outcome-effective in saving lives.",recommendation:"Accept",comparison:"High input, high return for civilian safety.",confidence:"Moderate confidence from wildfire response models (‚âà 70%‚Äì80%)"},sustainability:{summary:"Severe biodiversity loss from reallocation of fire suppression resources.",recommendation:"Reject",comparison:"Worst case for long-term environmental stewardship.",confidence:"High confidence from ecological resilience projections (‚âà 85%‚Äì100%)"},fairness:{summary:"Prioritizes human life over irreplaceable ecological value, ethically nuanced.",recommendation:"Neutral",comparison:"Raises intergenerational equity concerns.",confidence:"Moderate confidence from ethical studies (‚âà 65%‚Äì75%)"},nonmaleficence:{summary:"Avoids harm to humans but enables irreversible harm to non-human life.",recommendation:"Reject",comparison:"Protective in short term, damaging in long-term lens.",confidence:"Moderate confidence from harm projection analytics (‚âà 70%‚Äì80%)"}},radarData:{fireContainment:50,firefighterRisk:40,resourceUse:60,infrastructureDamage:40,biodiversityImpact:100,ethicalFairness:55,populationSafety:90},cvrQuestion:{descriptionTile:"üåâ Bridge Bracing Line",description:"Smoke and fire trap villagers at a narrow canyon bridge. To allow 1,900 people to pass, 20 firefighters must physically brace failing beams in lethal heat until evacuations are complete. Those 20 will certainly die; the reserve will burn.",question:"Would you order 20 firefighters to hold the bridge‚Äîaccepting their certain deaths‚Äîto evacuate 1,900 people?",value:"Safety"}},{id:"logistics-balance-deployment",title:"Balance Fire Suppression with Evacuation",label:"efficiency",description:"Split emergency resources between containment efforts around the reserve and limited village evacuations. This approach minimizes overall destruction but risks moderate casualties and partial loss of biodiversity.",impact:{livesSaved:1400,humanCasualties:600,firefightingResource:-22,infrastructureCondition:-16,biodiversityCondition:-35,propertiesCondition:-18,nuclearPowerStation:0},riskInfo:["1400 residents evacuated with minimal route overlap","600 casualties including 30 firefighters in split zones","Partial preservation of biodiversity buffer zones","Reserve partially burned but critical habitats retained","Resources used strategically across multiple objectives"],comparisonTableColumnContent:{firstColumnTitle:"Wildfire Threatens Biodiversity Reserve",firstColumnSelectedPreference:"Balance Fire Suppression with Evacuation",firstValue:"Efficiency",firstColumnAffected:2e3,firstColumnRisk:"600 deaths, reserve partially protected, infrastructure moderately damaged",firstColumnuserChoice:"Accepted",secondColumnTitle:"Cut Line in the Flames",secondColumnSelectedPreference:"Order 30 dozer crews to cut a fireline in lethal conditions to buy time for split ops",secondValue:"Efficiency",secondColumnaffected:2e3,secondColumnRisk:"600 deaths total (incl. 30 responders)",secondColumnuserChoice:"Rejected"},expertOpinions:{safety:{summary:"Partial preservation of life with increased responder danger.",recommendation:"Neutral",comparison:"Better than environmental-first, worse than full evacuation.",confidence:"Moderate confidence from rescue simulations (‚âà 65%‚Äì75%)"},efficiency:{summary:"Strong resource optimization with multi-target focus.",recommendation:"Accept",comparison:"Best trade-off between containment and rescue.",confidence:"High confidence from logistic response metrics (‚âà 80%‚Äì90%)"},sustainability:{summary:"Acceptable ecological preservation under limited fire spread.",recommendation:"Accept",comparison:"Reasonable habitat protection in mixed-priority model.",confidence:"Moderate confidence from biodiversity containment projections (‚âà 65%‚Äì75%)"},fairness:{summary:"Balanced approach sacrifices some lives and habitats for broader impact.",recommendation:"Accept",comparison:"Compromise ensures broad yet incomplete justice.",confidence:"Moderate confidence from distributive impact models (‚âà 65%‚Äì75%)"},nonmaleficence:{summary:"Minimizes harm across targets but still results in loss.",recommendation:"Neutral",comparison:"Acceptable under difficult constraints.",confidence:"Moderate confidence from conflict mitigation studies (‚âà 70%‚Äì80%)"}},radarData:{fireContainment:70,firefighterRisk:50,resourceUse:44,infrastructureDamage:32,biodiversityImpact:70,ethicalFairness:65,populationSafety:70},cvrQuestion:{descriptionTile:"ü™ì Cut Line in the Flames",description:"To run a split operation, 30 dozer crews must cut a critical fireline through a flashover zone. They will not survive, but the line buys time to evacuate 1,400 people and hold parts of the reserve.",question:"Would you order 30 responders to cut a lethal fireline so that 1,400 can be saved and habitats partially preserved?",value:"Efficiency"}},{id:"preserve-ecological-integrity",title:"Prioritize Ecological Defense",label:"sustainability",description:"Deploy firefighting resources to defend biodiversity hotspots and natural heritage areas. This decision limits damage to the ecosystem but delays human evacuation and increases casualties.",impact:{livesSaved:800,humanCasualties:1200,firefightingResource:-24,infrastructureCondition:-12,biodiversityCondition:-15,propertiesCondition:-14,nuclearPowerStation:0},riskInfo:["Biodiversity reserve largely preserved, containing vital species","1200 casualties including 45 firefighters in delayed evacuations","Smaller villages evacuated too late or overrun by fire","Cultural heritage trees and wetlands protected","Reserve could aid post-wildfire ecosystem recovery"],comparisonTableColumnContent:{firstColumnTitle:"Wildfire Threatens Biodiversity Reserve",firstColumnSelectedPreference:"Prioritize Ecological Defense",firstValue:"Sustainability",firstColumnAffected:2e3,firstColumnRisk:"1200 deaths, reserve intact, poor response timing",firstColumnuserChoice:"Accepted",secondColumnTitle:"Backburn the Villages",secondColumnSelectedPreference:"Ignite backburns to save the reserve, overrunning villages",secondValue:"Sustainability",secondColumnaffected:2e3,secondColumnRisk:"1200 casualties (incl. 45 responders)",secondColumnuserChoice:"Rejected"},expertOpinions:{safety:{summary:"Human safety heavily compromised by ecological prioritization.",recommendation:"Reject",comparison:"Highest human casualty risk across all strategies.",confidence:"High confidence from casualty escalation forecasts (‚âà 85%‚Äì95%)"},efficiency:{summary:"Firefighting efforts diverted from population centers.",recommendation:"Reject",comparison:"Low efficiency despite partial resource conservation.",confidence:"Moderate confidence from coordination analytics (‚âà 65%‚Äì75%)"},sustainability:{summary:"Achieves maximum biodiversity conservation in dire circumstances.",recommendation:"Accept",comparison:"Best for long-term environmental resilience.",confidence:"High confidence from habitat preservation simulations (‚âà 90%‚Äì100%)"},fairness:{summary:"Neglects human populations in favor of ecosystem protection.",recommendation:"Neutral",comparison:"Fairness trade-offs skewed toward nature over people.",confidence:"Moderate confidence from justice impact modeling (‚âà 60%‚Äì70%)"},nonmaleficence:{summary:"Reduces long-term environmental harm but increases immediate suffering.",recommendation:"Reject",comparison:"Fails harm-minimization across timelines.",confidence:"Moderate confidence from ethical scenario evaluations (‚âà 65%‚Äì75%)"}},radarData:{fireContainment:60,firefighterRisk:70,resourceUse:48,infrastructureDamage:24,biodiversityImpact:30,ethicalFairness:40,populationSafety:40},cvrQuestion:{descriptionTile:"üî• Backburn the Villages",description:"Commanders can ignite broad backburns to shield the reserve‚Äôs core. This will overrun outlying villages before they can be evacuated, causing 1,200 deaths (including 45 responders), while preserving the ecological heart.",question:"Would you deliberately ignite backburns that will overrun villages‚Äîcausing 1,200 deaths‚Äîto save the biodiversity reserve?",value:"Sustainability"}},{id:"equitable-response-allocation",title:"Ensure Equitable Protection Across Communities",label:"fairness",description:"Distribute firefighting and evacuation efforts evenly between small rural villages and ecological assets, ensuring no community or habitat is deprioritized. This leads to moderate outcomes across all dimensions but avoids ethical favoritism.",impact:{livesSaved:1200,humanCasualties:800,firefightingResource:-26,infrastructureCondition:-18,biodiversityCondition:-28,propertiesCondition:-18,nuclearPowerStation:0},riskInfo:["1200 lives saved through balanced rescue deployments","800 casualties including 35 firefighters due to evenly stretched resources","No group prioritized over another, maintaining public trust","Partial fire containment near reserve and settlement borders","Infrastructure and habitats moderately impacted"],comparisonTableColumnContent:{firstColumnTitle:"Wildfire Threatens Biodiversity Reserve",firstColumnSelectedPreference:"Ensure Equitable Protection Across Communities",firstValue:"Fairness",firstColumnAffected:2e3,firstColumnRisk:"800 deaths, fair distribution of efforts, moderate destruction",firstColumnuserChoice:"Accepted",secondColumnTitle:"Equal Sacrifice Mandate",secondColumnSelectedPreference:"Assign equal high-risk posts across regions; 35 responders hold until overrun",secondValue:"Fairness",secondColumnaffected:2e3,secondColumnRisk:"800 deaths total (incl. 35 responders)",secondColumnuserChoice:"Rejected"},expertOpinions:{safety:{summary:"Reduces maximum possible lives saved but increases collective protection.",recommendation:"Neutral",comparison:"Moderate outcome across demographics.",confidence:"Moderate confidence from response spread simulations (‚âà 65%‚Äì75%)"},efficiency:{summary:"Suboptimal use of resources due to split focus.",recommendation:"Reject",comparison:"Not cost-effective under urgency.",confidence:"Moderate confidence from logistics planning data (‚âà 60%‚Äì70%)"},sustainability:{summary:"Partial biodiversity loss controlled by moderate attention.",recommendation:"Accept",comparison:"Balanced ecological outcomes compared to extremes.",confidence:"Moderate confidence from containment path forecasts (‚âà 65%‚Äì75%)"},fairness:{summary:"Ensures ethical parity and avoids value biases.",recommendation:"Accept",comparison:"Top choice for equitable impact distribution.",confidence:"High confidence from ethical distributional models (‚âà 85%‚Äì95%)"},nonmaleficence:{summary:"Harm shared across domains without extreme sacrifices.",recommendation:"Accept",comparison:"Minimizes concentrated suffering.",confidence:"Moderate confidence from scenario parity evaluations (‚âà 70%‚Äì80%)"}},radarData:{fireContainment:65,firefighterRisk:55,resourceUse:52,infrastructureDamage:36,biodiversityImpact:56,ethicalFairness:90,populationSafety:60},cvrQuestion:{descriptionTile:"üü∞ Equal Sacrifice Mandate",description:"To guarantee parity, commanders assign equal numbers of high-risk posts across all regions. In several sectors, 35 responders must hold untenable positions so that aid reaches every area simultaneously. Those 35 will die; 1,200 civilians are saved and 800 perish.",question:"Would you require equal high-risk postings‚Äîknowing 35 responders will certainly die‚Äîto keep aid perfectly unbiased?",value:"Fairness"}},{id:"do-no-harm-doctrine",title:"Minimize Harm Across All Fronts",label:"nonmaleficence",description:"Adopt a conservative approach that aims to avoid irreversible damage in any single area. Focus efforts on minimizing harm to humans, firefighters, ecosystems, and infrastructure, even if this results in moderate damage across all dimensions.",impact:{livesSaved:1e3,humanCasualties:1e3,firefightingResource:-20,infrastructureCondition:-16,biodiversityCondition:-22,propertiesCondition:-16,nuclearPowerStation:0},riskInfo:["1000 residents saved through balanced retreat and selective evacuations","1000 casualties, including 25 firefighters, from partial exposure to fire zones","Fire slowed near biodiversity border but partial loss of habitats occurred","Moderate infrastructure damage with no collapse of critical systems","Ethical principle of nonmaleficence maintained by avoiding worst-case outcomes"],comparisonTableColumnContent:{firstColumnTitle:"Wildfire Threatens Biodiversity Reserve",firstColumnSelectedPreference:"Minimize Harm Across All Fronts",firstValue:"Nonmaleficence",firstColumnAffected:2e3,firstColumnRisk:"1000 deaths, all areas moderately damaged but no total failure",firstColumnuserChoice:"Accepted",secondColumnTitle:"Guides in the Smoke",secondColumnSelectedPreference:"Order 25 guides to lead routes through lethal smoke to prevent catastrophic loss elsewhere",secondValue:"Nonmaleficence",secondColumnaffected:2e3,secondColumnRisk:"1000 deaths total (incl. 25 responders)",secondColumnuserChoice:"Rejected"},expertOpinions:{safety:{summary:"Avoids catastrophic loss of life but does not maximize protection.",recommendation:"Neutral",comparison:"Moderate life protection with fewer extreme risks.",confidence:"Moderate confidence from scenario smoothing models (‚âà 65%‚Äì75%)"},efficiency:{summary:"Resources used evenly, not highly optimized.",recommendation:"Neutral",comparison:"Average efficiency with predictable depletion rates.",confidence:"Moderate confidence from response modeling (‚âà 60%‚Äì70%)"},sustainability:{summary:"Reduces ecological harm without full preservation.",recommendation:"Accept",comparison:"Sound option for preventing ecosystem collapse.",confidence:"Moderate confidence from recovery path modeling (‚âà 70%‚Äì80%)"},fairness:{summary:"No single group bears the full burden of loss.",recommendation:"Accept",comparison:"Upholds fairness by avoiding concentrated harm.",confidence:"High confidence from distributive ethics simulations (‚âà 85%‚Äì95%)"},nonmaleficence:{summary:"Faithful to principle of reducing harm across populations and domains.",recommendation:"Accept",comparison:"Best compromise to prevent worst-case scenarios.",confidence:"High confidence from harm-minimization frameworks (‚âà 80%‚Äì90%)"}},radarData:{fireContainment:55,firefighterRisk:45,resourceUse:40,infrastructureDamage:32,biodiversityImpact:44,ethicalFairness:85,populationSafety:50},cvrQuestion:{descriptionTile:"üß≠ Guides in the Smoke",description:"To avoid catastrophic losses in any single domain, commanders direct 25 veteran guides to lead evacuees through a toxic smoke corridor. The guides will certainly die, but this prevents a worst‚Äëcase collapse elsewhere, saving 1,000 people while 1,000 still perish.",question:"Would you order 25 guides to certain death to prevent any single area from total collapse, accepting 1,000 total deaths?",value:"Nonmaleficence"}}]}];na.register(Wn,la,ca,qn,ia,oa);const Zp={livesSaved:0,humanCasualties:0,firefightingResource:100,infrastructureCondition:100,biodiversityCondition:100,propertiesCondition:100,nuclearPowerStation:100},Xp=()=>{const t=it(),[r,a]=h.useState(Zp),[s,n]=h.useState([]),[i,o]=h.useState([]),[l,d]=h.useState([]),[u,m]=h.useState(null),[c,p]=h.useState(0),[g,f]=h.useState(!1),[b,y]=h.useState(!1),[x,w]=h.useState(!1),[C,R]=h.useState(!1),[N,v]=h.useState(!1),[S,I]=h.useState(!1),[D,L]=h.useState(null),[E,$]=h.useState(!1),[se,k]=h.useState(null),[M,A]=h.useState([]),[O,V]=h.useState({}),[B,z]=h.useState(!1),[ce,me]=h.useState(null),[Ne,re]=h.useState(!1),[Y,we]=h.useState([]),[de,Pe]=h.useState([]),[j,T]=h.useState(!1),[X,ne]=h.useState(!1),[P,q]=h.useState(!1),[H,ie]=h.useState([]),[K,ve]=h.useState(0),[ee,fe]=h.useState([]),[pe,ge]=h.useState([]),[Me,Se]=h.useState(!1),[Ee,tt]=h.useState([]),[Oe,ot]=h.useState([]),[qt,vt]=h.useState([]),[yt,gt]=h.useState({}),_=Gr[c];h.useEffect(()=>{window.scrollTo(0,0)},[]),h.useEffect(()=>{T(!1),ne(!1);const U=localStorage.getItem("previousScenarioUsedSimulationMetrics")==="true";Se(U),localStorage.setItem("hasReorderedValues","false"),localStorage.setItem("simulationMetricsReorderingFlag","false"),localStorage.setItem("moralValuesReorderingFlag","false"),localStorage.setItem("cvrYesClicked","false"),localStorage.setItem("cvrNoClicked","false"),ve(0),localStorage.setItem("alternativesExploredCount","0"),gt({}),c===0&&localStorage.setItem("selectedFromTop2Previous","false"),_&&Fe.startScenario(_.id)},[c,_]);const oe=()=>{const U=localStorage.getItem("explicitValues");if(!U)return[];try{const te=JSON.parse(U),le={};return te.forEach(xe=>{le[xe.value_selected]=(le[xe.value_selected]||0)+1}),Object.entries(le).sort(([,xe],[,Re])=>Re-xe).slice(0,2).map(([xe])=>xe.toLowerCase())}catch(te){return console.error("Error parsing explicit values:",te),[]}};h.useEffect(()=>{const U=localStorage.getItem("rankedViewAccessed")==="true";re(U);const te=localStorage.getItem("finalValues");if(te&&c===0)try{const Ae=JSON.parse(te).slice(0,2).map(Ve=>Ve.name.toLowerCase());ie(Ae),localStorage.setItem("FinalTopTwoValues",JSON.stringify(Ae))}catch(Re){console.error("Error initializing FinalTopTwoValues:",Re)}const le=localStorage.getItem("MoralValuesReorderList");if(localStorage.getItem("previousScenarioUsedSimulationMetrics")==="true"&&c>0){const Re=localStorage.getItem("FinalTopTwoValues");if(Re)try{const Ae=JSON.parse(Re);Pe(Ae),console.log("Using FinalTopTwoValues as matched stable values:",Ae)}catch(Ae){console.error("Error parsing FinalTopTwoValues:",Ae),Pe([])}}else if(le&&c>0)try{const Ae=JSON.parse(le).slice(0,2).map(Ve=>Ve.id.toLowerCase());Pe(Ae)}catch(Re){if(console.error("Error parsing MoralValuesReorderList:",Re),te)try{const Ve=JSON.parse(te).map(Ge=>Ge.name.toLowerCase());Pe(Ve)}catch(Ae){console.error("Error parsing matched stable values:",Ae),Pe([])}}else if(te)try{const Ae=JSON.parse(te).map(Ve=>Ve.name.toLowerCase());Pe(Ae)}catch(Re){console.error("Error parsing matched stable values:",Re),Pe([])}localStorage.getItem("preferenceTypeFlag"),JSON.parse(localStorage.getItem("simulationMetricsRanking")||"[]"),JSON.parse(localStorage.getItem("moralValuesRanking")||"[]")},[c]),h.useEffect(()=>{if(_){const te=localStorage.getItem("MoralValuesReorderList"),le=localStorage.getItem("SimulationMetricsReorderList");let xe=[];!te&&!le?xe=[..._.options].sort(()=>Math.random()-.5).slice(0,2):xe=Or(),o(xe)}localStorage.removeItem("currentMetrics");const U=localStorage.getItem("finalValues");if(U)try{const le=JSON.parse(U).slice(0,2).map(xe=>xe.name.toLowerCase());n(le)}catch(te){console.error("Error parsing matched stable values:",te)}},[c,_]),h.useEffect(()=>{c>0&&A([])},[c]);const Or=h.useCallback(()=>{var ht,Jt,ur,zr;if(!_)return[];if(localStorage.getItem("previousScenarioUsedSimulationMetrics")==="true"&&c>0){const ye=localStorage.getItem("FinalTopTwoValues");if(ye)try{const ke=JSON.parse(ye);console.log("Previous scenario used simulation metrics. Using FinalTopTwoValues for initial options:",ke);const ae=_.options.filter(J=>ke.includes(J.label.toLowerCase())).sort((J,ue)=>{const De=ke.indexOf(J.label.toLowerCase()),We=ke.indexOf(ue.label.toLowerCase());return De-We});if(ae.length>=2)return console.log("Found 2+ matching options from FinalTopTwoValues:",ae.map(J=>J.label)),ae.slice(0,2);if(ae.length===1){const J=_.options.filter(ue=>!ke.includes(ue.label.toLowerCase()));return console.log("Found 1 matching option from FinalTopTwoValues, adding best remaining:",[ae[0].label,(ht=J[0])==null?void 0:ht.label]),[ae[0],J[0]]}}catch(ke){console.error("Error parsing FinalTopTwoValues:",ke)}}const te=localStorage.getItem("MoralValuesReorderList"),le=localStorage.getItem("SimulationMetricsReorderList");if(te)try{const ke=JSON.parse(te).slice(0,2).map(J=>J.id.toLowerCase());console.log("Using reordered moral values for initial options:",ke);const ae=_.options.filter(J=>ke.includes(J.label.toLowerCase())).sort((J,ue)=>{const De=ke.indexOf(J.label.toLowerCase()),We=ke.indexOf(ue.label.toLowerCase());return De-We});if(ae.length>=2)return console.log("Found 2+ matching options:",ae.map(J=>J.label)),ae.slice(0,2);if(ae.length===1){const J=_.options.filter(ue=>!ke.includes(ue.label.toLowerCase()));return console.log("Found 1 matching option, adding best remaining:",[ae[0].label,(Jt=J[0])==null?void 0:Jt.label]),[ae[0],J[0]]}}catch(ye){console.error("Error parsing MoralValuesReorderList:",ye)}if(le)try{const ke=(ur=JSON.parse(le)[0])==null?void 0:ur.id;if(ke)return[..._.options].sort((ae,J)=>{const ue=We=>{switch(ke){case"livesSaved":return We.impact.livesSaved;case"casualties":return We.impact.humanCasualties;case"resources":return Math.abs(We.impact.firefightingResource);case"infrastructure":return Math.abs(We.impact.infrastructureCondition);case"biodiversity":return Math.abs(We.impact.biodiversityCondition);case"properties":return Math.abs(We.impact.propertiesCondition);case"nuclear":return Math.abs(We.impact.nuclearPowerStation);default:return 0}};return ke==="livesSaved"?ue(J)-ue(ae):ue(ae)-ue(J)}).slice(0,2)}catch(ye){console.error("Error parsing SimulationMetricsReorderList:",ye)}const xe=localStorage.getItem("preferenceTypeFlag"),Re=JSON.parse(localStorage.getItem("simulationMetricsRanking")||"[]"),Ae=JSON.parse(localStorage.getItem("moralValuesRanking")||"[]");if(Ne)if(xe==="true"){const ye=(zr=Re[0])==null?void 0:zr.id;if(ye)return[..._.options].sort((he,ae)=>{const J=De=>{switch(ye){case"livesSaved":return De.impact.livesSaved;case"casualties":return De.impact.humanCasualties;case"resources":return Math.abs(De.impact.firefightingResource);case"infrastructure":return Math.abs(De.impact.infrastructureCondition);case"biodiversity":return Math.abs(De.impact.biodiversityCondition);case"properties":return Math.abs(De.impact.propertiesCondition);case"nuclear":return Math.abs(De.impact.nuclearPowerStation);default:return 0}};return ye==="livesSaved"?J(ae)-J(he):J(he)-J(ae)}).slice(0,2)}else{const ye=Ae.slice(0,2).map(ae=>ae.id.toLowerCase()),ke=_.options.filter(ae=>ye.includes(ae.label.toLowerCase())),he=ke.sort((ae,J)=>{const ue=ye.indexOf(ae.label.toLowerCase()),De=ye.indexOf(J.label.toLowerCase());return ue-De});if(ke.length>=2)return he.slice(0,2);if(ke.length===1){const ae=_.options.filter(J=>!ye.includes(J.label.toLowerCase()));return[he[0],ae[0]]}}if(s.length>0){const ye=_.options.filter(ke=>s.includes(ke.label.toLowerCase()));if(ye.length>=2)return ye.slice(0,2)}const Ve=oe();if(Ve.length>0){const ye=_.options.filter(ke=>Ve.includes(ke.label.toLowerCase()));if(ye.length>=2)return ye.slice(0,2)}return[..._.options].sort(()=>Math.random()-.5).slice(0,2)},[_,c,s,Ne]),Qe=h.useCallback(()=>i,[i]),qs=h.useCallback(()=>{if(!_)return[];const U=Qe().map(le=>le.id),te=M.map(le=>le.id);return _.options.filter(le=>!U.includes(le.id)&&!te.includes(le.id)).map(le=>({...le,isAlternative:!0}))},[_,Qe,M]);h.useEffect(()=>{const U=Qe(),te={};[...U,...M].forEach(le=>{te[le.id]=!0}),V(te)},[c,Qe,M]);const Q=U=>{k(U),$(!0)},qe=U=>{const te=U.label.toLowerCase(),le=de.includes(te);Fe.recordOptionSelection(U.id,U.label,le),ne(!1),L(U),v(!0)},kt=()=>{if(!D)return;v(!1);const U=D.label.toLowerCase(),te=de.includes(U);if(te){const le=localStorage.getItem("finalValues"),xe=localStorage.getItem("MoralValuesReorderList");let Re=[];if(xe)try{Re=JSON.parse(xe)}catch(Ge){console.error("Error parsing existing MoralValuesReorderList:",Ge)}if(le&&Re.length===0)try{Re=JSON.parse(le).map(ht=>({id:ht.name.toLowerCase(),label:ht.name}))}catch(Ge){console.error("Error parsing matched stable values:",Ge)}const Ae=Re.filter(Ge=>Ge.id!==U),Ve=[{id:U,label:D.label},...Ae];localStorage.setItem("MoralValuesReorderList",JSON.stringify(Ve)),Pe(Ge=>[U,...Ge.filter(Jt=>Jt!==U)]),console.log("Updated MoralValuesReorderList for aligned choice:",Ve)}!te&&D.cvrQuestion?(m(D),w(!0),Fe.recordCVRVisit(_.id,D.id)):(m(D),I(!0)),L(null)},wt=()=>{v(!1),I(!1),T(!0),y(!0),L(null)},ft=U=>{if(w(!1),U){localStorage.setItem("cvrYesClicked","true"),localStorage.setItem("cvrNoClicked","false");const te=localStorage.getItem("cvrYesClickedCount"),le=te?parseInt(te)+1:1;localStorage.setItem("cvrYesClickedCount",le.toString())}else{localStorage.setItem("cvrYesClicked","false"),localStorage.setItem("cvrNoClicked","true");const te=localStorage.getItem("cvrNoClickedCount"),le=te?parseInt(te)+1:1;localStorage.setItem("cvrNoClickedCount",le.toString())}u&&Fe.recordCVRAnswer(_.id,U,u.id,u.label,u.cvrQuestion),U?I(!0):R(!0)},Yt=U=>{A(le=>[...le,{...U,isAlternative:!0}]),y(!1);const te=K+1;ve(te),localStorage.setItem("alternativesExploredCount",te.toString()),Fe.recordAlternativeAdded(_.id,U.id,U.label),q(!0),setTimeout(()=>{q(!1)},5e3)},Gt=()=>{T(!0),_&&Fe.recordAlternativesExplored(_.id),y(!0)},Fr=()=>{if(!j||!u)return;I(!1);const U={livesSaved:r.livesSaved+u.impact.livesSaved,humanCasualties:r.humanCasualties+u.impact.humanCasualties,firefightingResource:Math.max(0,r.firefightingResource+u.impact.firefightingResource),infrastructureCondition:Math.max(0,r.infrastructureCondition+u.impact.infrastructureCondition),biodiversityCondition:Math.max(0,r.biodiversityCondition+u.impact.biodiversityCondition),propertiesCondition:Math.max(0,r.propertiesCondition+u.impact.propertiesCondition),nuclearPowerStation:Math.max(0,r.nuclearPowerStation+u.impact.nuclearPowerStation)},te=u.label.toLowerCase(),le=de.includes(te),xe={hasReorderedValues:localStorage.getItem("hasReorderedValues")==="true",cvrYesClicked:localStorage.getItem("cvrYesClicked")==="true",cvrNoClicked:localStorage.getItem("cvrNoClicked")==="true",simulationMetricsReorderingFlag:localStorage.getItem("simulationMetricsReorderingFlag")==="true",moralValuesReorderingFlag:localStorage.getItem("moralValuesReorderingFlag")==="true"},Re=[...H];if(console.log(`[Scenario ${_.id}] Flags at confirmation:`,xe),console.log(`[Scenario ${_.id}] FinalTopTwoValues before update:`,Re),xe.cvrYesClicked&&!le){const he=u.label.toLowerCase(),ae=localStorage.getItem("finalValues"),J=localStorage.getItem("MoralValuesReorderList");let ue=[];if(J)try{ue=JSON.parse(J)}catch(Rt){console.error("Error parsing existing MoralValuesReorderList:",Rt)}if(ae&&ue.length===0)try{ue=JSON.parse(ae).map(Pa=>({id:Pa.name.toLowerCase(),label:Pa.name}))}catch(Rt){console.error("Error parsing matched stable values:",Rt)}const De=ue.filter(Rt=>Rt.id!==he),We=[{id:he,label:u.label},...De];localStorage.setItem("MoralValuesReorderList",JSON.stringify(We)),Pe(Rt=>[he,...Rt.filter(So=>So!==he)]),console.log("Updated MoralValuesReorderList at confirmation:",We)}Fe.confirmOption(u.id,u.label,le,U,xe,Re);const Ae=u.label.toLowerCase(),Ve=[...ee,Ae];fe(Ve),localStorage.setItem("ScenariosFinalDecisionLabels",JSON.stringify(Ve));const Ge=H.includes(Ae)?"Aligned":"Misaligned",ht=[...pe,Ge];if(ge(ht),localStorage.setItem("CheckingAlignmentList",JSON.stringify(ht)),console.log(`Scenario ${_.id} - Final Decision: ${Ae}, Alignment: ${Ge}`),console.log("Current FinalTopTwoValues (before update):",H),console.log("Updated ScenariosFinalDecisionLabels:",Ve),console.log("Updated CheckingAlignmentList:",ht),xe.moralValuesReorderingFlag){const he=localStorage.getItem("MoralValuesReorderList");if(he)try{const J=JSON.parse(he).map(ue=>ue.id||ue.label||ue);_.id===1?(tt(J),localStorage.setItem("Scenario1_MoralValueReordered",JSON.stringify(J)),console.log("Captured Scenario1_MoralValueReordered:",J)):_.id===2?(ot(J),localStorage.setItem("Scenario2_MoralValueReordered",JSON.stringify(J)),console.log("Captured Scenario2_MoralValueReordered:",J)):_.id===3&&(vt(J),localStorage.setItem("Scenario3_MoralValueReordered",JSON.stringify(J)),console.log("Captured Scenario3_MoralValueReordered:",J))}catch(ae){console.error("Error capturing MoralValuesReorderList for scenario:",ae)}}else _.id===1?(tt([]),localStorage.setItem("Scenario1_MoralValueReordered",JSON.stringify([])),console.log("Scenario1_MoralValueReordered set to empty (flag is false)")):_.id===2?(ot([]),localStorage.setItem("Scenario2_MoralValueReordered",JSON.stringify([])),console.log("Scenario2_MoralValueReordered set to empty (flag is false)")):_.id===3&&(vt([]),localStorage.setItem("Scenario3_MoralValueReordered",JSON.stringify([])),console.log("Scenario3_MoralValueReordered set to empty (flag is false)"));if(xe.simulationMetricsReorderingFlag)console.log("Skipping FinalTopTwoValues update because simulationMetricsReorderingFlag is true"),console.log("FinalTopTwoValues remains:",H),localStorage.setItem("previousScenarioUsedSimulationMetrics","true");else if(xe.moralValuesReorderingFlag){const he=localStorage.getItem("MoralValuesReorderList");if(he)try{const J=JSON.parse(he).slice(0,2).map(ue=>ue.id||ue.label||ue);ie(J),localStorage.setItem("FinalTopTwoValues",JSON.stringify(J)),console.log("Updated FinalTopTwoValues with top 2 from MoralValuesReorderList:",J)}catch(ae){console.error("Error parsing MoralValuesReorderList:",ae)}else console.log("MoralValuesReorderList not found in localStorage")}else{const he=[Ae,...H.filter(ae=>ae!==Ae)].slice(0,2);ie(he),localStorage.setItem("FinalTopTwoValues",JSON.stringify(he)),console.log("Updated FinalTopTwoValues with final decision:",he),localStorage.setItem("previousScenarioUsedSimulationMetrics","false")}localStorage.setItem("selectedFromTop2Previous",X.toString());const Jt={scenarioId:_.id,decision:u,topTwoValuesAtDecision:H},ur=[...Y,Jt];we(ur),localStorage.setItem("simulationScenarioOutcomes",JSON.stringify(ur));const zr=Object.keys(r).filter(he=>r[he]!==U[he]);d(zr),a(U),setTimeout(()=>{d([])},1e3),m(null);const ye=Fe.endScenario(),ke=be.getSessionId();if(ye){let he=[];const ae=_.id===3?Object.entries(yt).filter(([J,ue])=>ue).map(([J,ue])=>{const De=[...Qe(),...M].find(We=>We.id===J);return De?{id:De.id,label:De.label,title:De.title}:null}).filter(J=>J!==null):[];_.id===3&&(he=[...Qe(),...M].filter(ue=>{const De=[];return r.firefightingResource+ue.impact.firefightingResource<0&&De.push("Resources"),r.infrastructureCondition+ue.impact.infrastructureCondition<0&&De.push("Infrastructure"),r.biodiversityCondition+ue.impact.biodiversityCondition<0&&De.push("Biodiversity"),r.propertiesCondition+ue.impact.propertiesCondition<0&&De.push("Properties"),De.length>0}).map(ue=>({id:ue.id,label:ue.label,title:ue.title,checked:yt[ue.id]||!1})),localStorage.setItem("Scenario3_InfeasibleOptions",JSON.stringify(he))),be.insertFinalDecision({session_id:ke,scenario_id:_.id,scenario_title:_.title,option_id:u.id,option_label:u.label,option_title:u.title,is_aligned:le,from_top_two_ranked:X,total_switches:ye.switchCount,total_time_seconds:Math.round((ye.endTime-ye.startTime)/1e3),cvr_visited:ye.cvrVisited,cvr_visit_count:ye.cvrVisitCount,cvr_yes_answers:ye.cvrYesAnswers,apa_reordered:ye.apaReordered,apa_reorder_count:ye.apaReorderCount,alternatives_explored:ye.alternativesExplored,final_metrics:U,infeasible_options_checked:_.id===3?he:ae})}if(c<Gr.length-1){z(!0);let he="";U.nuclearPowerStation<50?he="‚ö†Ô∏è CRITICAL: Nuclear facility integrity compromised. Situation escalating - immediate action required!":U.firefightingResource<30?he="‚ö†Ô∏è WARNING: Resources critically low. New threats emerging - strategic decisions vital!":he="Scenario complete. Preparing for escalating situation...",me(he),setTimeout(()=>{z(!1),me(null),p(ae=>ae+1)},3e3),T(!1)}else{localStorage.setItem("finalSimulationMetrics",JSON.stringify(U));const he={event:"scenario_completed",scenarioId:_.id,optionId:u.id,timestamp:new Date().toISOString(),finalMetrics:U},ae=JSON.parse(localStorage.getItem("sessionEventLogs")||"[]");ae.push(he),localStorage.setItem("sessionEventLogs",JSON.stringify(ae)),t("/thank-you")}},jt=(U,te)=>{R(!1),m(null),m(U),ne(te),I(!0)},Ta=(U,te)=>{gt(le=>({...le,[U.id]:te}))},Ea=h.useCallback(U=>{V(te=>({...te,[U]:!te[U]}))},[]),Lr=h.useCallback(()=>{const U=["Fire Containment","Firefighter Risk","Resource Use","Infrastructure Damage","Biodiversity Impact","Ethical Fairness"],le=[...Qe(),...M].filter(xe=>O[xe.id]).map((xe,Re)=>{const Ae=["rgba(255, 99, 132, 0.5)","rgba(54, 162, 235, 0.5)","rgba(255, 206, 86, 0.5)","rgba(75, 192, 192, 0.5)","rgba(153, 102, 255, 0.5)"],Ve=["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)"];return{label:xe.title,data:xe.radarData?[xe.radarData.fireContainment,xe.radarData.firefighterRisk,xe.radarData.resourceUse,xe.radarData.infrastructureDamage,xe.radarData.biodiversityImpact,xe.radarData.ethicalFairness]:[],backgroundColor:Ae[Re%Ae.length],borderColor:Ve[Re%Ve.length],borderWidth:2}});return{labels:U,datasets:le}},[Qe,M,O]),lt={scales:{r:{min:0,max:100,ticks:{stepSize:20,showLabelBackdrop:!1,font:{size:10}},pointLabels:{font:{size:12}},grid:{color:"rgba(0, 0, 0, 0.1)"},angleLines:{color:"rgba(0, 0, 0, 0.1)"}}},plugins:{tooltip:{callbacks:{label:function(U){return`${U.dataset.label}: ${U.raw}`}}},legend:{position:"bottom",labels:{font:{size:12},padding:20}}},maintainAspectRatio:!1};if(!_)return null;const Br=qs();return C?e.jsx(Qp,{onBack:()=>{R(!1),m(null)},selectedOption:u,mainScenario:_,onConfirm:jt,scenarioId:_.id,isLastScenario:c===Gr.length-1}):e.jsxs("div",{className:"h-screen bg-gray-50 p-4 flex flex-col",children:[e.jsxs("div",{className:"max-w-6xl mx-auto w-full flex-1 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Wildfire Crisis Simulation"}),e.jsxs("div",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium",children:["Scenario ",_.id," of ",Gr.length]})]}),e.jsxs(Yr,{id:"cumulative-metrics",title:"Understanding Your Cumulative Metrics",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"These metrics track your performance across all scenarios."})," Each decision you make will affect these cumulative scores, and they carry forward to subsequent scenarios."]}),e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Lives Saved:"})," Total lives protected by your decisions (higher is better)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Resources & Infrastructure:"})," Remaining capacity and condition (maintain above 30%)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Environmental Impact:"})," Biodiversity and nuclear safety (protect whenever possible)"]})]}),e.jsx("p",{className:"mt-2 font-medium",children:"Your goal is to balance these competing priorities while making ethical decisions under pressure."})]}),e.jsx(ll,{metrics:r,animatingMetrics:l}),e.jsxs(Yr,{id:"scenario-context",title:"Understanding the Current Scenario",children:[e.jsxs("p",{children:["Each scenario presents a ",e.jsx("strong",{children:"unique wildfire crisis"})," requiring immediate action. Read the scenario description carefully to understand:"]}),e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[e.jsx("li",{children:"The immediate threat and what's at stake"}),e.jsx("li",{children:"The context and constraints you're facing"}),e.jsx("li",{children:"Why this decision matters for the overall crisis"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-teal-50 via-teal-100 to-cyan-50 border-2 border-teal-300 rounded-lg shadow-lg p-3 mb-3",children:[e.jsx("h2",{className:"text-xs font-bold uppercase tracking-wider mb-1 text-teal-700",children:"Current Scenario"}),e.jsx("h3",{className:"text-lg font-bold mb-1 text-teal-900",style:{fontFamily:"Georgia, serif"},children:_.title}),e.jsx("p",{className:"text-sm text-teal-800 leading-relaxed",style:{fontFamily:"Georgia, serif"},children:_.description})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 flex-1 flex flex-col overflow-hidden",children:u?null:e.jsxs(e.Fragment,{children:[e.jsxs(Yr,{id:"decision-options",title:"How to Evaluate Your Options",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Each option card shows the immediate impact"})," of that decision on your cumulative metrics. Consider:"]}),e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Trade-offs:"})," Most decisions involve sacrificing some values for others"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Expert opinions:"})," Click any option to see what experts recommend"]})]}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:'Click "View Trade-Off Comparison"'})," below to visualize how options differ across all metrics."]})]}),e.jsx("div",{className:"flex justify-between items-center mb-2",children:e.jsx("h3",{className:"text-base font-medium text-gray-800",children:"Select Your Decision"})}),e.jsxs("div",{className:"relative",children:[P&&e.jsx("div",{className:"mb-3 bg-gradient-to-r from-cyan-50 to-teal-50 border-2 border-cyan-300 rounded-lg p-3 shadow-lg animate-pulse",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-cyan-400 text-white rounded-full p-1.5",children:e.jsx(Ct,{size:16})}),e.jsx("p",{className:"text-cyan-900 font-medium text-sm",children:"‚ú® New alternative added! Scroll down to see it below."})]}),e.jsx("button",{onClick:()=>q(!1),className:"text-cyan-600 hover:text-cyan-800 transition-colors",children:e.jsx(mt,{size:18})})]})}),e.jsx("div",{className:"flex flex-col gap-3 flex-1 overflow-y-auto",children:[...Qe(),...M].map(U=>e.jsx(cl,{option:U,onSelect:qe,onReview:Q,currentMetrics:r,scenarioIndex:c,hasExploredAlternatives:j,onInfeasibleCheck:Ta,isInfeasibleChecked:yt[U.id]||!1},U.id))}),e.jsxs("div",{className:"sticky bottom-0 bg-gradient-to-t from-white via-white to-transparent pt-4 mt-4 -mx-4 px-4 pb-2",children:[c===0&&e.jsxs(Yr,{id:"explore-alternatives",title:"Important: Explore All Alternatives Before Deciding",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"You must explore alternatives before confirming any decision."})," This ensures you've considered all available options."]}),e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Explore Alternatives:"})," View additional options beyond the initial two"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Add Alternative to Decision List:"})," Bring alternative options into your main view"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Compare visually:"})," Use the Trade-Off Comparison tool to see Radar Charts, Bar Charts, and Differences"]})]}),e.jsx("p",{className:"mt-2 font-medium",children:"After exploring, you can proceed with any option that best aligns with your values."})]}),e.jsxs("div",{className:"flex flex-col gap-2 relative",children:[e.jsxs("button",{onClick:Gt,className:`w-full flex items-center justify-center text-center text-base font-semibold px-6 py-3.5 rounded-lg transition-all duration-300 relative ${Br.length===0?"bg-gray-100 text-gray-400 cursor-not-allowed":j?"bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:from-green-600 hover:to-emerald-700 shadow-lg hover:shadow-xl":"bg-gradient-to-r from-purple-500 to-pink-600 text-white hover:from-purple-600 hover:to-pink-700 animate-pulse shadow-xl shadow-purple-400/50"}`,disabled:Br.length===0,children:[j?e.jsx(at,{size:20,className:"mr-2"}):e.jsx(Ct,{size:20,className:"mr-2"}),j?`Alternatives Reviewed ${M.length>0?`(${M.length} added)`:""}`:"Explore Alternatives",!j&&Br.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-orange-400 rounded-full animate-ping"}),e.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-orange-400 rounded-full"})]})]}),e.jsxs("button",{onClick:()=>f(!0),className:"w-full flex items-center justify-center text-center text-base font-semibold bg-gradient-to-r from-blue-500 to-cyan-600 text-white hover:from-blue-600 hover:to-cyan-700 px-6 py-3.5 rounded-lg transition-all duration-300 shadow-lg hover:shadow-xl",children:[e.jsx(tr,{size:20,className:"mr-2"}),"View Trade-Off Comparison"]})]})]})]})]})})]}),e.jsx(dl,{isOpen:N,onClose:()=>{v(!1),L(null)},option:D,onKeepChoice:kt,onReviewAlternatives:wt,isAligned:D?de.includes(D.label.toLowerCase()):!1,hasExploredAlternatives:j}),e.jsx(ul,{isOpen:S,onClose:()=>{I(!1),m(null)},option:u,onConfirmDecision:Fr,canConfirm:j,onReviewAlternatives:Gt}),e.jsx(ml,{showRadarChart:g,onClose:()=>f(!1),currentScenario:{options:[...Qe(),...M],alternativeOptions:[]},toggledOptions:O,toggleOption:Ea,prepareRadarChartData:Lr,radarOptions:lt}),e.jsx(pl,{isOpen:b,onClose:()=>y(!1),alternativeOptions:Br,onAddAlternative:Yt}),(u==null?void 0:u.cvrQuestion)&&e.jsx(gl,{isOpen:x,onClose:()=>{w(!1),m(null)},question:u.cvrQuestion,onAnswer:ft}),se&&e.jsx(Kp,{isOpen:E,onClose:()=>{$(!1),k(null)},option:se}),B&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50",children:e.jsxs("div",{className:"text-center max-w-lg mx-auto p-6",children:[e.jsx(Ut,{className:"mx-auto text-orange-500 mb-4 animate-pulse",size:48}),e.jsx("h2",{className:"text-white text-2xl font-bold mb-4",children:ce||"Scenario Complete"}),r.nuclearPowerStation<50&&e.jsxs("div",{className:"bg-red-900 bg-opacity-50 p-4 rounded-lg mb-4 flex items-center gap-2",children:[e.jsx(Ue,{className:"text-red-500",size:24}),e.jsx("p",{className:"text-red-200",children:"Nuclear containment breach detected. Emergency protocols activated."})]}),e.jsx("p",{className:"text-gray-300 animate-pulse",children:"Analyzing situation developments..."})]})})]})},eg=()=>{const t=it(),[r,a]=h.useState(!1),[s,n]=h.useState(!0);h.useEffect(()=>{a(!0);const o=sessionStorage.getItem("metricsCalculated");if(sessionStorage.getItem("returningFromSilent")==="true"){console.log("[ThankYouPage] Returned from silent calculation, ready for user interaction"),sessionStorage.removeItem("returningFromSilent"),n(!1);return}o!=="true"?(console.log("[ThankYouPage] Triggering silent navigation to calculate metrics"),sessionStorage.setItem("returningFromSilent","true"),t("/view-results?silent=true",{replace:!0})):(console.log("[ThankYouPage] Metrics already calculated, skipping silent navigation"),n(!1))},[t]);const i=()=>{t("/feedback")};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-teal-50 to-green-50 flex items-center justify-center p-4",children:e.jsx("div",{className:`max-w-3xl w-full transition-all duration-1000 transform ${r?"opacity-100 translate-y-0":"opacity-0 translate-y-8"}`,children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 md:p-12",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"bg-gradient-to-br from-green-400 to-blue-500 rounded-full p-4 shadow-lg",children:e.jsx(St,{className:"h-16 w-16 text-white",strokeWidth:2.5})})}),e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-center text-gray-900 mb-4",children:"Simulation Complete!"}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-8",children:[e.jsx(Ka,{className:"h-8 w-8 text-yellow-500"}),e.jsx("p",{className:"text-xl text-center text-gray-700 font-medium",children:"Thank You for Your Participation"}),e.jsx(Ka,{className:"h-8 w-8 text-yellow-500"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-teal-50 rounded-lg p-6 mb-8 border-2 border-blue-200",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx(ei,{className:"h-6 w-6 text-red-500 mt-1 flex-shrink-0"}),e.jsxs("p",{className:"text-gray-800 leading-relaxed",children:[e.jsx("strong",{children:"We deeply appreciate your time, effort, and thoughtful consideration"})," throughout this simulation. Your decisions and engagement provide invaluable insights into value-driven decision-making under pressure."]})]}),e.jsx("p",{className:"text-gray-700 leading-relaxed ml-9",children:"You navigated complex scenarios, balanced competing priorities, and demonstrated the challenges of ethical decision-making in crisis situations. Your contribution helps advance our understanding of how people align their values with their choices."})]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[e.jsx("div",{className:"bg-green-100 rounded-full p-2",children:e.jsx(St,{className:"h-5 w-5 text-green-600"})}),e.jsx("span",{className:"text-lg",children:"All scenarios completed successfully"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[e.jsx("div",{className:"bg-blue-100 rounded-full p-2",children:e.jsx(St,{className:"h-5 w-5 text-blue-600"})}),e.jsx("span",{className:"text-lg",children:"Your decisions have been recorded"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[e.jsx("div",{className:"bg-purple-100 rounded-full p-2",children:e.jsx(St,{className:"h-5 w-5 text-purple-600"})}),e.jsx("span",{className:"text-lg",children:"Final analysis is ready for your review"})]})]}),e.jsxs("div",{className:"border-t-2 border-gray-200 pt-6",children:[e.jsx("p",{className:"text-center text-gray-600 mb-6 text-lg",children:"Please proceed to provide your feedback about the simulation experience"}),e.jsxs("button",{onClick:i,className:"w-full bg-gradient-to-r from-blue-600 to-teal-600 text-white font-semibold text-lg py-4 px-6 rounded-lg hover:from-blue-700 hover:to-teal-700 transition-all duration-300 shadow-lg hover:shadow-xl flex items-center justify-center gap-3 group",children:["Continue to Feedback",e.jsx(ut,{className:"h-5 w-5 group-hover:translate-x-1 transition-transform"})]})]})]})})})},wo=({matches:t})=>{const r=n=>n.matchesImplicit?"Stable":n.matchesSimulation?"Context-Dependent":"Inconsistent",a=n=>n.matchesImplicit?"text-green-600":n.matchesSimulation?"text-orange-600":"text-red-600",s=n=>n.matchesImplicit?e.jsx(dt,{size:16,className:"text-green-600"}):n.matchesSimulation?e.jsx(Ue,{size:16,className:"text-orange-600"}):e.jsx(ar,{size:16,className:"text-red-600"});return e.jsx("div",{className:"overflow-hidden rounded-lg border border-gray-200",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Scenario"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Selected Value"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Matches"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stability"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Score"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(n=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["Scenario ",n.scenarioId]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.selectedValue}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:n.matchesExplicit?"text-green-600":"text-gray-400",children:[n.matchesExplicit?"‚úì":"√ó"," Explicit Values"]}),e.jsxs("div",{className:n.matchesImplicit?"text-green-600":"text-gray-400",children:[n.matchesImplicit?"‚úì":"√ó"," Implicit Values"]}),e.jsxs("div",{className:n.matchesSimulation?"text-orange-600":"text-gray-400",children:[n.matchesSimulation?"‚úì":"√ó"," Simulation Values"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("div",{className:"flex items-center gap-1",children:[s(n),e.jsx("span",{className:a(n),children:r(n)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${n.stabilityScore>=75?"bg-green-600":n.stabilityScore>=50?"bg-orange-600":"bg-red-600"}`,style:{width:`${n.stabilityScore}%`}})}),e.jsxs("span",{className:"text-gray-600",children:[n.stabilityScore,"%"]})]})})]},n.scenarioId))})]})})};na.register(is,os,ls,la,ca,cs,ia,oa);const jo=["Safety","Efficiency","Sustainability","Fairness","Nonmaleficence"],Un=()=>{const t={};return jo.forEach(r=>{t[r.toLowerCase()]=[]}),t},tg=()=>{const t=it(),[r,a]=h.useState({cvrInitialReconsideration:null,cvrFinalReconsideration:null,cvrPurposeClarity:4,cvrConfidenceChange:4,cvrHelpfulness:4,cvrClarity:4,cvrComfortLevel:4,cvrPerceivedValue:4,cvrOverallImpact:4,cvrComments:"",apaPurposeClarity:4,apaEaseOfUse:4,apaControlUnderstanding:4,apaDecisionReflection:null,apaScenarioAlignment:null,apaComparisonUsefulness:4,apaPerspectiveValue:4,apaConfidenceAfterReordering:4,apaPerceivedValue:4,apaTradeoffChallenge:4,apaReflectionDepth:4,apaComments:"",usedTradeoffComparison:null,vizClarity:4,vizHelpfulness:null,vizUsefulness:4,vizTradeoffEvaluation:4,vizTradeoffJustification:4,vizExpertUsefulness:4,vizExpertConfidenceImpact:null,vizComments:"",overallScenarioAlignment:null,overallDecisionSatisfaction:4,overallProcessSatisfaction:4,overallConfidenceConsistency:4,overallLearningInsight:4,overallComments:""}),[s,n]=h.useState(!1),[i,o]=h.useState(!1),[l,d]=h.useState(!1),[u,m]=h.useState(!1),[c,p]=h.useState(!1),[g,f]=h.useState(!1),[b,y]=h.useState(null),[x,w]=h.useState(!1),[C,R]=h.useState({}),[N,v]=h.useState({}),[S,I]=h.useState([]),[D,L]=h.useState(null),[E,$]=h.useState(0),[se,k]=h.useState(!1),[M,A]=h.useState(Un()),[O,V]=h.useState([]),[B,z]=h.useState([]);h.useEffect(()=>{ce()},[]);const ce=()=>{try{const j=JSON.parse(localStorage.getItem("simulationScenarioOutcomes")||"[]"),T=JSON.parse(localStorage.getItem("finalSimulationMetrics")||"null"),X=JSON.parse(localStorage.getItem("finalValues")||"[]"),ne=localStorage.getItem("MoralValuesReorderList"),P=Fe.getScenarioTrackingHistory(),q=Fe.getAllEvents();if(!j.length||!T){console.error("Missing required data for metrics calculation");return}const H=X.map(Q=>(Q.name||Q).toString().toLowerCase());let ie=[];if(ne)try{ie=JSON.parse(ne).map(qe=>(qe.id||qe.name||qe).toString().toLowerCase())}catch{ie=H}else ie=H;const K=q.filter(Q=>Q.event==="cvr_opened"),ve=K.length,ee=q.filter(Q=>Q.event==="cvr_answered"),fe=ee.filter(Q=>Q.cvrAnswer===!0).length,pe=ee.filter(Q=>Q.cvrAnswer===!1).length,ge=q.filter(Q=>Q.event==="apa_reordered"),Me=ge.length,Se=[],Ee=new Map;P.forEach(Q=>{if(Q.endTime&&Q.startTime){const qe=(Q.endTime-Q.startTime)/1e3;Se.push(qe),Ee.set(Q.scenarioId,{timeSeconds:Math.round(qe),switches:Q.switchCount||0,cvrVisited:Q.cvrVisited||!1,cvrVisitCount:Q.cvrVisitCount||0,cvrYesAnswers:Q.cvrYesAnswers||0,apaReordered:Q.apaReordered||!1,apaReorderCount:Q.apaReorderCount||0})}}),Se.length===0&&j.forEach(()=>{Se.push(75)});const tt=Se.length>0?Se.reduce((Q,qe)=>Q+qe,0)/Se.length:0,Oe=[],ot=[];j.forEach((Q,qe)=>{const kt=(Q.decision.label||"").toLowerCase(),wt=Q.scenarioId,ft=K.filter(lt=>lt.scenarioId===Q.scenarioId),Yt=ee.filter(lt=>lt.scenarioId===Q.scenarioId&&lt.cvrAnswer===!0);let Gt=!1;wt===1?Gt=H.includes(kt):(wt===2||wt===3)&&(Gt=ie.includes(kt));const Fr=Gt&&Yt.length===0;Oe.push(Fr);const jt=Ee.get(Q.scenarioId)||{timeSeconds:Math.round(Se[qe]||0),switches:0,cvrVisited:!1,cvrVisitCount:0,cvrYesAnswers:0,apaReordered:!1,apaReorderCount:0},Ta=q.filter(lt=>lt.event==="option_selected"&&lt.scenarioId===Q.scenarioId),Ea=Math.max(0,Ta.length-1),Lr=ge.filter(lt=>lt.scenarioId===Q.scenarioId);ot.push({scenarioId:Q.scenarioId,finalChoice:Q.decision.title||Q.decision.label||"Unknown",aligned:Fr,switches:jt.switches||Ea,timeSeconds:jt.timeSeconds,cvrVisited:jt.cvrVisited||ft.length>0,cvrVisitCount:jt.cvrVisitCount||ft.length,cvrYesAnswers:jt.cvrYesAnswers||Yt.length,apaReordered:jt.apaReordered||Lr.length>0,apaReorderCount:jt.apaReorderCount||Lr.length})});const qt=ot.reduce((Q,qe)=>Q+qe.switches,0),vt=Oe.filter(Boolean).length,yt=Oe.length>0?vt/Oe.length:0,gt=me(T),_=Ne(T);let oe=0,Or=0;ot.forEach(Q=>{const kt=q.filter(ft=>ft.scenarioId===Q.scenarioId).find(ft=>ft.event==="option_confirmed"),wt=kt==null?void 0:kt.flagsAtConfirmation;if(wt){const ft=wt.simulationMetricsReorderingFlag??!1,Yt=wt.moralValuesReorderingFlag??!1;(ft||Yt)&&Or++}Q.aligned||oe++});const Qe=[];ge.forEach(Q=>{Q.valuesAfter&&Q.scenarioId!==void 0&&Qe.push({scenarioId:Q.scenarioId,values:Q.valuesAfter,preferenceType:Q.preferenceType||"unknown"})}),y({cvrArrivals:ve,cvrYesCount:fe,cvrNoCount:pe,apaReorderings:Me,misalignAfterCvrApaCount:oe,realignAfterCvrApaCount:Or,switchCountTotal:qt,avgDecisionTime:tt,decisionTimes:Se,valueConsistencyIndex:yt,performanceComposite:gt,balanceIndex:_,finalAlignmentByScenario:Oe,valueOrderTrajectories:Qe,scenarioDetails:ot})}catch(j){console.error("Error calculating metrics:",j)}},me=j=>{const T={livesSaved:Math.min(j.livesSaved/2e4,1),casualties:1-Math.min(j.humanCasualties/1e3,1),firefightingResource:j.firefightingResource/100,infrastructureCondition:j.infrastructureCondition/100,biodiversityCondition:j.biodiversityCondition/100,propertiesCondition:j.propertiesCondition/100,nuclearPowerStation:j.nuclearPowerStation/100},X=Object.values(T),ne=X.reduce((P,q)=>P+q,0)/X.length;return Math.round(ne*100)/100},Ne=j=>{const T=[Math.min(j.livesSaved/2e4,1),1-Math.min(j.humanCasualties/1e3,1),j.firefightingResource/100,j.infrastructureCondition/100,j.biodiversityCondition/100,j.propertiesCondition/100,j.nuclearPowerStation/100],X=T.reduce((P,q)=>P+q,0)/T.length,ne=T.reduce((P,q)=>P+Math.pow(q-X,2),0)/T.length;return Math.round((1-ne)*100)/100},re=(j,T)=>{a(X=>({...X,[j]:T}))},Y=()=>{try{const j=JSON.parse(localStorage.getItem("explicitValues")||"[]"),T=JSON.parse(localStorage.getItem("deepValues")||"[]"),X=JSON.parse(localStorage.getItem("simulationScenarioOutcomes")||"[]"),ne=JSON.parse(localStorage.getItem("finalSimulationMetrics")||"null");if(!j.length||!T.length||!X.length||!ne){k(!0);return}const P=JSON.parse(localStorage.getItem("ExplicitValueFrequencies")||"[]"),q=JSON.parse(localStorage.getItem("ImplicitValueFrequencies")||"[]");V(P),z(q);const H={};j.forEach(ee=>{const fe=ee.value_selected.toLowerCase();H[fe]=(H[fe]||0)+1}),R(H);const ie={};T.forEach(ee=>{var pe;const fe=(pe=ee.name)==null?void 0:pe.toLowerCase();fe&&(ie[fe]=(ie[fe]||0)+1)}),v(ie);const K=Un();Object.keys(K).forEach(ee=>{K[ee]=[0,0,0]}),X.forEach((ee,fe)=>{const pe=ee.decision.label.toLowerCase(),ge=ee.topTwoValuesAtDecision||[];fe<3&&(K[pe]&&(K[pe][fe]=100),ge.forEach(Me=>{const Se=Me.toLowerCase();Se!==pe&&K[Se]&&(K[Se][fe]=50)}))}),A(K);const ve=X.map(ee=>{const fe=ee.decision.label.toLowerCase(),pe=H[fe]>0,ge=ie[fe]>0,Ee=(pe?40:0)+(ge?60:0);return{scenarioId:ee.scenarioId,selectedValue:ee.decision.label,matchesExplicit:pe,matchesImplicit:ge,matchesSimulation:!0,stabilityScore:Ee}});I(ve),$(ve.reduce((ee,fe)=>ee+fe.stabilityScore,0)/ve.length),L(ne),k(!1)}catch(j){console.error("Error loading analysis data:",j),k(!0)}},we=()=>{const j=jo;return{labels:j,datasets:[{label:"Explicit Choices",data:j.map(T=>C[T.toLowerCase()]||0),backgroundColor:"rgba(54, 162, 235, 0.5)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1},{label:"Implicit Choices",data:j.map(T=>N[T.toLowerCase()]||0),backgroundColor:"rgba(75, 192, 192, 0.5)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1},{label:"Simulation Decisions",data:j.map(T=>S.filter(X=>X.selectedValue.toLowerCase()===T.toLowerCase()).length),backgroundColor:"rgba(255, 99, 132, 0.5)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1}]}},de=()=>{const j=Object.keys(M);return{labels:["Explicit Choices","Implicit Choices","Scenario 1","Scenario 2","Scenario 3"],datasets:j.map((T,X)=>{const ne=[{line:"rgb(239, 68, 68)",fill:"rgba(239, 68, 68, 0.1)"},{line:"rgb(59, 130, 246)",fill:"rgba(59, 130, 246, 0.1)"},{line:"rgb(16, 185, 129)",fill:"rgba(16, 185, 129, 0.1)"},{line:"rgb(245, 158, 11)",fill:"rgba(245, 158, 11, 0.1)"},{line:"rgb(139, 92, 246)",fill:"rgba(139, 92, 246, 0.1)"}],P=O.find(K=>K.value.toLowerCase()===T.toLowerCase()),q=P?P.percentage:0,H=B.find(K=>K.value.toLowerCase()===T.toLowerCase()),ie=H?H.percentage:0;return{label:T.charAt(0).toUpperCase()+T.slice(1),data:[q,ie,...M[T]],borderColor:ne[X%ne.length].line,backgroundColor:ne[X%ne.length].fill,tension:.1,fill:!0}})}},Pe=async()=>{var H,ie;if(!b)return;const j={...b,...r};localStorage.setItem("sessionResults",JSON.stringify(j));const T={event:"feedback_submitted",timestamp:new Date().toISOString(),data:j},X=JSON.parse(localStorage.getItem("sessionEventLogs")||"[]");X.push(T),localStorage.setItem("sessionEventLogs",JSON.stringify(X));const ne=be.getSessionId(),P=JSON.parse(localStorage.getItem("ScenariosFinalDecisionLabels")||"[]"),q=JSON.parse(localStorage.getItem("CheckingAlignmentList")||"[]");try{await be.insertSessionFeedback({session_id:ne,cvr:{initialReconsideration:r.cvrInitialReconsideration,finalReconsideration:r.cvrFinalReconsideration,purposeClarity:r.cvrPurposeClarity,confidenceChange:r.cvrConfidenceChange,helpfulness:r.cvrHelpfulness,clarity:r.cvrClarity,comfortLevel:r.cvrComfortLevel,perceivedValue:r.cvrPerceivedValue,overallImpact:r.cvrOverallImpact,comments:r.cvrComments},apa:{purposeClarity:r.apaPurposeClarity,easeOfUse:r.apaEaseOfUse,controlUnderstanding:r.apaControlUnderstanding,decisionReflection:r.apaDecisionReflection,scenarioAlignment:r.apaScenarioAlignment,comparisonUsefulness:r.apaComparisonUsefulness,perspectiveValue:r.apaPerspectiveValue,confidenceAfterReordering:r.apaConfidenceAfterReordering,perceivedValue:r.apaPerceivedValue,tradeoffChallenge:r.apaTradeoffChallenge,reflectionDepth:r.apaReflectionDepth,comments:r.apaComments},visualization:{usedTradeoffComparison:r.usedTradeoffComparison,clarity:r.vizClarity,usefulness:r.vizUsefulness,tradeoffEvaluation:r.vizTradeoffEvaluation,tradeoffJustification:r.vizTradeoffJustification,expertUsefulness:r.vizExpertUsefulness,helpfulness:r.vizHelpfulness,expertConfidenceImpact:r.vizExpertConfidenceImpact,comments:r.vizComments},overall:{scenarioAlignment:r.overallScenarioAlignment,decisionSatisfaction:r.overallDecisionSatisfaction,processSatisfaction:r.overallProcessSatisfaction,confidenceConsistency:r.overallConfidenceConsistency,learningInsight:r.overallLearningInsight,comments:r.overallComments},metricsSnapshot:{valueConsistencyIndex:b.valueConsistencyIndex,performanceComposite:b.performanceComposite,balanceIndex:b.balanceIndex,cvrArrivals:b.cvrArrivals,cvrYesCount:b.cvrYesCount,cvrNoCount:b.cvrNoCount,apaReorderings:b.apaReorderings,totalSwitches:b.switchCountTotal,avgDecisionTime:b.avgDecisionTime,scenariosFinalDecisionLabels:P,checkingAlignmentList:q}}),p(!0),f(!0);try{await((H=be.updateUserSession)==null?void 0:H.call(be,ne,{is_completed:!0,completed_at:new Date().toISOString()}))}catch(K){console.debug("updateUserSession failed (non-blocking):",K)}try{await((ie=be.syncFallbackData)==null?void 0:ie.call(be))}catch(K){console.debug("syncFallbackData failed (non-blocking):",K)}}catch(K){console.error("Submit feedback failed:",K),alert("Sorry‚Äîsaving feedback failed. Please try again.")}};return b?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Zt,{className:"h-8 w-8 text-yellow-500"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Your Feedback"})]})})}),e.jsxs("main",{className:"max-w-4xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-teal-50 rounded-lg p-6 mb-8 border-2 border-blue-200",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-2 flex items-center gap-2",children:[e.jsx(Lt,{className:"h-6 w-6 text-blue-600"}),"We Value Your Experience"]}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Your feedback is crucial to understanding how this simulation helped you reflect on value-driven decision-making. Please take a moment to share your thoughts about the process and your experience."})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 via-blue-100 to-cyan-50 rounded-lg shadow-lg border-2 border-blue-300 p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-blue-900 flex items-center",children:[e.jsx(at,{className:"h-6 w-6 mr-2 text-blue-700"}),"Value Reflection Mechanism (CVR)"]}),e.jsxs("div",{className:"flex items-center gap-2 bg-blue-200 px-3 py-1.5 rounded-full shadow-sm",children:[e.jsx("span",{className:"text-xs font-bold text-blue-900",children:"Total CVR Interactions:"}),e.jsx("span",{className:"text-sm font-bold text-blue-900",children:b.cvrArrivals})]})]}),e.jsx("p",{className:"text-sm text-blue-800 font-medium mb-6 leading-relaxed bg-white/60 p-3 rounded-lg",children:"The CVR (Cognitive Value Recontextualization) mechanism presented you with alternative scenarios to help understand your chosen options from different contexts and perspectives. Please share your experience with this feature."}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-4",children:"Reconsideration"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Initial Choice Reconsideration: Did any of the CVR questions lead you to reconsider your initial choice when you first faced each scenario?"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>a(j=>({...j,cvrInitialReconsideration:!0})),disabled:c,className:`flex-1 py-3 px-4 rounded-lg font-medium transition-all ${r.cvrInitialReconsideration===!0?"bg-blue-600 text-white shadow-lg":"bg-white text-gray-700 border-2 border-gray-300 hover:border-blue-400"} disabled:opacity-50 disabled:cursor-not-allowed`,children:"Yes"}),e.jsx("button",{onClick:()=>a(j=>({...j,cvrInitialReconsideration:!1})),disabled:c,className:`flex-1 py-3 px-4 rounded-lg font-medium transition-all ${r.cvrInitialReconsideration===!1?"bg-blue-600 text-white shadow-lg":"bg-white text-gray-700 border-2 border-gray-300 hover:border-blue-400"} disabled:opacity-50 disabled:cursor-not-allowed`,children:"No"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Final Decision Reconsideration: After reflecting on the CVR scenarios, did you reconsider your final decision before confirming it?"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>a(j=>({...j,cvrFinalReconsideration:!0})),disabled:c,className:`flex-1 py-3 px-4 rounded-lg font-medium transition-all ${r.cvrFinalReconsideration===!0?"bg-blue-600 text-white shadow-lg":"bg-white text-gray-700 border-2 border-gray-300 hover:border-blue-400"} disabled:opacity-50 disabled:cursor-not-allowed`,children:"Yes"}),e.jsx("button",{onClick:()=>a(j=>({...j,cvrFinalReconsideration:!1})),disabled:c,className:`flex-1 py-3 px-4 rounded-lg font-medium transition-all ${r.cvrFinalReconsideration===!1?"bg-blue-600 text-white shadow-lg":"bg-white text-gray-700 border-2 border-gray-300 hover:border-blue-400"} disabled:opacity-50 disabled:cursor-not-allowed`,children:"No"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Purpose Clarity: How clear was the purpose of the CVR section in helping you reconsider your decisions and reinterpret your values when faced with new or changing moral contexts?"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"1"}),e.jsx("input",{type:"range",min:"1",max:"7",value:r.cvrPurposeClarity,onChange:j=>re("cvrPurposeClarity",parseInt(j.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",disabled:c}),e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"7"}),e.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-base font-bold text-indigo-600",children:r.cvrPurposeClarity})})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1 px-8",children:[e.jsx("span",{children:"Very Unclear"}),e.jsx("span",{children:"Very Clear"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Confidence Change: After engaging with the CVR questions, how did your confidence in your decision change?"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"1"}),e.jsx("input",{type:"range",min:"1",max:"7",value:r.cvrConfidenceChange,onChange:j=>re("cvrConfidenceChange",parseInt(j.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",disabled:c}),e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"7"}),e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-base font-bold text-blue-600",children:r.cvrConfidenceChange})})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1 px-8",children:[e.jsx("span",{children:"Much Less Confident"}),e.jsx("span",{children:"No Change"}),e.jsx("span",{children:"Much More Confident"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Helpfulness: How helpful were the CVR questions in helping you rethink or refine your decisions?"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"1"}),e.jsx("input",{type:"range",min:"1",max:"7",value:r.cvrHelpfulness,onChange:j=>re("cvrHelpfulness",parseInt(j.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",disabled:c}),e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"7"}),e.jsx("div",{className:"w-10 h-10 bg-cyan-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-base font-bold text-cyan-600",children:r.cvrHelpfulness})})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1 px-8",children:[e.jsx("span",{children:"Not Helpful At All"}),e.jsx("span",{children:"Extremely Helpful"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Clarity: How clear and understandable were the CVR questions and their presented perspectives?"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"1"}),e.jsx("input",{type:"range",min:"1",max:"7",value:r.cvrClarity,onChange:j=>re("cvrClarity",parseInt(j.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",disabled:c}),e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"7"}),e.jsx("div",{className:"w-10 h-10 bg-teal-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-base font-bold text-teal-600",children:r.cvrClarity})})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1 px-8",children:[e.jsx("span",{children:"Very Unclear"}),e.jsx("span",{children:"Very Clear"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Comfort Level: How comfortable did you feel with the way CVR questions challenged or prompted you to reconsider your decisions?"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"1"}),e.jsx("input",{type:"range",min:"1",max:"7",value:r.cvrComfortLevel,onChange:j=>re("cvrComfortLevel",parseInt(j.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",disabled:c}),e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"7"}),e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-base font-bold text-green-600",children:r.cvrComfortLevel})})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1 px-8",children:[e.jsx("span",{children:"Not At All Comfortable"}),e.jsx("span",{children:"Very Comfortable"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Perceived Value: How valuable was CVR in helping you evaluate your options in these complex decision scenarios?"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"1"}),e.jsx("input",{type:"range",min:"1",max:"7",value:r.cvrPerceivedValue,onChange:j=>re("cvrPerceivedValue",parseInt(j.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",disabled:c}),e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"7"}),e.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-base font-bold text-emerald-600",children:r.cvrPerceivedValue})})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1 px-8",children:[e.jsx("span",{children:"Not Valuable"}),e.jsx("span",{children:"Extremely Valuable"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Overall Impact: To what extent did CVR change the way you think about balancing values in ethical or operational decisions?"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"1"}),e.jsx("input",{type:"range",min:"1",max:"7",value:r.cvrOverallImpact,onChange:j=>re("cvrOverallImpact",parseInt(j.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",disabled:c}),e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"7"}),e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-base font-bold text-purple-600",children:r.cvrOverallImpact})})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1 px-8",children:[e.jsx("span",{children:"No Impact"}),e.jsx("span",{children:"Major Impact On My Thinking"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(Lt,{className:"h-4 w-4 mr-2 text-gray-500"}),"Tell us about your CVR experience (optional)",e.jsxs("button",{onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),onClick:()=>n(!s),className:"ml-2 text-blue-500 hover:text-blue-700 relative",children:[e.jsx(zt,{className:"h-4 w-4"}),s&&e.jsx("div",{className:"absolute left-0 top-6 z-10 w-80 bg-gray-900 text-white text-xs rounded-lg p-3 shadow-xl",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:"What aspects of CVR (if any) made you reconsider your choice?"}),e.jsx("p",{children:"Which question or perspective most influenced your thinking‚Äîand how?"}),e.jsx("p",{children:"Did CVR make you more or less confident in your decision? Why?"}),e.jsx("p",{children:"Where did you find the most value in the CVR prompts?"}),e.jsx("p",{children:"How tedious (if at all) did the CVR questions feel, and what would improve them?"})]})})]})]}),e.jsx("textarea",{value:r.cvrComments,onChange:j=>a(T=>({...T,cvrComments:j.target.value})),rows:4,disabled:c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"What about CVR led you to reconsider your choice? What, if anything, changed your decision? Where did you find value in CVR? How tedious did CVR feel, and why?"})]})]})]}),b&&b.apaReorderings>0&&e.jsxs("div",{className:"bg-gradient-to-br from-green-50 via-emerald-100 to-teal-50 rounded-lg shadow-lg border-2 border-green-300 p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-green-900 flex items-center",children:[e.jsx(ps,{className:"h-6 w-6 mr-2 text-green-700"}),"Adaptive Preference Analysis (APA)"]}),e.jsxs("div",{className:"flex items-center gap-2 bg-green-200 px-3 py-1.5 rounded-full shadow-sm",children:[e.jsx("span",{className:"text-xs font-bold text-green-900",children:"Total APA Reorderings:"}),e.jsx("span",{className:"text-sm font-bold text-green-900",children:b.apaReorderings})]})]}),e.jsx("p",{className:"text-sm text-green-800 font-medium mb-6 leading-relaxed bg-white/60 p-3 rounded-lg",children:"The APA (Adaptive Preference Alignment) feature allowed you to compare your chosen options with CVR scenarios and reprioritize your values based on new insights. The goal is to help you understand options from different perspectives and align future choices with your reordered values."}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-4",children:"Understanding and Usability"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Purpose Clarity: How clear was the purpose of the APA feature in helping you balance Simulation Metrics and Moral Values when making decisions?"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"1"}),e.jsx("input",{type:"range",min:"1",max:"7",value:r.apaPurposeClarity,onChange:j=>re("apaPurposeClarity",parseInt(j.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",disabled:c}),e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"7"}),e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-base font-bold text-blue-600",children:r.apaPurposeClarity})})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1 px-8",children:[e.jsx("span",{children:"Very unclear"}),e.jsx("span",{children:"Very clear"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Ease of Use: How easy was it to rank or re-order your priorities during the APA process?"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"1"}),e.jsx("input",{type:"range",min:"1",max:"7",value:r.apaEaseOfUse,onChange:j=>re("apaEaseOfUse",parseInt(j.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",disabled:c}),e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"7"}),e.jsx("div",{className:"w-10 h-10 bg-cyan-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-base font-bold text-cyan-600",children:r.apaEaseOfUse})})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1 px-8",children:[e.jsx("span",{children:"Very difficult"}),e.jsx("span",{children:"Very easy"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Control and Understanding: Did you feel that the APA interface gave you enough control to shape your decisions according to your ranked preferences?"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"1"}),e.jsx("input",{type:"range",min:"1",max:"7",value:r.apaControlUnderstanding,onChange:j=>re("apaControlUnderstanding",parseInt(j.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",disabled:c}),e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"7"}),e.jsx("div",{className:"w-10 h-10 bg-teal-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-base font-bold text-teal-600",children:r.apaControlUnderstanding})})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1 px-8",children:[e.jsx("span",{children:"No control"}),e.jsx("span",{children:"Full control"})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-4",children:"Perceived Impact and Alignment"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Decision Reflection: Did the APA process cause you to rethink what mattered most in your decision-making (for example, Safety vs. Efficiency)?"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>a(j=>({...j,apaDecisionReflection:!0})),disabled:c,className:`flex-1 py-3 px-4 rounded-lg font-medium transition-all ${r.apaDecisionReflection===!0?"bg-green-600 text-white shadow-lg":"bg-white text-gray-700 border-2 border-gray-300 hover:border-green-400"} disabled:opacity-50 disabled:cursor-not-allowed`,children:"Yes"}),e.jsx("button",{onClick:()=>a(j=>({...j,apaDecisionReflection:!1})),disabled:c,className:`flex-1 py-3 px-4 rounded-lg font-medium transition-all ${r.apaDecisionReflection===!1?"bg-green-600 text-white shadow-lg":"bg-white text-gray-700 border-2 border-gray-300 hover:border-green-400"} disabled:opacity-50 disabled:cursor-not-allowed`,children:"No"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Scenario Alignment: Did the APA system help you see more aligned and relevant initial options when you arrived at the next scenarios?"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>a(j=>({...j,apaScenarioAlignment:!0})),disabled:c,className:`flex-1 py-3 px-4 rounded-lg font-medium transition-all ${r.apaScenarioAlignment===!0?"bg-green-600 text-white shadow-lg":"bg-white text-gray-700 border-2 border-gray-300 hover:border-green-400"} disabled:opacity-50 disabled:cursor-not-allowed`,children:"Yes"}),e.jsx("button",{onClick:()=>a(j=>({...j,apaScenarioAlignment:!1})),disabled:c,className:`flex-1 py-3 px-4 rounded-lg font-medium transition-all ${r.apaScenarioAlignment===!1?"bg-green-600 text-white shadow-lg":"bg-white text-gray-700 border-2 border-gray-300 hover:border-green-400"} disabled:opacity-50 disabled:cursor-not-allowed`,children:"No"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"APA Comparison Table Usefulness: How useful was comparing your simulation choices with CVR scenarios (APA Comparison Table)?"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"1"}),e.jsx("input",{type:"range",min:"1",max:"7",value:r.apaComparisonUsefulness,onChange:j=>re("apaComparisonUsefulness",parseInt(j.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",disabled:c}),e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"7"}),e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-base font-bold text-green-600",children:r.apaComparisonUsefulness})})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1 px-8",children:[e.jsx("span",{children:"Not useful"}),e.jsx("span",{children:"Very useful"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Perspective Value: How valuable was understanding options from different perspectives (value-based perspectives) through APA?"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"1"}),e.jsx("input",{type:"range",min:"1",max:"7",value:r.apaPerspectiveValue,onChange:j=>re("apaPerspectiveValue",parseInt(j.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",disabled:c}),e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"7"}),e.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-base font-bold text-emerald-600",children:r.apaPerspectiveValue})})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1 px-8",children:[e.jsx("span",{children:"Not valuable"}),e.jsx("span",{children:"Extremely valuable"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Confidence After Reordering: How confident were you in your final decisions after adjusting your moral or simulation value rankings?"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"1"}),e.jsx("input",{type:"range",min:"1",max:"7",value:r.apaConfidenceAfterReordering,onChange:j=>re("apaConfidenceAfterReordering",parseInt(j.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",disabled:c}),e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"7"}),e.jsx("div",{className:"w-10 h-10 bg-teal-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-base font-bold text-teal-600",children:r.apaConfidenceAfterReordering})})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1 px-8",children:[e.jsx("span",{children:"Not confident"}),e.jsx("span",{children:"Very confident"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Perceived Value: How valuable was the APA feature overall in helping you make decisions that reflected your values and priorities?"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"1"}),e.jsx("input",{type:"range",min:"1",max:"7",value:r.apaPerceivedValue,onChange:j=>re("apaPerceivedValue",parseInt(j.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",disabled:c}),e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"7"}),e.jsx("div",{className:"w-10 h-10 bg-lime-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-base font-bold text-lime-600",children:r.apaPerceivedValue})})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1 px-8",children:[e.jsx("span",{children:"Not valuable"}),e.jsx("span",{children:"Extremely valuable"})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-4",children:"Cognitive Effort and Challenge"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Trade-off Challenge: How challenging was it to decide which moral values or simulation metrics should take priority when ranking them?"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"1"}),e.jsx("input",{type:"range",min:"1",max:"7",value:r.apaTradeoffChallenge,onChange:j=>re("apaTradeoffChallenge",parseInt(j.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",disabled:c}),e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"7"}),e.jsx("div",{className:"w-10 h-10 bg-amber-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-base font-bold text-amber-600",children:r.apaTradeoffChallenge})})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1 px-8",children:[e.jsx("span",{children:"Not challenging"}),e.jsx("span",{children:"Very challenging"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Reflection Depth: To what extent did APA make you reflect on the trade-offs between different moral or operational values?"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"1"}),e.jsx("input",{type:"range",min:"1",max:"7",value:r.apaReflectionDepth,onChange:j=>re("apaReflectionDepth",parseInt(j.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",disabled:c}),e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"7"}),e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-base font-bold text-orange-600",children:r.apaReflectionDepth})})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1 px-8",children:[e.jsx("span",{children:"Not at all"}),e.jsx("span",{children:"A great deal"})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(Lt,{className:"h-4 w-4 mr-2 text-gray-500"}),"Tell us about your APA experience (optional)",e.jsxs("button",{onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),onClick:()=>o(!i),className:"ml-2 text-green-500 hover:text-green-700 relative",children:[e.jsx(zt,{className:"h-4 w-4"}),i&&e.jsx("div",{className:"absolute left-0 top-6 z-10 w-80 bg-gray-900 text-white text-xs rounded-lg p-3 shadow-xl",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:"Which part of APA helped you understand your priorities better?"}),e.jsx("p",{children:"Did ranking your preferences change how you approached the next scenario?"}),e.jsx("p",{children:"What about APA did you find most useful or challenging?"}),e.jsx("p",{children:"Did ranking your preferences change your next decisions?"}),e.jsx("p",{children:"Where did APA feel most valuable?"}),e.jsx("p",{children:"How could APA be improved?"})]})})]})]}),e.jsx("textarea",{value:r.apaComments,onChange:j=>a(T=>({...T,apaComments:j.target.value})),rows:4,disabled:c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"What did you find most useful or challenging about APA? Did ranking your preferences change your next decisions? Where did APA feel most valuable? How could APA be improved?"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 via-amber-100 to-yellow-50 rounded-lg shadow-lg border-2 border-orange-300 p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-orange-900 flex items-center",children:[e.jsx(Qn,{className:"h-6 w-6 mr-2 text-orange-700"}),"Decision Support Tools"]}),e.jsxs("div",{className:"flex items-center gap-2 bg-orange-200 px-3 py-1.5 rounded-full shadow-sm",children:[e.jsx(Ct,{className:"h-5 w-5 text-orange-900"}),e.jsx("span",{className:"text-xs font-bold text-orange-900",children:"Visualization & Analysis"})]})]}),e.jsx("p",{className:"text-sm text-orange-800 font-medium mb-6 leading-relaxed bg-white/60 p-3 rounded-lg",children:"Throughout the simulation, you had access to expert recommendations, trade-off visualizations (radar and bar charts), and comparison tools to help you understand the implications of different choices."}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Did you use the trade-off comparison view (i.e. Radar and Bar Chart)?"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>a(j=>({...j,usedTradeoffComparison:!0})),disabled:c,className:`flex-1 py-3 px-4 rounded-lg font-medium transition-all ${r.usedTradeoffComparison===!0?"bg-orange-600 text-white shadow-lg":"bg-white text-gray-700 border-2 border-gray-300 hover:border-orange-400"} disabled:opacity-50 disabled:cursor-not-allowed`,children:"Yes"}),e.jsx("button",{onClick:()=>a(j=>({...j,usedTradeoffComparison:!1})),disabled:c,className:`flex-1 py-3 px-4 rounded-lg font-medium transition-all ${r.usedTradeoffComparison===!1?"bg-orange-600 text-white shadow-lg":"bg-white text-gray-700 border-2 border-gray-300 hover:border-orange-400"} disabled:opacity-50 disabled:cursor-not-allowed`,children:"No"})]})]}),r.usedTradeoffComparison===!0&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-4",children:"Visualization (Radar & Bar Charts)"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Visualization Clarity: How clear were the radar and bar chart visualizations?"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"1"}),e.jsx("input",{type:"range",min:"1",max:"7",value:r.vizClarity,onChange:j=>re("vizClarity",parseInt(j.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",disabled:c}),e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"7"}),e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-base font-bold text-orange-600",children:r.vizClarity})})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1 px-8",children:[e.jsx("span",{children:"Very unclear"}),e.jsx("span",{children:"Very clear"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Visualization Helpfulness: Did these visualizations help you make your decision?"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>a(j=>({...j,vizHelpfulness:!0})),disabled:c,className:`flex-1 py-3 px-4 rounded-lg font-medium transition-all ${r.vizHelpfulness===!0?"bg-orange-600 text-white shadow-lg":"bg-white text-gray-700 border-2 border-gray-300 hover:border-orange-400"} disabled:opacity-50 disabled:cursor-not-allowed`,children:"Yes"}),e.jsx("button",{onClick:()=>a(j=>({...j,vizHelpfulness:!1})),disabled:c,className:`flex-1 py-3 px-4 rounded-lg font-medium transition-all ${r.vizHelpfulness===!1?"bg-orange-600 text-white shadow-lg":"bg-white text-gray-700 border-2 border-gray-300 hover:border-orange-400"} disabled:opacity-50 disabled:cursor-not-allowed`,children:"No"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Visualization Usefulness in Decision-Making: How useful were the radar and bar chart visualizations in your decision-making process?"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"1"}),e.jsx("input",{type:"range",min:"1",max:"7",value:r.vizUsefulness,onChange:j=>re("vizUsefulness",parseInt(j.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",disabled:c}),e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"7"}),e.jsx("div",{className:"w-10 h-10 bg-amber-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-base font-bold text-amber-600",children:r.vizUsefulness})})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1 px-8",children:[e.jsx("span",{children:"Not useful"}),e.jsx("span",{children:"Very useful"})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-4",children:"Trade-Off and Comparison Views"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Trade-Off Evaluation: How valuable were the trade-off comparisons and difference views in helping you evaluate your options?"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"1"}),e.jsx("input",{type:"range",min:"1",max:"7",value:r.vizTradeoffEvaluation,onChange:j=>re("vizTradeoffEvaluation",parseInt(j.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",disabled:c}),e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"7"}),e.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-base font-bold text-yellow-600",children:r.vizTradeoffEvaluation})})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1 px-8",children:[e.jsx("span",{children:"Not valuable"}),e.jsx("span",{children:"Very valuable"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Trade-Off Justification: How helpful were these trade-off views in helping you reach or justify a decision?"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"1"}),e.jsx("input",{type:"range",min:"1",max:"7",value:r.vizTradeoffJustification,onChange:j=>re("vizTradeoffJustification",parseInt(j.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",disabled:c}),e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"7"}),e.jsx("div",{className:"w-10 h-10 bg-lime-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-base font-bold text-lime-600",children:r.vizTradeoffJustification})})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1 px-8",children:[e.jsx("span",{children:"Not helpful"}),e.jsx("span",{children:"Very helpful"})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-4",children:"Expert Analyses and Recommendations"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Expert Guidance Usefulness: How useful were the expert analyses and recommendations in making your decisions?"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"1"}),e.jsx("input",{type:"range",min:"1",max:"7",value:r.vizExpertUsefulness,onChange:j=>re("vizExpertUsefulness",parseInt(j.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",disabled:c}),e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"7"}),e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-base font-bold text-orange-600",children:r.vizExpertUsefulness})})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1 px-8",children:[e.jsx("span",{children:"Not useful"}),e.jsx("span",{children:"Very useful"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Expert Confidence Impact: Did the expert analyses increase your confidence in your chosen options?"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>a(j=>({...j,vizExpertConfidenceImpact:!0})),disabled:c,className:`flex-1 py-3 px-4 rounded-lg font-medium transition-all ${r.vizExpertConfidenceImpact===!0?"bg-orange-600 text-white shadow-lg":"bg-white text-gray-700 border-2 border-gray-300 hover:border-orange-400"} disabled:opacity-50 disabled:cursor-not-allowed`,children:"Yes"}),e.jsx("button",{onClick:()=>a(j=>({...j,vizExpertConfidenceImpact:!1})),disabled:c,className:`flex-1 py-3 px-4 rounded-lg font-medium transition-all ${r.vizExpertConfidenceImpact===!1?"bg-orange-600 text-white shadow-lg":"bg-white text-gray-700 border-2 border-gray-300 hover:border-orange-400"} disabled:opacity-50 disabled:cursor-not-allowed`,children:"No"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(Lt,{className:"h-4 w-4 mr-2 text-gray-500"}),"Optional Open-Ended Reflection",e.jsxs("button",{onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),onClick:()=>d(!l),className:"ml-2 text-orange-500 hover:text-orange-700 relative",children:[e.jsx(zt,{className:"h-4 w-4"}),l&&e.jsx("div",{className:"absolute left-0 top-6 z-10 w-80 bg-gray-900 text-white text-xs rounded-lg p-3 shadow-xl",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:"Which visualization or analysis tool helped you most?"}),e.jsx("p",{children:"Did expert insights change your mind or reinforce your choice?"}),e.jsx("p",{children:"How did trade-off comparisons influence your decision process?"}),e.jsx("p",{children:"What could make these tools more intuitive or effective?"})]})})]})]}),e.jsx("textarea",{value:r.vizComments,onChange:j=>a(T=>({...T,vizComments:j.target.value})),rows:4,disabled:c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"Which tool helped you most in making your decision? Did expert insights change or reinforce your choice? What could improve the visualizations or comparison tools?"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 via-pink-100 to-rose-50 rounded-lg shadow-lg border-2 border-purple-300 p-6 mb-8",children:[e.jsxs("h3",{className:"text-xl font-bold text-purple-900 mb-6 flex items-center",children:[e.jsx(Zt,{className:"h-6 w-6 mr-2 text-purple-700"}),"Overall Experience Feedback"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Scenario Alignment Over Time: As you progressed through the scenarios, did you notice that the initial solutions increasingly matched your values or priorities?"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>a(j=>({...j,overallScenarioAlignment:!0})),disabled:c,className:`flex-1 py-3 px-4 rounded-lg font-medium transition-all ${r.overallScenarioAlignment===!0?"bg-purple-600 text-white shadow-lg":"bg-white text-gray-700 border-2 border-gray-300 hover:border-purple-400"} disabled:opacity-50 disabled:cursor-not-allowed`,children:"Yes"}),e.jsx("button",{onClick:()=>a(j=>({...j,overallScenarioAlignment:!1})),disabled:c,className:`flex-1 py-3 px-4 rounded-lg font-medium transition-all ${r.overallScenarioAlignment===!1?"bg-purple-600 text-white shadow-lg":"bg-white text-gray-700 border-2 border-gray-300 hover:border-purple-400"} disabled:opacity-50 disabled:cursor-not-allowed`,children:"No"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Decision Satisfaction: How satisfied are you with the decisions you made across all scenarios?"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"1"}),e.jsx("input",{type:"range",min:"1",max:"7",value:r.overallDecisionSatisfaction,onChange:j=>re("overallDecisionSatisfaction",parseInt(j.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",disabled:c}),e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"7"}),e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-base font-bold text-purple-600",children:r.overallDecisionSatisfaction})})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1 px-8",children:[e.jsx("span",{children:"Very dissatisfied"}),e.jsx("span",{children:"Very satisfied"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Process Satisfaction: How satisfied are you with the overall decision-making process in the simulation?"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"1"}),e.jsx("input",{type:"range",min:"1",max:"7",value:r.overallProcessSatisfaction,onChange:j=>re("overallProcessSatisfaction",parseInt(j.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",disabled:c}),e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"7"}),e.jsx("div",{className:"w-10 h-10 bg-pink-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-base font-bold text-pink-600",children:r.overallProcessSatisfaction})})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1 px-8",children:[e.jsx("span",{children:"Very poor"}),e.jsx("span",{children:"Excellent"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Confidence Consistency: How confident were you that your final decisions remained consistent with your personal or moral values throughout the simulation?"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"1"}),e.jsx("input",{type:"range",min:"1",max:"7",value:r.overallConfidenceConsistency,onChange:j=>re("overallConfidenceConsistency",parseInt(j.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",disabled:c}),e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"7"}),e.jsx("div",{className:"w-10 h-10 bg-rose-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-base font-bold text-rose-600",children:r.overallConfidenceConsistency})})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1 px-8",children:[e.jsx("span",{children:"Not confident"}),e.jsx("span",{children:"Very confident"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Learning and Insight: How much did this simulation help you learn about how your values influence complex decision-making?"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"1"}),e.jsx("input",{type:"range",min:"1",max:"7",value:r.overallLearningInsight,onChange:j=>re("overallLearningInsight",parseInt(j.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",disabled:c}),e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"7"}),e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-base font-bold text-purple-600",children:r.overallLearningInsight})})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1 px-8",children:[e.jsx("span",{children:"Not at all"}),e.jsx("span",{children:"A great deal"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(Lt,{className:"h-4 w-4 mr-2 text-gray-500"}),"Optional Open-Ended Reflection",e.jsxs("button",{onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),onClick:()=>m(!u),className:"ml-2 text-purple-500 hover:text-purple-700 relative",children:[e.jsx(zt,{className:"h-4 w-4"}),u&&e.jsx("div",{className:"absolute left-0 top-6 z-10 w-80 bg-gray-900 text-white text-xs rounded-lg p-3 shadow-xl",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:"Did your sense of alignment between values and outcomes improve over time?"}),e.jsx("p",{children:"Did the simulation change how you think about trade-offs?"}),e.jsx("p",{children:"What was most satisfying or frustrating about your overall experience?"}),e.jsx("p",{children:"What insights did you gain from interacting with multiple expert systems?"})]})})]})]}),e.jsx("textarea",{value:r.overallComments,onChange:j=>a(T=>({...T,overallComments:j.target.value})),rows:4,disabled:c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"What did you learn about your values or decision process? Where did you feel most aligned or misaligned with the system? What part of the experience stood out most for you?"})]})]}),c?e.jsx("div",{className:"mt-6 p-4 bg-green-50 border-2 border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(dt,{className:"h-6 w-6 text-green-500 mr-3"}),e.jsx("span",{className:"text-green-800 font-semibold text-lg",children:"Feedback submitted successfully!"})]})}):e.jsxs("button",{onClick:Pe,className:"mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center shadow-md hover:shadow-lg",children:[e.jsx(Zt,{size:20,className:"mr-2"}),"Submit Feedback"]})]}),c&&e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg p-6 mb-6 border-2 border-purple-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Thank you for your feedback!"}),e.jsx("p",{className:"text-gray-700",children:"You can now explore your detailed results and analysis. Use the buttons below to access different views of your simulation performance."})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 mb-8",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-6 text-center",children:"Explore Your Results"}),e.jsxs("div",{className:"max-w-2xl mx-auto space-y-4",children:[e.jsxs("button",{onClick:()=>{Y(),w(!0)},className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 text-white font-semibold py-5 px-8 rounded-lg hover:from-blue-700 hover:to-cyan-700 transition-all duration-300 shadow-lg hover:shadow-xl flex items-center justify-center gap-3 group",children:[e.jsx(Jo,{className:"h-6 w-6"}),e.jsx("span",{className:"text-lg",children:"View Final Analysis Report"}),e.jsx(ut,{className:"h-5 w-5 group-hover:translate-x-1 transition-transform"})]}),c&&e.jsxs("button",{onClick:()=>t("/study-complete"),className:"w-full bg-gradient-to-r from-green-600 to-teal-600 text-white font-semibold py-5 px-8 rounded-lg hover:from-green-700 hover:to-teal-700 transition-all duration-300 shadow-lg hover:shadow-xl flex items-center justify-center gap-3 group",children:[e.jsx(dt,{className:"h-6 w-6"}),e.jsx("span",{className:"text-lg",children:"Finish"}),e.jsx(ut,{className:"h-5 w-5 group-hover:translate-x-1 transition-transform"})]}),!1]})]}),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-7xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between z-10",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(tr,{className:"h-8 w-8 text-blue-600"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Final Analysis Report"})]}),e.jsx("button",{onClick:()=>w(!1),className:"text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx(mt,{className:"h-6 w-6"})})]}),se?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Ue,{className:"mx-auto text-red-500 mb-4",size:48}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Data Not Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Please complete the simulation before accessing the final analysis."})]}):e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(It,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Value Distribution Analysis"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"How your values were expressed across different assessment types"})]})]}),e.jsx("div",{className:"h-[400px]",children:e.jsx(ds,{data:we(),options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,title:{display:!0,text:"Frequency",font:{size:13,weight:"bold"}},grid:{color:"rgba(0, 0, 0, 0.05)"}},x:{grid:{display:!1}}},plugins:{legend:{position:"bottom",labels:{padding:20,font:{size:13},usePointStyle:!0}},title:{display:!1}}}})})]}),e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(Kt,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Value Stability Analysis"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"How consistently your stated values aligned with your decisions"})]})]}),e.jsx("div",{className:"text-center mb-8",children:e.jsxs("div",{className:"inline-flex flex-col items-center p-6 bg-gradient-to-br from-purple-50 to-blue-50 rounded-xl border-2 border-purple-200",children:[e.jsxs("div",{className:`text-5xl font-bold mb-2 ${E>=75?"text-green-600":E>=50?"text-orange-600":"text-red-600"}`,children:[E.toFixed(1),"%"]}),e.jsx("p",{className:"text-lg font-semibold text-gray-800",children:"Overall Value Stability Score"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"(Weighted: 40% Explicit, 60% Implicit Values)"})]})}),e.jsx(wo,{matches:S})]}),e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Xt,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Decision Alignment Overview"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Whether your final decisions matched your stated values"})]})]}),(()=>{const j=JSON.parse(localStorage.getItem("ScenariosFinalDecisionLabels")||"[]"),T=JSON.parse(localStorage.getItem("CheckingAlignmentList")||"[]"),X=JSON.parse(localStorage.getItem("sessionEventLogs")||"[]"),ne=T.filter(H=>H==="Aligned").length,P=T.length,q=P>0?ne/P*100:0;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-8 p-6 bg-gradient-to-r from-blue-50 to-green-50 rounded-xl border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Overall Alignment Rate"}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[ne," / ",P]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"scenarios aligned with your values"})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:`text-4xl font-bold ${q>=66?"text-green-600":q>=33?"text-orange-600":"text-red-600"}`,children:[q.toFixed(0),"%"]})})]})}),e.jsx("div",{className:"space-y-4",children:S.map((H,ie)=>{var tt;const K=j[ie]||H.selectedValue,ve=T[ie]||"Unknown",ee=ve==="Aligned",pe=X.filter(Oe=>Oe.scenarioId===H.scenarioId||Oe.data&&Oe.data.scenarioId===H.scenarioId).find(Oe=>Oe.event==="option_confirmed"||Oe.data&&Oe.data.event==="option_confirmed"),ge=((tt=pe==null?void 0:pe.data)==null?void 0:tt.flagsAtConfirmation)||(pe==null?void 0:pe.flagsAtConfirmation),Me=(ge==null?void 0:ge.cvrYesClicked)??!1,Se=(ge==null?void 0:ge.cvrNoClicked)??!1,Ee=(ge==null?void 0:ge.hasReorderedValues)??!1;return e.jsxs("div",{className:`p-5 rounded-xl border-2 transition-all ${ee?"bg-green-50 border-green-300":"bg-red-50 border-red-300"}`,children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("span",{className:"text-base font-bold text-gray-900",children:["Scenario ",H.scenarioId]}),e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full font-bold text-xs ${ee?"bg-green-100 text-green-800 border border-green-300":"bg-red-100 text-red-800 border border-red-300"}`,children:[ee?e.jsx(dt,{className:"h-3.5 w-3.5"}):e.jsx(ar,{className:"h-3.5 w-3.5"}),ve]})]}),e.jsxs("div",{className:"bg-white rounded-lg px-4 py-2.5 border border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-0.5",children:"Final Decision"}),e.jsx("p",{className:"text-base font-bold text-gray-900",children:K.charAt(0).toUpperCase()+K.slice(1)})]})]})}),(Me||Se||Ee)&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-600 mb-2",children:"Interaction Flags"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[Me&&e.jsx("span",{className:"px-2.5 py-1 bg-orange-100 text-orange-800 text-xs font-medium rounded-full border border-orange-300",children:"CVR: Would Change Decision"}),Se&&e.jsx("span",{className:"px-2.5 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full border border-blue-300",children:"CVR: Confirmed Decision"}),Ee&&e.jsx("span",{className:"px-2.5 py-1 bg-purple-100 text-purple-800 text-xs font-medium rounded-full border border-purple-300",children:"Reordered Preferences"})]})]})]},H.scenarioId)})})]})})()]}),e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(ua,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Value Consistency Trend"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"How your value consistency evolved throughout the simulation"})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"h-[450px]",children:e.jsx(Yn,{data:de(),options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,max:100,title:{display:!0,text:"Consistency Score (%)",font:{size:14,weight:"bold"}},grid:{color:"rgba(0, 0, 0, 0.05)",drawBorder:!1},ticks:{font:{size:12},callback:function(j){return j+"%"}}},x:{grid:{display:!1},ticks:{font:{size:12,weight:"bold"}}}},elements:{line:{borderWidth:3},point:{radius:6,hoverRadius:8,borderWidth:2,backgroundColor:"#ffffff"}},plugins:{legend:{position:"top",align:"center",labels:{padding:20,usePointStyle:!0,font:{size:13,weight:"bold"},boxWidth:12,boxHeight:12}},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(255, 255, 255, 0.95)",titleColor:"#1f2937",bodyColor:"#4b5563",borderColor:"#d1d5db",borderWidth:2,padding:16,bodyFont:{size:13},titleFont:{size:15,weight:"bold"},displayColors:!0,boxWidth:12,boxHeight:12,boxPadding:6,callbacks:{label:function(j){return j.dataset.label+": "+j.parsed.y.toFixed(0)+"%"}}}},interaction:{mode:"index",intersect:!1}}})})})]}),e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(Ut,{className:"h-6 w-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Final Simulation Metrics"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"The cumulative outcomes of your decisions"})]})]}),D&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-green-600 mb-1",children:"Lives Saved"}),e.jsx("p",{className:"text-2xl font-bold text-green-700",children:D.livesSaved})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-red-600 mb-1",children:"Casualties"}),e.jsx("p",{className:"text-2xl font-bold text-red-700",children:D.humanCasualties})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Resources Remaining"}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${D.firefightingResource}%`}})}),e.jsxs("p",{className:"text-right text-sm text-gray-600 mt-1",children:[D.firefightingResource,"%"]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Infrastructure Condition"}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-yellow-600 h-2.5 rounded-full",style:{width:`${D.infrastructureCondition}%`}})}),e.jsxs("p",{className:"text-right text-sm text-gray-600 mt-1",children:[D.infrastructureCondition,"%"]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Biodiversity Condition"}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-green-600 h-2.5 rounded-full",style:{width:`${D.biodiversityCondition}%`}})}),e.jsxs("p",{className:"text-right text-sm text-gray-600 mt-1",children:[D.biodiversityCondition,"%"]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Properties Condition"}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-purple-600 h-2.5 rounded-full",style:{width:`${D.propertiesCondition}%`}})}),e.jsxs("p",{className:"text-right text-sm text-gray-600 mt-1",children:[D.propertiesCondition,"%"]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Nuclear Power Station"}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full ${D.nuclearPowerStation<30?"bg-red-600":D.nuclearPowerStation<70?"bg-yellow-600":"bg-green-600"}`,style:{width:`${D.nuclearPowerStation}%`}})}),e.jsxs("p",{className:"text-right text-sm text-gray-600 mt-1",children:[D.nuclearPowerStation,"%"]})]})]})]})]})]})]})})]}),e.jsx("style",{children:`
        .slider::-webkit-slider-thumb {
          appearance: none;
          height: 20px;
          width: 20px;
          border-radius: 50%;
          background: #3B82F6;
          cursor: pointer;
          box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .slider::-moz-range-thumb {
          height: 20px;
          width: 20px;
          border-radius: 50%;
          background: #3B82F6;
          cursor: pointer;
          border: none;
          box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .slider:disabled::-webkit-slider-thumb {
          background: #9CA3AF;
          cursor: not-allowed;
        }

        .slider:disabled::-moz-range-thumb {
          background: #9CA3AF;
          cursor: not-allowed;
        }
      `})]}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading feedback form..."})]})})};na.register(is,os,ls,la,ca,cs,ia,oa);const No=["Safety","Efficiency","Sustainability","Fairness","Nonmaleficence"],rg=()=>{const t={};return No.forEach(r=>{t[r.toLowerCase()]=[]}),t},ag=()=>{const t=it(),[r,a]=h.useState({}),[s,n]=h.useState({}),[i,o]=h.useState([]),[l,d]=h.useState(null),[u,m]=h.useState(0),[c,p]=h.useState(!1),[g,f]=h.useState(rg()),[b,y]=h.useState([]),[x,w]=h.useState([]);h.useEffect(()=>{try{const N=JSON.parse(localStorage.getItem("explicitValues")||"[]"),v=JSON.parse(localStorage.getItem("deepValues")||"[]"),S=JSON.parse(localStorage.getItem("simulationScenarioOutcomes")||"[]"),I=JSON.parse(localStorage.getItem("finalSimulationMetrics")||"null");if(!N.length||!v.length||!S.length||!I){p(!0);return}const D=JSON.parse(localStorage.getItem("ExplicitValueFrequencies")||"[]"),L=JSON.parse(localStorage.getItem("ImplicitValueFrequencies")||"[]");y(D),w(L);const E={};N.forEach(A=>{const O=A.value_selected.toLowerCase();E[O]=(E[O]||0)+1}),a(E);const $={};v.forEach(A=>{const O=A.name.toLowerCase();$[O]=($[O]||0)+1}),n($);const se=new Set(S.map(A=>A.decision.label.toLowerCase())),k={};se.forEach(A=>{k[A]=[]}),S.forEach(A=>{const O=A.decision.label.toLowerCase();se.forEach(V=>{const B=V===O,z=E[V]>0,ce=$[V]>0;let me=0;B&&(me=(z?40:0)+(ce?60:0)),k[V].push(me)})}),f(k);const M=S.map(A=>{const O=A.decision.label.toLowerCase(),V=E[O]>0,B=$[O]>0,z=(V?40:0)+(B?60:0);return{scenarioId:A.scenarioId,selectedValue:A.decision.label,matchesExplicit:V,matchesImplicit:B,matchesSimulation:!0,stabilityScore:z}});o(M),m(M.reduce((A,O)=>A+O.stabilityScore,0)/M.length),d(I)}catch(N){console.error("Error loading analysis data:",N),p(!0)}},[]);const C=()=>{const N=No;return{labels:N,datasets:[{label:"Explicit Choices",data:N.map(v=>r[v.toLowerCase()]||0),backgroundColor:"rgba(54, 162, 235, 0.5)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1},{label:"Implicit Choices",data:N.map(v=>s[v.toLowerCase()]||0),backgroundColor:"rgba(75, 192, 192, 0.5)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1},{label:"Simulation Decisions",data:N.map(v=>i.filter(S=>S.selectedValue.toLowerCase()===v.toLowerCase()).length),backgroundColor:"rgba(255, 99, 132, 0.5)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1}]}},R=()=>{const N=[{line:"rgb(239, 68, 68)",fill:"rgba(239, 68, 68, 0.1)"},{line:"rgb(59, 130, 246)",fill:"rgba(59, 130, 246, 0.1)"},{line:"rgb(16, 185, 129)",fill:"rgba(16, 185, 129, 0.1)"},{line:"rgb(245, 158, 11)",fill:"rgba(245, 158, 11, 0.1)"},{line:"rgb(139, 92, 246)",fill:"rgba(139, 92, 246, 0.1)"}],v=Object.keys(g);return{labels:["Explicit Choices","Implicit Choices","Scenario 1","Scenario 2","Scenario 3"],datasets:v.map((S,I)=>{const D=b.find(se=>se.value.toLowerCase()===S.toLowerCase()),L=D?D.percentage:0,E=x.find(se=>se.value.toLowerCase()===S.toLowerCase()),$=E?E.percentage:0;return{label:S.charAt(0).toUpperCase()+S.slice(1),data:[L,$,...g[S]],borderColor:N[I%N.length].line,backgroundColor:N[I%N.length].fill,tension:.1,fill:!0}})}};return c?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full",children:[e.jsx(Ue,{className:"mx-auto text-red-500 mb-4\\",size:48}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2 text-center",children:"Data Not Found"}),e.jsx("p",{className:"text-gray-600 text-center mb-6",children:"Please complete the simulation before accessing the final analysis."}),e.jsx("button",{onClick:()=>t("/demographics"),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors duration-200",children:"Start New Simulation"})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(tr,{className:"h-8 w-8 text-blue-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Final Analysis Report"})]}),e.jsxs("button",{onClick:()=>t("/feedback"),className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 text-white font-bold text-lg py-4 px-6 rounded-lg hover:from-blue-700 hover:to-cyan-700 transition-all duration-300 shadow-lg hover:shadow-xl flex items-center justify-center gap-3 group",children:[e.jsx(ut,{size:20,className:"rotate-180 group-hover:-translate-x-1 transition-transform"}),e.jsx("span",{children:"Back to Feedback"})]})]})}),e.jsxs("main",{className:"max-w-5xl mx-auto py-8 px-4 sm:px-6 lg:px-8 space-y-8",children:[e.jsxs("section",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(It,{className:"h-7 w-7 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Value Distribution Analysis"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"How your values were expressed across different assessment types"})]})]}),e.jsx("div",{className:"h-[400px]",children:e.jsx(ds,{data:C(),options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,title:{display:!0,text:"Frequency",font:{size:13,weight:"bold"}},grid:{color:"rgba(0, 0, 0, 0.05)"}},x:{grid:{display:!1}}},plugins:{legend:{position:"bottom",labels:{padding:20,font:{size:13},usePointStyle:!0}},title:{display:!1}}}})})]}),e.jsxs("section",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(Kt,{className:"h-7 w-7 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Value Stability Analysis"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"How consistently your stated values aligned with your decisions"})]})]}),e.jsx("div",{className:"text-center mb-8",children:e.jsxs("div",{className:"inline-flex flex-col items-center p-6 bg-gradient-to-br from-purple-50 to-blue-50 rounded-xl border-2 border-purple-200",children:[e.jsxs("div",{className:`text-6xl font-bold mb-2 ${u>=75?"text-green-600":u>=50?"text-orange-600":"text-red-600"}`,children:[u.toFixed(1),"%"]}),e.jsx("p",{className:"text-lg font-semibold text-gray-800",children:"Overall Value Stability Score"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"(Weighted: 40% Explicit, 60% Implicit Values)"})]})}),e.jsx(wo,{matches:i})]}),e.jsxs("section",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Xt,{className:"h-7 w-7 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Decision Alignment Overview"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Whether your final decisions matched your stated values"})]})]}),(()=>{const N=JSON.parse(localStorage.getItem("ScenariosFinalDecisionLabels")||"[]"),v=JSON.parse(localStorage.getItem("CheckingAlignmentList")||"[]"),S=JSON.parse(localStorage.getItem("sessionEventLogs")||"[]"),I=v.filter(E=>E==="Aligned").length,D=v.length,L=D>0?I/D*100:0;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-8 p-6 bg-gradient-to-r from-blue-50 to-green-50 rounded-xl border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Overall Alignment Rate"}),e.jsxs("p",{className:"text-4xl font-bold text-gray-900",children:[I," / ",D]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"scenarios aligned with your values"})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:`text-5xl font-bold ${L>=66?"text-green-600":L>=33?"text-orange-600":"text-red-600"}`,children:[L.toFixed(0),"%"]})})]})}),e.jsx("div",{className:"space-y-4",children:i.map((E,$)=>{var me;const se=N[$]||E.selectedValue,k=v[$]||"Unknown",M=k==="Aligned",O=S.filter(Ne=>Ne.scenarioId===E.scenarioId||Ne.data&&Ne.data.scenarioId===E.scenarioId).find(Ne=>Ne.event==="option_confirmed"||Ne.data&&Ne.data.event==="option_confirmed"),V=((me=O==null?void 0:O.data)==null?void 0:me.flagsAtConfirmation)||(O==null?void 0:O.flagsAtConfirmation),B=(V==null?void 0:V.cvrYesClicked)??!1,z=(V==null?void 0:V.cvrNoClicked)??!1,ce=(V==null?void 0:V.hasReorderedValues)??!1;return e.jsxs("div",{className:`p-6 rounded-xl border-2 transition-all ${M?"bg-green-50 border-green-300":"bg-red-50 border-red-300"}`,children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["Scenario ",E.scenarioId]}),e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full font-bold text-sm ${M?"bg-green-100 text-green-800 border border-green-300":"bg-red-100 text-red-800 border border-red-300"}`,children:[M?e.jsx(dt,{className:"h-4 w-4"}):e.jsx(ar,{className:"h-4 w-4"}),k]})]}),e.jsxs("div",{className:"bg-white rounded-lg px-4 py-3 border border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Final Decision"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:se.charAt(0).toUpperCase()+se.slice(1)})]})]})}),(B||z||ce)&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-600 mb-2",children:"Interaction Flags"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[B&&e.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 text-xs font-medium rounded-full border border-orange-300",children:"CVR: Would Change Decision"}),z&&e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full border border-blue-300",children:"CVR: Confirmed Decision"}),ce&&e.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 text-xs font-medium rounded-full border border-purple-300",children:"Reordered Preferences"})]})]})]},E.scenarioId)})})]})})()]}),e.jsxs("section",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(ua,{className:"h-7 w-7 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Value Consistency Trend"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"How your value consistency evolved throughout the simulation"})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"h-[450px]",children:e.jsx(Yn,{data:R(),options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,max:100,title:{display:!0,text:"Consistency Score (%)",font:{size:14,weight:"bold"}},grid:{color:"rgba(0, 0, 0, 0.05)",drawBorder:!1},ticks:{font:{size:12},callback:function(N){return N+"%"}}},x:{grid:{display:!1},ticks:{font:{size:12,weight:"bold"}}}},elements:{line:{borderWidth:3},point:{radius:6,hoverRadius:8,borderWidth:2,backgroundColor:"#ffffff"}},plugins:{legend:{position:"top",align:"center",labels:{padding:20,usePointStyle:!0,font:{size:13,weight:"bold"},boxWidth:12,boxHeight:12}},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(255, 255, 255, 0.95)",titleColor:"#1f2937",bodyColor:"#4b5563",borderColor:"#d1d5db",borderWidth:2,padding:16,bodyFont:{size:13},titleFont:{size:15,weight:"bold"},displayColors:!0,boxWidth:12,boxHeight:12,boxPadding:6,callbacks:{label:function(N){return N.dataset.label+": "+N.parsed.y.toFixed(0)+"%"}}}},interaction:{mode:"index",intersect:!1}}})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-4 rounded-xl border-2 border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(dt,{className:"h-5 w-5 text-green-600"}),e.jsx("h3",{className:"text-sm font-bold text-green-800",children:"High Consistency"})]}),e.jsx("p",{className:"text-xs text-gray-700 leading-relaxed",children:"Values consistently align with both explicit and implicit preferences (75-100%)"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 p-4 rounded-xl border-2 border-orange-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ue,{className:"h-5 w-5 text-orange-600"}),e.jsx("h3",{className:"text-sm font-bold text-orange-800",children:"Medium Consistency"})]}),e.jsx("p",{className:"text-xs text-gray-700 leading-relaxed",children:"Values show moderate alignment with stated preferences (50-74%)"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 p-4 rounded-xl border-2 border-red-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ar,{className:"h-5 w-5 text-red-600"}),e.jsx("h3",{className:"text-sm font-bold text-red-800",children:"Low Consistency"})]}),e.jsx("p",{className:"text-xs text-gray-700 leading-relaxed",children:"Values demonstrate significant deviation from preferences (0-49%)"})]})]})]}),e.jsxs("section",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(Ut,{className:"h-7 w-7 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Final Simulation Metrics"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"The cumulative outcomes of your decisions"})]})]}),l&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-green-600 mb-1",children:"Lives Saved"}),e.jsx("p",{className:"text-2xl font-bold text-green-700",children:l.livesSaved})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-red-600 mb-1",children:"Casualties"}),e.jsx("p",{className:"text-2xl font-bold text-red-700",children:l.humanCasualties})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Resources Remaining"}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${l.firefightingResource}%`}})}),e.jsxs("p",{className:"text-right text-sm text-gray-600 mt-1",children:[l.firefightingResource,"%"]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Infrastructure Condition"}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-yellow-600 h-2.5 rounded-full",style:{width:`${l.infrastructureCondition}%`}})}),e.jsxs("p",{className:"text-right text-sm text-gray-600 mt-1",children:[l.infrastructureCondition,"%"]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Biodiversity Condition"}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-green-600 h-2.5 rounded-full",style:{width:`${l.biodiversityCondition}%`}})}),e.jsxs("p",{className:"text-right text-sm text-gray-600 mt-1",children:[l.biodiversityCondition,"%"]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Properties Condition"}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-purple-600 h-2.5 rounded-full",style:{width:`${l.propertiesCondition}%`}})}),e.jsxs("p",{className:"text-right text-sm text-gray-600 mt-1",children:[l.propertiesCondition,"%"]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Nuclear Power Station"}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full ${l.nuclearPowerStation<30?"bg-red-600":l.nuclearPowerStation<70?"bg-yellow-600":"bg-green-600"}`,style:{width:`${l.nuclearPowerStation}%`}})}),e.jsxs("p",{className:"text-right text-sm text-gray-600 mt-1",children:[l.nuclearPowerStation,"%"]})]})]})]})]})]})]})};function Nt(t){try{const r=localStorage.getItem(t);if(!r)return[];const a=JSON.parse(r);return Array.isArray(a)?a:[]}catch{return[]}}function sg(t,r){try{const a=localStorage.getItem(t);return a?JSON.parse(a):r}catch{return r}}const ng=()=>{const t=it(),[r]=Ao(),[a,s]=h.useState(null),n=r.get("silent")==="true";h.useEffect(()=>{const d=sessionStorage.getItem("metricsCalculated");if(n&&d==="true"){console.log("[Silent Mode] Metrics already calculated, navigating back to thank-you page"),t("/thank-you",{replace:!0});return}i()},[n,t]);const i=async()=>{var d;try{const u=JSON.parse(localStorage.getItem("simulationScenarioOutcomes")||"[]"),m=JSON.parse(localStorage.getItem("finalSimulationMetrics")||"null"),c=JSON.parse(localStorage.getItem("finalValues")||"[]"),p=localStorage.getItem("MoralValuesReorderList"),g=Fe.getScenarioTrackingHistory(),f=Fe.getAllEvents();if(!u.length||!m){console.error("Missing required data for metrics calculation");return}const b=c.map(P=>(P.name||P).toString().toLowerCase());let y=[];if(p)try{y=JSON.parse(p).map(q=>(q.id||q.name||q).toString().toLowerCase())}catch{y=b}else y=b;const x=f.filter(P=>P.event==="cvr_opened"),w=x.length,C=f.filter(P=>P.event==="cvr_answered"),R=C.filter(P=>P.cvrAnswer===!0).length,N=C.filter(P=>P.cvrAnswer===!1).length,v=f.filter(P=>P.event==="apa_reordered"),S=v.length,I=[],D=new Map;g.forEach(P=>{if(P.endTime&&P.startTime){const q=(P.endTime-P.startTime)/1e3;I.push(q),D.set(P.scenarioId,{timeSeconds:Math.round(q),switches:P.switchCount||0,cvrVisited:P.cvrVisited||!1,cvrVisitCount:P.cvrVisitCount||0,cvrYesAnswers:P.cvrYesAnswers||0,apaReordered:P.apaReordered||!1,apaReorderCount:P.apaReorderCount||0})}}),I.length===0&&u.forEach(()=>{I.push(75)});const L=I.length>0?I.reduce((P,q)=>P+q,0)/I.length:0,E=[],$=[];u.forEach((P,q)=>{const H=(P.decision.label||"").toLowerCase(),ie=P.scenarioId,K=x.filter(Ee=>Ee.scenarioId===P.scenarioId),ve=C.filter(Ee=>Ee.scenarioId===P.scenarioId&&Ee.cvrAnswer===!0);let ee=!1;ie===1?ee=b.includes(H):(ie===2||ie===3)&&(ee=y.includes(H));const fe=ee&&ve.length===0;E.push(fe);const pe=D.get(P.scenarioId)||{timeSeconds:Math.round(I[q]||0),switches:0,cvrVisited:!1,cvrVisitCount:0,cvrYesAnswers:0,apaReordered:!1,apaReorderCount:0},ge=f.filter(Ee=>Ee.event==="option_selected"&&Ee.scenarioId===P.scenarioId),Me=Math.max(0,ge.length-1),Se=v.filter(Ee=>Ee.scenarioId===P.scenarioId);$.push({scenarioId:P.scenarioId,finalChoice:P.decision.title||P.decision.label||"Unknown",aligned:fe,switches:pe.switches||Me,timeSeconds:pe.timeSeconds,cvrVisited:pe.cvrVisited||K.length>0,cvrVisitCount:pe.cvrVisitCount||K.length,cvrYesAnswers:pe.cvrYesAnswers||ve.length,apaReordered:pe.apaReordered||Se.length>0,apaReorderCount:pe.apaReorderCount||Se.length})});const se=$.reduce((P,q)=>P+q.switches,0),k=E.filter(Boolean).length,M=E.length>0?k/E.length:0,A=o(m),O=l(m);let V=0,B=0;$.forEach(P=>{const H=f.filter(K=>K.scenarioId===P.scenarioId).find(K=>K.event==="option_confirmed"),ie=H==null?void 0:H.flagsAtConfirmation;if(ie){const K=ie.simulationMetricsReorderingFlag??!1,ve=ie.moralValuesReorderingFlag??!1;(K||ve)&&B++}P.aligned||V++});const z=[];v.forEach(P=>{P.valuesAfter&&P.scenarioId!==void 0&&z.push({scenarioId:P.scenarioId,values:P.valuesAfter,preferenceType:P.preferenceType||"unknown"})});const ce={cvrArrivals:w,cvrYesCount:R,cvrNoCount:N,apaReorderings:S,misalignAfterCvrApaCount:V,realignAfterCvrApaCount:B,switchCountTotal:se,avgDecisionTime:L,decisionTimes:I,valueConsistencyIndex:M,performanceComposite:A,balanceIndex:O,finalAlignmentByScenario:E,valueOrderTrajectories:z,scenarioDetails:$};s(ce);const me=be.getSessionId(),Ne=Nt("ScenariosFinalDecisionLabels"),re=Nt("CheckingAlignmentList"),we=Nt("finalValues").map(P=>((P==null?void 0:P.name)??P??"").toString()),de=Nt("Scenario1_MoralValueReordered"),Pe=Nt("Scenario2_MoralValueReordered"),j=Nt("Scenario3_MoralValueReordered"),T=Nt("Scenario3_InfeasibleOptions"),ne=((a==null?void 0:a.scenarioDetails)??(ce==null?void 0:ce.scenarioDetails)??[]).map((P,q)=>{const H=P.scenarioId,ie=(Ne[q]??"N/A").toString(),K=(re[q]??"Unknown").toString();let ve=[],ee="";H===1?(ve=de,ee="Scenario1_MoralValueReordered"):H===2?(ve=Pe,ee="Scenario2_MoralValueReordered"):H===3&&(ve=j,ee="Scenario3_MoralValueReordered");const fe=f.filter(oe=>(oe==null?void 0:oe.scenarioId)===H),pe=fe.find(oe=>(oe==null?void 0:oe.event)==="option_confirmed"),ge=(pe==null?void 0:pe.flagsAtConfirmation)||{},Me=((pe==null?void 0:pe.finalTopTwoValuesBeforeUpdate)??we??[]).map(oe=>typeof oe=="string"?oe:(oe==null?void 0:oe.name)??"").filter(Boolean),Se=!!ge.hasReorderedValues,Ee=!!ge.cvrYesClicked,tt=!!ge.cvrNoClicked,Oe=!!ge.simulationMetricsReorderingFlag,ot=!!ge.moralValuesReorderingFlag,qt=fe.filter(oe=>(oe==null?void 0:oe.event)==="cvr_answered"&&(oe==null?void 0:oe.cvrAnswer)===!0).length,vt=fe.filter(oe=>(oe==null?void 0:oe.event)==="cvr_answered"&&(oe==null?void 0:oe.cvrAnswer)===!1).length,yt=fe.filter(oe=>(oe==null?void 0:oe.event)==="apa_reordered").length,gt=fe.filter(oe=>(oe==null?void 0:oe.event)==="alternative_added").length,_=Math.max(0,fe.filter(oe=>(oe==null?void 0:oe.event)==="option_selected").length-1);return{scenarioId:H,valueListsUsed:{scenarioMoralValueReorderedName:ee,scenarioMoralValueReordered:ve,finalTopTwoValues:Me,infeasibleOptions:H===3?T:[]},finalDecisionLabel:ie,alignmentStatus:K,flagsAtConfirmation:{apaReordered:Se,cvrYes:Ee,cvrNo:tt,simMetricsReordered:Oe,moralValuesReordered:ot},interactionCounters:{apaReorders:yt,cvrYesCount:qt,cvrNoCount:vt,alternativesAdded:gt,switches:_}}});try{const P=be.getSessionId(),q=Nt("ScenariosFinalDecisionLabels"),H=sg("userValues",{explicit:[],implicit:[]}),K=Nt("finalValues").map(Me=>((Me==null?void 0:Me.name)??Me??"").toString().toLowerCase()),ve=(((d=a==null?void 0:a.scenarioDetails)==null?void 0:d.length)??q.length)||0,ee=Array.from({length:ve}).map((Me,Se)=>{const Ee=(q[Se]??"").toString().toLowerCase(),tt=H.explicit.map(gt=>gt.toLowerCase()).includes(Ee),Oe=H.implicit.map(gt=>gt.toLowerCase()).includes(Ee),ot=K.includes(Ee),qt=(tt?.4:0)+(Oe?.6:0),vt=Math.round(qt*100),yt=vt>=60?"Stable":"Unstable";return{scenarioId:Se+1,scenarioLabel:`Scenario ${Se+1}`,selectedValue:Ee,matches:{explicitValuesMatch:tt,implicitValuesMatch:Oe,simulationValuesMatch:ot},stabilityStatus:yt,scorePercent:vt}}),fe=ee.filter(Me=>Me.stabilityStatus==="Stable").length,pe=ee.reduce((Me,Se)=>Me+((Se.matches.explicitValuesMatch?.4:0)+(Se.matches.implicitValuesMatch?.6:0)),0)/(ee.length||1),ge=Number((pe*100).toFixed(1));await be.insertValueStability({session_id:P,overallStabilityScorePercent:ge,weights:{explicitWeight:.4,implicitWeight:.6},scenarios:ee,summary:{totalStableCount:fe,totalScenarios:ee.length}})}catch(P){console.error("insertValueStability failed:",P)}await be.insertSessionMetrics({session_id:me,...ce,debug_tracking:{rows:ne}}),sessionStorage.setItem("metricsCalculated","true"),console.log("[ViewResultsPage] Metrics calculated and saved to database successfully"),n&&(console.log("[Silent Mode] Metrics saved, navigating back to thank-you page"),setTimeout(()=>{t("/thank-you",{replace:!0})},100))}catch(u){console.error("Error calculating metrics:",u),sessionStorage.setItem("metricsCalculated","true"),n&&(console.error("[Silent Mode] Error occurred, but navigating back to thank-you page anyway"),setTimeout(()=>{t("/thank-you",{replace:!0})},100))}},o=d=>{const u={livesSaved:Math.min(d.livesSaved/2e4,1),casualties:1-Math.min(d.humanCasualties/1e3,1),firefightingResource:d.firefightingResource/100,infrastructureCondition:d.infrastructureCondition/100,biodiversityCondition:d.biodiversityCondition/100,propertiesCondition:d.propertiesCondition/100,nuclearPowerStation:d.nuclearPowerStation/100},m=Object.values(u),c=m.reduce((p,g)=>p+g,0)/m.length;return Math.round(c*100)/100},l=d=>{const u=[Math.min(d.livesSaved/2e4,1),1-Math.min(d.humanCasualties/1e3,1),d.firefightingResource/100,d.infrastructureCondition/100,d.biodiversityCondition/100,d.propertiesCondition/100,d.nuclearPowerStation/100],m=u.reduce((p,g)=>p+g,0)/u.length,c=u.reduce((p,g)=>p+Math.pow(g-m,2),0)/u.length;return Math.round((1-c)*100)/100};return null},ig=()=>{const t=it(),[r,a]=h.useState(null),[s,n]=h.useState({decisionSatisfaction:4,processSatisfaction:4,perceivedTransparency:4,notesFreeText:""}),[i,o]=h.useState(!1),[l,d]=h.useState(!1);h.useEffect(()=>{u()},[]);const u=()=>{try{const x=JSON.parse(localStorage.getItem("simulationScenarioOutcomes")||"[]"),w=JSON.parse(localStorage.getItem("finalSimulationMetrics")||"null"),C=JSON.parse(localStorage.getItem("finalValues")||"[]"),R=localStorage.getItem("MoralValuesReorderList"),N=Fe.getScenarioTrackingHistory(),v=Fe.getAllEvents();if(!x.length||!w){console.error("Missing required data for metrics calculation");return}const S=C.map(T=>(T.name||T).toString().toLowerCase());let I=[];if(R)try{I=JSON.parse(R).map(X=>(X.id||X.name||X).toString().toLowerCase())}catch{I=S}else I=S;const D=v.filter(T=>T.event==="cvr_opened"),L=D.length,E=v.filter(T=>T.event==="cvr_answered"),$=E.filter(T=>T.cvrAnswer===!0).length,se=E.filter(T=>T.cvrAnswer===!1).length,k=v.filter(T=>T.event==="apa_reordered"),M=k.length,A=[],O=new Map;if(N.forEach(T=>{if(T.endTime&&T.startTime){const X=(T.endTime-T.startTime)/1e3;A.push(X),O.set(T.scenarioId,{timeSeconds:Math.round(X),switches:T.switchCount||0,cvrVisited:T.cvrVisited||!1,cvrVisitCount:T.cvrVisitCount||0,cvrYesAnswers:T.cvrYesAnswers||0,apaReordered:T.apaReordered||!1,apaReorderCount:T.apaReorderCount||0})}}),A.length===0){const T=new Map,X=new Map;v.forEach(ne=>{if(ne.scenarioId!==void 0){const P=new Date(ne.timestamp).getTime();ne.event==="scenario_started"?T.set(ne.scenarioId,P):(ne.event==="option_confirmed"||ne.event==="scenario_completed")&&X.set(ne.scenarioId,P)}}),x.forEach(ne=>{const P=T.get(ne.scenarioId),q=X.get(ne.scenarioId);if(P&&q){const H=(q-P)/1e3;A.push(H)}else A.push(75)})}const V=A.length>0?A.reduce((T,X)=>T+X,0)/A.length:0,B=[],z=[];x.forEach((T,X)=>{const ne=(T.decision.label||"").toLowerCase(),P=T.scenarioId,q=D.filter(ge=>ge.scenarioId===T.scenarioId),H=E.filter(ge=>ge.scenarioId===T.scenarioId&&ge.cvrAnswer===!0);let ie=!1;P===1?ie=S.includes(ne):(P===2||P===3)&&(ie=I.includes(ne));const K=ie&&H.length===0;B.push(K);const ve=O.get(T.scenarioId)||{timeSeconds:Math.round(A[X]||0),switches:0,cvrVisited:!1,cvrVisitCount:0,cvrYesAnswers:0,apaReordered:!1,apaReorderCount:0},ee=v.filter(ge=>ge.event==="option_selected"&&ge.scenarioId===T.scenarioId),fe=Math.max(0,ee.length-1),pe=k.filter(ge=>ge.scenarioId===T.scenarioId);z.push({scenarioId:T.scenarioId,finalChoice:T.decision.title||T.decision.label||"Unknown",aligned:K,switches:ve.switches||fe,timeSeconds:ve.timeSeconds,cvrVisited:ve.cvrVisited||q.length>0,cvrVisitCount:ve.cvrVisitCount||q.length,cvrYesAnswers:ve.cvrYesAnswers||H.length,apaReordered:ve.apaReordered||pe.length>0,apaReorderCount:ve.apaReorderCount||pe.length})});const ce=z.reduce((T,X)=>T+X.switches,0),me=B.filter(Boolean).length,Ne=B.length>0?me/B.length:0,re=m(w),Y=c(w);let we=0,de=0;z.forEach((T,X)=>{const P=x[X].scenarioId,H=v.filter(K=>K.scenarioId===T.scenarioId).find(K=>K.event==="option_confirmed"),ie=H==null?void 0:H.flagsAtConfirmation;if(ie){const K=ie.simulationMetricsReorderingFlag??!1,ve=ie.moralValuesReorderingFlag??!1;(K||ve)&&de++}T.aligned||we++});const Pe=[];k.forEach(T=>{T.valuesAfter&&T.scenarioId!==void 0&&Pe.push({scenarioId:T.scenarioId,values:T.valuesAfter,preferenceType:T.preferenceType||"unknown"})}),a({cvrArrivals:L,cvrYesCount:$,cvrNoCount:se,apaReorderings:M,misalignAfterCvrApaCount:we,realignAfterCvrApaCount:de,switchCountTotal:ce,avgDecisionTime:V,decisionTimes:A,valueConsistencyIndex:Ne,performanceComposite:re,balanceIndex:Y,finalAlignmentByScenario:B,valueOrderTrajectories:Pe,scenarioDetails:z})}catch(x){console.error("Error calculating metrics:",x)}},m=x=>{const w={livesSaved:Math.min(x.livesSaved/2e4,1),casualties:1-Math.min(x.humanCasualties/1e3,1),firefightingResource:x.firefightingResource/100,infrastructureCondition:x.infrastructureCondition/100,biodiversityCondition:x.biodiversityCondition/100,propertiesCondition:x.propertiesCondition/100,nuclearPowerStation:x.nuclearPowerStation/100},C=Object.values(w),R=C.reduce((N,v)=>N+v,0)/C.length;return Math.round(R*100)/100},c=x=>{const w=[Math.min(x.livesSaved/2e4,1),1-Math.min(x.humanCasualties/1e3,1),x.firefightingResource/100,x.infrastructureCondition/100,x.biodiversityCondition/100,x.propertiesCondition/100,x.nuclearPowerStation/100],C=w.reduce((N,v)=>N+v,0)/w.length,R=w.reduce((N,v)=>N+Math.pow(v-C,2),0)/w.length;return Math.round((1-R)*100)/100},p=(x,w)=>{n(C=>({...C,[x]:w}))},g=async()=>{if(!r)return;const x={...r,...s};localStorage.setItem("sessionResults",JSON.stringify(x));const w={event:"feedback_submitted",timestamp:new Date().toISOString(),data:x},C=JSON.parse(localStorage.getItem("sessionEventLogs")||"[]");C.push(w),localStorage.setItem("sessionEventLogs",JSON.stringify(C));const R=be.getSessionId(),N=JSON.parse(localStorage.getItem("ScenariosFinalDecisionLabels")||"[]"),v=JSON.parse(localStorage.getItem("CheckingAlignmentList")||"[]");await be.insertSessionFeedback({session_id:R,decision_satisfaction:s.decisionSatisfaction,process_satisfaction:s.processSatisfaction,perceived_transparency:s.perceivedTransparency,notes_free_text:s.notesFreeText,value_consistency_index:r.valueConsistencyIndex,performance_composite:r.performanceComposite,balance_index:r.balanceIndex,cvr_arrivals:r.cvrArrivals,cvr_yes_count:r.cvrYesCount,cvr_no_count:r.cvrNoCount,apa_reorderings:r.apaReorderings,total_switches:r.switchCountTotal,avg_decision_time:r.avgDecisionTime,scenarios_final_decision_labels:N,checking_alignment_list:v}),await be.updateUserSession(R,{is_completed:!0,completed_at:new Date().toISOString()}),await be.syncFallbackData(),o(!0),d(!0)},f=x=>{if(!r)return;const w={...r,...s,exportedAt:new Date().toISOString(),userDemographics:JSON.parse(localStorage.getItem("userDemographics")||"{}"),allEvents:Fe.getAllEvents()};if(x==="json"){const C=new Blob([JSON.stringify(w,null,2)],{type:"application/json"}),R=URL.createObjectURL(C),N=document.createElement("a");N.href=R,N.download=`simulation-results-${Date.now()}.json`,N.click(),URL.revokeObjectURL(R)}else{const C=b(w),R=new Blob([C],{type:"text/csv"}),N=URL.createObjectURL(R),v=document.createElement("a");v.href=N,v.download=`simulation-results-${Date.now()}.csv`,v.click(),URL.revokeObjectURL(N)}},b=x=>{const w={};Object.keys(x).forEach(N=>{const v=x[N];Array.isArray(v)?typeof v[0]=="object"?w[N]=JSON.stringify(v):w[N]=v.join(";"):typeof v=="object"&&v!==null?w[N]=JSON.stringify(v):w[N]=v});const C=Object.keys(w),R=C.map(N=>{const v=w[N];return typeof v=="string"&&v.includes(",")?`"${v}"`:v});return[C.join(","),R.join(",")].join(`
`)},y=()=>{const x=localStorage.getItem("userDemographics");localStorage.clear(),x&&localStorage.setItem("userDemographics",x),t("/demographics")};return r?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Qn,{className:"h-8 w-8 text-green-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Results & Feedback"})]}),e.jsxs("div",{className:"flex gap-3",children:[l&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>f("json"),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200",children:[e.jsx(_s,{size:16,className:"mr-2"}),"JSON"]}),e.jsxs("button",{onClick:()=>f("csv"),className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200",children:[e.jsx(_s,{size:16,className:"mr-2"}),"CSV"]})]}),e.jsxs("button",{onClick:y,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors duration-200",children:[e.jsx(ps,{size:16,className:"mr-2"}),"Restart"]})]})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(at,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"CVR Arrivals"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.cvrArrivals})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ti,{className:"h-8 w-8 text-purple-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"APA Reorderings"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.apaReorderings})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ua,{className:"h-8 w-8 text-orange-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Switches"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.switchCountTotal})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(qo,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Decision Time"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[Math.round(r.avgDecisionTime),"s"]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx(Lt,{className:"h-5 w-5 mr-2 text-blue-600"}),"CVR Answers"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(er,{className:"h-5 w-5 text-green-500 mr-3"}),"return [headers.join(','), values.join(',')].join('\\n');"]}),e.jsx("span",{className:"text-xl font-bold text-green-600",children:r.cvrYesCount})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(gs,{className:"h-5 w-5 text-red-500 mr-3"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:'"No, I would not" Answers'})]}),e.jsx("span",{className:"text-xl font-bold text-red-600",children:r.cvrNoCount})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx(Js,{className:"h-5 w-5 mr-2 text-red-600"}),"Post-CVR/APA Alignment Changes"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ar,{className:"h-5 w-5 text-red-500 mr-3"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Misalignment Switches"})]}),e.jsx("span",{className:"text-xl font-bold text-red-600",children:r.misalignAfterCvrApaCount})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(dt,{className:"h-5 w-5 text-green-500 mr-3"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Realignment Switches"})]}),e.jsx("span",{className:"text-xl font-bold text-green-600",children:r.realignAfterCvrApaCount})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Performance Indices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Value Consistency Index"}),e.jsxs("span",{className:"text-xl font-bold text-blue-600",children:[(r.valueConsistencyIndex*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Performance Composite"}),e.jsx("span",{className:"text-xl font-bold text-green-600",children:r.performanceComposite.toFixed(2)})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Balance Index"}),e.jsx("span",{className:"text-xl font-bold text-purple-600",children:r.balanceIndex.toFixed(2)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Scenario Details"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Scenario"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Final Choice"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Switches"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Time (s)"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"CVR Visits"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:'CVR "Yes"'}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"APA Count"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.scenarioDetails.map((x,w)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:["Scenario ",x.scenarioId]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:x.finalChoice}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-center font-medium text-gray-900",children:x.switches}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-center text-gray-700",children:x.timeSeconds}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-center font-semibold text-blue-700",children:x.cvrVisitCount}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-center font-semibold text-green-700",children:x.cvrYesAnswers}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-center font-semibold text-purple-700",children:x.apaReorderCount})]},w))})]})})]}),e.jsxs("div",{className:"bg-yellow-50 rounded-lg shadow-lg p-6 mb-8 border-2 border-yellow-400",children:[e.jsxs("h3",{className:"text-lg font-semibold text-yellow-900 mb-4 flex items-center",children:[e.jsx(Js,{className:"h-5 w-5 mr-2"}),"üêõ Debug Tracking - Comprehensive Scenario Behavior"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-yellow-300 bg-white rounded-lg",children:[e.jsx("thead",{className:"bg-yellow-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 text-left text-xs font-bold text-yellow-900 uppercase border-r border-yellow-300",children:"Scenario"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-bold text-yellow-900 uppercase border-r border-yellow-300",children:"Value Lists Used"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-bold text-yellow-900 uppercase border-r border-yellow-300",children:"Final Decision Label"}),e.jsx("th",{className:"px-3 py-3 text-center text-xs font-bold text-yellow-900 uppercase border-r border-yellow-300",children:"Alignment Status"}),e.jsx("th",{className:"px-3 py-3 text-center text-xs font-bold text-yellow-900 uppercase border-r border-yellow-300",children:"Flags at Confirmation"}),e.jsx("th",{className:"px-3 py-3 text-center text-xs font-bold text-yellow-900 uppercase",children:"Interaction Counters"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-yellow-200",children:(()=>{const x=JSON.parse(localStorage.getItem("ScenariosFinalDecisionLabels")||"[]"),w=JSON.parse(localStorage.getItem("CheckingAlignmentList")||"[]");(()=>{try{const v=localStorage.getItem("finalValues");if(v)return JSON.parse(v).map(I=>(I.name||I).toString())}catch{}return[]})(),(()=>{try{const v=localStorage.getItem("MoralValuesReorderList");if(v)return JSON.parse(v).map(I=>(I.id||I.name||I).toString())}catch{}return[]})();const C=(()=>{try{const v=localStorage.getItem("Scenario1_MoralValueReordered");if(v)return JSON.parse(v)}catch{}return[]})(),R=(()=>{try{const v=localStorage.getItem("Scenario2_MoralValueReordered");if(v)return JSON.parse(v)}catch{}return[]})(),N=(()=>{try{const v=localStorage.getItem("Scenario3_MoralValueReordered");if(v)return JSON.parse(v)}catch{}return[]})();return r.scenarioDetails.map((v,S)=>{const I=v.scenarioId,D=x[S]||"N/A",L=w[S]||"Unknown";let E=[],$="";I===1?(E=C,$="Scenario1_MoralValueReordered"):I===2?(E=R,$="Scenario2_MoralValueReordered"):I===3&&(E=N,$="Scenario3_MoralValueReordered");const k=Fe.getAllEvents().filter(de=>de.scenarioId===I),M=k.find(de=>de.event==="option_confirmed"),A=M==null?void 0:M.flagsAtConfirmation;console.log(`[Debug] Scenario ${I} - Confirmation event:`,M),console.log(`[Debug] Scenario ${I} - Flags at confirmation:`,A);const O=(A==null?void 0:A.hasReorderedValues)??!1,V=(A==null?void 0:A.cvrYesClicked)??!1,B=(A==null?void 0:A.cvrNoClicked)??!1,z=(A==null?void 0:A.simulationMetricsReorderingFlag)??!1,ce=(A==null?void 0:A.moralValuesReorderingFlag)??!1,me=k.filter(de=>de.event==="cvr_answered"&&de.cvrAnswer===!0).length,Ne=k.filter(de=>de.event==="cvr_answered"&&de.cvrAnswer===!1).length,re=k.filter(de=>de.event==="apa_reordered").length,Y=k.filter(de=>de.event==="alternative_added").length,we=Math.max(0,k.filter(de=>de.event==="option_selected").length-1);return console.log(`[Debug] Scenario ${I} - Counters - CVR Yes: ${me}, CVR No: ${Ne}, APA: ${re}, Alternatives: ${Y}, Switches: ${we}`),M||console.warn(`[Warning] No confirmation event found for Scenario ${I}`),M&&!A&&console.warn(`[Warning] No flags captured at confirmation for Scenario ${I}`),e.jsxs("tr",{className:"hover:bg-yellow-50",children:[e.jsxs("td",{className:"px-3 py-4 whitespace-nowrap text-sm font-bold text-gray-900 border-r border-yellow-200",children:["Scenario ",I]}),e.jsx("td",{className:"px-3 py-4 text-xs border-r border-yellow-200",children:e.jsxs("div",{className:"space-y-2",children:[E&&e.jsxs("div",{className:"bg-purple-50 p-2 rounded border-2 border-purple-400",children:[e.jsxs("p",{className:"font-bold text-purple-900 mb-1",children:[$,":"]}),e.jsx("p",{className:"text-purple-700 font-mono break-words",children:E.length>0?`[${E.map(de=>de.charAt(0).toUpperCase()+de.slice(1)).join(", ")}]`:"[ Empty ]"})]}),e.jsxs("div",{className:"bg-green-50 p-2 rounded border-2 border-green-400",children:[e.jsx("p",{className:"font-bold text-green-900 mb-1",children:"FinalTopTwoValues:"}),e.jsx("p",{className:"text-green-700 font-mono break-words",children:M!=null&&M.finalTopTwoValuesBeforeUpdate&&M.finalTopTwoValuesBeforeUpdate.length>0?`[${M.finalTopTwoValuesBeforeUpdate.map(de=>de.charAt(0).toUpperCase()+de.slice(1)).join(", ")}]`:"[ Empty ]"})]})]})}),e.jsx("td",{className:"px-3 py-4 text-sm border-r border-yellow-200",children:e.jsx("div",{className:"bg-cyan-50 px-3 py-2 rounded border border-cyan-300 inline-block",children:e.jsx("span",{className:"font-bold text-cyan-900",children:D.charAt(0).toUpperCase()+D.slice(1)})})}),e.jsx("td",{className:"px-3 py-4 text-center border-r border-yellow-200",children:e.jsxs("div",{className:`inline-flex items-center px-3 py-1 rounded-full font-bold text-sm ${L==="Aligned"?"bg-green-100 text-green-800 border-2 border-green-400":"bg-red-100 text-red-800 border-2 border-red-400"}`,children:[L==="Aligned"?e.jsx(dt,{className:"h-4 w-4 mr-1"}):e.jsx(ar,{className:"h-4 w-4 mr-1"}),L]})}),e.jsx("td",{className:"px-3 py-4 border-r border-yellow-200",children:A?e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:`flex items-center justify-between px-2 py-1 rounded ${O?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600"}`,children:[e.jsx("span",{className:"font-semibold",children:"APA Reordered:"}),e.jsx("span",{className:"ml-2 font-bold",children:O?"‚úì Yes":"‚úó No"})]}),e.jsxs("div",{className:`flex items-center justify-between px-2 py-1 rounded ${V?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:[e.jsx("span",{className:"font-semibold",children:'CVR "Yes":'}),e.jsx("span",{className:"ml-2 font-bold",children:V?"‚úì Yes":"‚úó No"})]}),e.jsxs("div",{className:`flex items-center justify-between px-2 py-1 rounded ${B?"bg-red-100 text-red-800":"bg-gray-100 text-gray-600"}`,children:[e.jsx("span",{className:"font-semibold",children:'CVR "No":'}),e.jsx("span",{className:"ml-2 font-bold",children:B?"‚úì Yes":"‚úó No"})]}),e.jsxs("div",{className:`flex items-center justify-between px-2 py-1 rounded ${z?"bg-cyan-100 text-cyan-800":"bg-gray-100 text-gray-600"}`,children:[e.jsx("span",{className:"font-semibold",children:"Sim. Metrics Reord.:"}),e.jsx("span",{className:"ml-2 font-bold",children:z?"‚úì Yes":"‚úó No"})]}),e.jsxs("div",{className:`flex items-center justify-between px-2 py-1 rounded ${ce?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-600"}`,children:[e.jsx("span",{className:"font-semibold",children:"Moral Values Reord.:"}),e.jsx("span",{className:"ml-2 font-bold",children:ce?"‚úì Yes":"‚úó No"})]})]}):e.jsx("div",{className:"bg-yellow-100 border-2 border-yellow-400 rounded p-2 text-xs text-yellow-900 font-bold",children:"‚ö†Ô∏è No flag data captured at confirmation"})}),e.jsx("td",{className:"px-3 py-4",children:e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex items-center justify-between px-2 py-1 bg-purple-50 rounded",children:[e.jsx("span",{className:"font-semibold text-purple-900",children:"APA Reorders:"}),e.jsx("span",{className:"ml-2 font-bold text-purple-700",children:re})]}),e.jsxs("div",{className:"flex items-center justify-between px-2 py-1 bg-green-50 rounded",children:[e.jsx("span",{className:"font-semibold text-green-900",children:'CVR "Yes":'}),e.jsx("span",{className:"ml-2 font-bold text-green-700",children:me})]}),e.jsxs("div",{className:"flex items-center justify-between px-2 py-1 bg-red-50 rounded",children:[e.jsx("span",{className:"font-semibold text-red-900",children:'CVR "No":'}),e.jsx("span",{className:"ml-2 font-bold text-red-700",children:Ne})]}),e.jsxs("div",{className:"flex items-center justify-between px-2 py-1 bg-blue-50 rounded",children:[e.jsx("span",{className:"font-semibold text-blue-900",children:"Alternatives:"}),e.jsx("span",{className:"ml-2 font-bold text-blue-700",children:Y})]}),e.jsxs("div",{className:"flex items-center justify-between px-2 py-1 bg-orange-50 rounded",children:[e.jsx("span",{className:"font-semibold text-orange-900",children:"Switches:"}),e.jsx("span",{className:"ml-2 font-bold text-orange-700",children:we})]})]})})]},S)})})()})]})}),e.jsx("div",{className:"mt-4 pt-4 border-t-2 border-yellow-400",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-yellow-300",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-600 mb-2",children:"Session Totals"}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Total CVR Arrivals:"}),e.jsx("span",{className:"font-bold text-blue-700",children:r.cvrArrivals})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Total APA Reorderings:"}),e.jsx("span",{className:"font-bold text-purple-700",children:r.apaReorderings})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Total Switches:"}),e.jsx("span",{className:"font-bold text-orange-700",children:r.switchCountTotal})]})]})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-yellow-300",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-600 mb-2",children:"CVR Response Summary"}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:'"Yes, I would" answers:'}),e.jsx("span",{className:"font-bold text-green-700",children:r.cvrYesCount})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:'"No, I would not" answers:'}),e.jsx("span",{className:"font-bold text-red-700",children:r.cvrNoCount})]})]})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-yellow-300",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-600 mb-2",children:"Alignment Summary"}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Aligned Decisions:"}),e.jsxs("span",{className:"font-bold text-green-700",children:[r.finalAlignmentByScenario.filter(Boolean).length," / ",r.finalAlignmentByScenario.length]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Value Consistency:"}),e.jsxs("span",{className:"font-bold text-blue-700",children:[(r.valueConsistencyIndex*100).toFixed(1),"%"]})]})]})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-6 flex items-center",children:[e.jsx(Zt,{className:"h-5 w-5 mr-2 text-yellow-500"}),"Your Feedback"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Decision Satisfaction"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"1"}),e.jsx("input",{type:"range",min:"1",max:"7",value:s.decisionSatisfaction,onChange:x=>p("decisionSatisfaction",parseInt(x.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",disabled:i}),e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"7"}),e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-base font-bold text-blue-600",children:s.decisionSatisfaction})})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1 px-8",children:[e.jsx("span",{children:"Very Dissatisfied"}),e.jsx("span",{children:"Very Satisfied"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Process Satisfaction"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"1"}),e.jsx("input",{type:"range",min:"1",max:"7",value:s.processSatisfaction,onChange:x=>p("processSatisfaction",parseInt(x.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",disabled:i}),e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"7"}),e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-base font-bold text-green-600",children:s.processSatisfaction})})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1 px-8",children:[e.jsx("span",{children:"Very Poor"}),e.jsx("span",{children:"Excellent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Perceived Transparency"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"1"}),e.jsx("input",{type:"range",min:"1",max:"7",value:s.perceivedTransparency,onChange:x=>p("perceivedTransparency",parseInt(x.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",disabled:i}),e.jsx("span",{className:"text-xs text-gray-500 w-4",children:"7"}),e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-base font-bold text-purple-600",children:s.perceivedTransparency})})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1 px-8",children:[e.jsx("span",{children:"Not Transparent"}),e.jsx("span",{children:"Very Transparent"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(Lt,{className:"h-4 w-4 mr-2 text-gray-500"}),"Additional Comments (Optional)"]}),e.jsx("textarea",{value:s.notesFreeText,onChange:x=>n(w=>({...w,notesFreeText:x.target.value})),rows:4,disabled:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"Share any additional thoughts about your experience..."})]})]}),i?e.jsx("div",{className:"mt-6 p-4 bg-green-50 border-2 border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(dt,{className:"h-6 w-6 text-green-500 mr-3"}),e.jsx("span",{className:"text-green-800 font-semibold text-lg",children:"Feedback submitted successfully!"})]})}):e.jsxs("button",{onClick:g,className:"mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center shadow-md hover:shadow-lg",children:[e.jsx(Zt,{size:20,className:"mr-2"}),"Submit Feedback"]})]})]}),e.jsx("style",{children:`
        .slider::-webkit-slider-thumb {
          appearance: none;
          height: 20px;
          width: 20px;
          border-radius: 50%;
          background: #3B82F6;
          cursor: pointer;
          box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .slider::-moz-range-thumb {
          height: 20px;
          width: 20px;
          border-radius: 50%;
          background: #3B82F6;
          cursor: pointer;
          border: none;
          box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .slider:disabled::-webkit-slider-thumb {
          background: #9CA3AF;
          cursor: not-allowed;
        }

        .slider:disabled::-moz-range-thumb {
          background: #9CA3AF;
          cursor: not-allowed;
        }
      `})]}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Calculating session metrics..."})]})})},og=()=>{const[t,r]=h.useState(!1),[a,s]=h.useState(!1);return h.useEffect(()=>{window.scrollTo(0,0),(async()=>{r(!0),setTimeout(()=>s(!0),300);const i={event:"study_completed",timestamp:new Date().toISOString(),data:{completionStatus:"full"}},o=JSON.parse(localStorage.getItem("sessionEventLogs")||"[]");o.push(i),localStorage.setItem("sessionEventLogs",JSON.stringify(o));const l=localStorage.getItem("sessionId");l&&(await be.updateSessionStatus(l,{status:"completed",completed_at:new Date().toISOString(),study_fully_completed:!0}),await be.syncFallbackData())})()},[]),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-teal-50 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-blue-200 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-pulse"}),e.jsx("div",{className:"absolute bottom-20 right-10 w-72 h-72 bg-teal-200 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-pulse delay-1000"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-green-200 rounded-full mix-blend-multiply filter blur-3xl opacity-10 animate-pulse delay-500"})]}),e.jsx("div",{className:`max-w-4xl w-full transition-all duration-1000 transform relative z-10 ${t?"opacity-100 translate-y-0":"opacity-0 translate-y-8"}`,children:e.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-3xl shadow-2xl p-8 md:p-12 border border-gray-100",children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-400 to-teal-500 rounded-full blur-xl opacity-50 animate-pulse"}),e.jsx("div",{className:"relative bg-gradient-to-br from-green-400 via-teal-500 to-blue-500 rounded-full p-5 shadow-2xl",children:e.jsx(St,{className:"h-20 w-20 text-white",strokeWidth:2.5})})]})}),e.jsxs("div",{className:`transition-all duration-700 delay-300 ${a?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-center text-gray-900 mb-3",children:"Study Complete"}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-8",children:[e.jsx(Qt,{className:"h-6 w-6 text-yellow-500"}),e.jsx("p",{className:"text-xl text-center text-gray-700 font-medium",children:"Your Journey Has Concluded"}),e.jsx(Qt,{className:"h-6 w-6 text-yellow-500"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 via-teal-50 to-green-50 rounded-2xl p-8 mb-8 border-2 border-teal-200 shadow-inner",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-red-400 to-pink-500 rounded-full p-3 shadow-lg flex-shrink-0",children:e.jsx(ei,{className:"h-7 w-7 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Thank You for Your Invaluable Contribution"}),e.jsx("p",{className:"text-gray-800 leading-relaxed text-lg",children:"Your thoughtful participation has provided crucial insights into how individuals navigate complex ethical decisions under pressure. Your engagement throughout this study demonstrates the depth and nuance of human decision-making in challenging circumstances."})]})]}),e.jsx("div",{className:"space-y-4 ml-0 md:ml-16",children:e.jsx("p",{className:"text-gray-700 leading-relaxed text-base",children:"Through your careful consideration of each scenario, you have helped advance our understanding of value alignment, moral reasoning, and the intricate relationship between personal beliefs and real-world choices."})})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md border-2 border-blue-100 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"bg-blue-100 rounded-full p-4",children:e.jsx(Zt,{className:"h-8 w-8 text-blue-600"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 text-center mb-2",children:"Meaningful Impact"}),e.jsx("p",{className:"text-gray-600 text-center text-sm leading-relaxed",children:"Your decisions contribute to research that may shape future tools for ethical decision-making"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md border-2 border-teal-100 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"bg-teal-100 rounded-full p-4",children:e.jsx(Ka,{className:"h-8 w-8 text-teal-600"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 text-center mb-2",children:"Exemplary Dedication"}),e.jsx("p",{className:"text-gray-600 text-center text-sm leading-relaxed",children:"Your commitment to completing this comprehensive study reflects exceptional dedication"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md border-2 border-green-100 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"bg-green-100 rounded-full p-4",children:e.jsx(ua,{className:"h-8 w-8 text-green-600"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 text-center mb-2",children:"Advancing Knowledge"}),e.jsx("p",{className:"text-gray-600 text-center text-sm leading-relaxed",children:"Your responses help build a deeper understanding of human values and decision processes"})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-slate-50 to-gray-100 rounded-2xl p-8 border-2 border-gray-200",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"We Wish You All the Best"}),e.jsx("p",{className:"text-gray-700 text-lg leading-relaxed max-w-2xl mx-auto",children:"As you continue on your journey, may you carry forward the thoughtfulness and wisdom you demonstrated throughout this study. Your ability to navigate complex decisions with care and consideration is a valuable strength."}),e.jsx("div",{className:"pt-4",children:e.jsx("p",{className:"text-gray-600 font-medium",children:"Thank you once again for your time, effort, and invaluable insights."})})]})}),e.jsx("div",{className:"mt-8 pt-6 border-t-2 border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-center gap-4 text-gray-500",children:[e.jsx(St,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-sm",children:"Study Completed Successfully"}),e.jsx(St,{className:"h-5 w-5 text-green-600"})]})})]})]})})]})};function lg(){return e.jsx(Do,{basename:"/VRDS_CVR_APA",children:e.jsxs(To,{children:[e.jsx(Je,{path:"/",element:e.jsx(Eo,{to:"/demographics",replace:!0})}),e.jsx(Je,{path:"/demographics",element:e.jsx(rl,{})}),e.jsx(Je,{path:"/explicitvaluepage",element:e.jsx(al,{})}),e.jsx(Je,{path:"/preferences",element:e.jsx(sl,{})}),e.jsx(Je,{path:"/completion",element:e.jsx(nl,{})}),e.jsx(Je,{path:"/values",element:e.jsx(il,{})}),e.jsx(Je,{path:"/tutorial",element:e.jsx(ol,{})}),e.jsx(Je,{path:"/simulation",element:e.jsx(Xp,{})}),e.jsx(Je,{path:"/thank-you",element:e.jsx(eg,{})}),e.jsx(Je,{path:"/feedback",element:e.jsx(tg,{})}),e.jsx(Je,{path:"/final-analysis",element:e.jsx(ag,{})}),e.jsx(Je,{path:"/view-results",element:e.jsx(ng,{})}),e.jsx(Je,{path:"/results-feedback",element:e.jsx(ig,{})}),e.jsx(Je,{path:"/study-complete",element:e.jsx(og,{})})]})})}_n(document.getElementById("root")).render(e.jsx(lg,{}));
